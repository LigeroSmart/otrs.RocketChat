<?xml version="1.0" encoding="utf-8" ?>
<otrs_package version="1.1">
    <Name>RocketChat</Name>
    <Version>5.0.4</Version>
    <Vendor>Ligero [Free]</Vendor>
    <URL>http://ligero.online/</URL>
    <License>GNU GENERAL PUBLIC LICENSE Version 2, June 1991</License>
    <ChangeLog Date="2017-11-23 09:50:00" Version="0.8">First Release</ChangeLog>
    <Description Lang="en">This addon enables OTRS to integrate with Rocket.Chat. You can have a livechat on your 
    OTRS or any site of your company.</Description>
    <Description Lang="pt_BR">Este AddOn realiza a integração do OTRS com o Rocket.Chat.</Description>
    <Framework>5.0.x</Framework>
    <CodeInstall Type="post">
        my $CodeModule = 'var::packagesetup::' . $Param{Structure}-&gt;{Name}-&gt;{Content};
        $Kernel::OM-&gt;Get($CodeModule)-&gt;CodeInstall();
    </CodeInstall>
    <CodeUpgrade Type="post">
        my $CodeModule = 'var::packagesetup::' . $Param{Structure}-&gt;{Name}-&gt;{Content};
        $Kernel::OM-&gt;Get($CodeModule)-&gt;CodeUpgrade();
    </CodeUpgrade>
    <BuildDate>2019-10-09 13:48:44</BuildDate>
    <BuildHost>yourhost.example.com</BuildHost>
    <Filelist>
        <File Location="Custom/RocketChat.sopm" Permission="644" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+CjxvdHJzX3BhY2thZ2UgdmVyc2lvbj0iMS4xIj4KICAgIDxOYW1lPlJvY2tldENoYXQ8L05hbWU+CiAgICA8VmVyc2lvbj41LjAuNDwvVmVyc2lvbj4KICAgIDxWZW5kb3I+TGlnZXJvIFtGcmVlXTwvVmVuZG9yPgogICAgPFVSTD5odHRwOi8vbGlnZXJvLm9ubGluZS88L1VSTD4KICAgIDxMaWNlbnNlPkdOVSBHRU5FUkFMIFBVQkxJQyBMSUNFTlNFIFZlcnNpb24gMiwgSnVuZSAxOTkxPC9MaWNlbnNlPgogICAgPENoYW5nZUxvZyBEYXRlPSIyMDE3LTExLTIzIDA5OjUwOjAwIiBWZXJzaW9uPSIwLjgiPkZpcnN0IFJlbGVhc2U8L0NoYW5nZUxvZz4KICAgIDxEZXNjcmlwdGlvbiBMYW5nPSJlbiI+VGhpcyBhZGRvbiBlbmFibGVzIE9UUlMgdG8gaW50ZWdyYXRlIHdpdGggUm9ja2V0LkNoYXQuIFlvdSBjYW4gaGF2ZSBhIGxpdmVjaGF0IG9uIHlvdXIgCiAgICBPVFJTIG9yIGFueSBzaXRlIG9mIHlvdXIgY29tcGFueS48L0Rlc2NyaXB0aW9uPgogICAgPERlc2NyaXB0aW9uIExhbmc9InB0X0JSIj5Fc3RlIEFkZE9uIHJlYWxpemEgYSBpbnRlZ3Jhw6fDo28gZG8gT1RSUyBjb20gbyBSb2NrZXQuQ2hhdC48L0Rlc2NyaXB0aW9uPgogICAgPEZyYW1ld29yaz41LjAueDwvRnJhbWV3b3JrPgogICAgPEZpbGVsaXN0PgogICAgICAgIDxGaWxlIExvY2F0aW9uPSJDdXN0b20vUm9ja2V0Q2hhdC5zb3BtIiBQZXJtaXNzaW9uPSI2NDQiPjwvRmlsZT4KICAgICAgICA8RmlsZSBMb2NhdGlvbj0iS2VybmVsL0NvbmZpZy9GaWxlcy9Sb2NrZXRDaGF0LnhtbCIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICAgICAgPEZpbGUgTG9jYXRpb249Iktlcm5lbC9HZW5lcmljSW50ZXJmYWNlL09wZXJhdGlvbi9Sb2NrZXRDaGF0L0luY29taW5nQ2hhdC5wbSIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICAgICAgPEZpbGUgTG9jYXRpb249Iktlcm5lbC9PdXRwdXQvSFRNTC9GaWx0ZXJFbGVtZW50UG9zdC9Sb2NrZXRDaGF0LnBtIiBQZXJtaXNzaW9uPSI2NDQiPjwvRmlsZT4KICAgICAgICA8RmlsZSBMb2NhdGlvbj0iS2VybmVsL091dHB1dC9IVE1ML1RlbXBsYXRlcy9TdGFuZGFyZC9Sb2NrZXRDaGF0LnR0IiBQZXJtaXNzaW9uPSI2NDQiPjwvRmlsZT4KICAgICAgICA8RmlsZSBMb2NhdGlvbj0iS2VybmVsL091dHB1dC9IVE1ML1RlbXBsYXRlcy9TdGFuZGFyZC9Sb2NrZXRDaGF0L0NoYXRUZW1wbGF0ZS50dCIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICAgICAgPEZpbGUgTG9jYXRpb249InZhci9wYWNrYWdlc2V0dXAvUm9ja2V0Q2hhdC5wbSIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICAgICAgPEZpbGUgTG9jYXRpb249Iktlcm5lbC9TeXN0ZW0vVGlja2V0L0V2ZW50L05vdGlmaWNhdGlvbkV2ZW50L1RyYW5zcG9ydC9Sb2NrZXRDaGF0LnBtIiBQZXJtaXNzaW9uPSI2NDQiPjwvRmlsZT4KICAgICAgICA8RmlsZSBMb2NhdGlvbj0iS2VybmVsL091dHB1dC9IVE1ML1RlbXBsYXRlcy9TdGFuZGFyZC9BZG1pbk5vdGlmaWNhdGlvbkV2ZW50VHJhbnNwb3J0Um9ja2V0Q2hhdC50dCIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICA8L0ZpbGVsaXN0PgogICAgPENvZGVJbnN0YWxsIFR5cGU9InBvc3QiPgogICAgICAgIG15ICRDb2RlTW9kdWxlID0gJ3Zhcjo6cGFja2FnZXNldHVwOjonIC4gJFBhcmFte1N0cnVjdHVyZX0tJmd0O3tOYW1lfS0mZ3Q7e0NvbnRlbnR9OwogICAgICAgICRLZXJuZWw6Ok9NLSZndDtHZXQoJENvZGVNb2R1bGUpLSZndDtDb2RlSW5zdGFsbCgpOwogICAgPC9Db2RlSW5zdGFsbD4KCTxDb2RlVXBncmFkZSBUeXBlPSJwb3N0Ij4KICAgICAgICBteSAkQ29kZU1vZHVsZSA9ICd2YXI6OnBhY2thZ2VzZXR1cDo6JyAuICRQYXJhbXtTdHJ1Y3R1cmV9LSZndDt7TmFtZX0tJmd0O3tDb250ZW50fTsKICAgICAgICAkS2VybmVsOjpPTS0mZ3Q7R2V0KCRDb2RlTW9kdWxlKS0mZ3Q7Q29kZVVwZ3JhZGUoKTsKICAgIDwvQ29kZVVwZ3JhZGU+Cjwvb3Ryc19wYWNrYWdlPgo=</File>
        <File Location="Kernel/Config/Files/RocketChat.xml" Permission="644" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+CjxvdHJzX2NvbmZpZyB2ZXJzaW9uPSIxLjAiIGluaXQ9IkFwcGxpY2F0aW9uIj4KICAgIDxDb25maWdJdGVtIE5hbWU9IkZyb250ZW5kOjpPdXRwdXQ6OkZpbHRlckVsZW1lbnRQb3N0IyMjUm9ja2V0Q2hhdCIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5Sb2NrZXQgQ2hhdCBMaXZlY2hhdCBPdXRwdXQgRmlsdGVyPC9EZXNjcmlwdGlvbj4KICAgICAgICA8R3JvdXA+Um9ja2V0Q2hhdDwvR3JvdXA+CiAgICAgICAgPFN1Ykdyb3VwPkZyb250ZW5kOjpPdXRwdXQ6OkZpbHRlckVsZW1lbnRQb3N0PC9TdWJHcm91cD4KICAgICAgICA8U2V0dGluZz4KICAgICAgICAgICAgPEhhc2g+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9Ik1vZHVsZSI+S2VybmVsOjpPdXRwdXQ6OkhUTUw6OkZpbHRlckVsZW1lbnRQb3N0OjpSb2NrZXRDaGF0PC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJEZWJ1ZyI+MDwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGVtcGxhdGVzIj4KICAgICAgICAgICAgICAgICAgICA8SGFzaD4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJDdXN0b21lckZvb3RlciI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICA8L0hhc2g+CiAgICAgICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgICAgIDwvSGFzaD4KICAgICAgICA8L1NldHRpbmc+CiAgICA8L0NvbmZpZ0l0ZW0+CiAgICA8Q29uZmlnSXRlbSBOYW1lPSJHZW5lcmljSW50ZXJmYWNlOjpPcGVyYXRpb246Ok1vZHVsZSMjI1JvY2tldENoYXQ6OkluY29taW5nQ2hhdCIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5HZW5lcmljSW50ZXJmYWNlIG1vZHVsZSByZWdpc3RyYXRpb24gZm9yIHRoZSBvcGVyYXRpb24gbGF5ZXIuPC9EZXNjcmlwdGlvbj4KICAgICAgICA8R3JvdXA+Um9ja2V0Q2hhdDwvR3JvdXA+CiAgICAgICAgPFN1Ykdyb3VwPkdlbmVyaWNJbnRlcmZhY2U6Ok9wZXJhdGlvbjo6TW9kdWxlUmVnaXN0cmF0aW9uPC9TdWJHcm91cD4KICAgICAgICA8U2V0dGluZz4KICAgICAgICAgICAgPEhhc2g+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9Ik5hbWUiPkluY29taW5nQ2hhdDwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQ29udHJvbGxlciI+Um9ja2V0Q2hhdDwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQ29uZmlnRGlhbG9nIj5BZG1pbkdlbmVyaWNJbnRlcmZhY2VPcGVyYXRpb25EZWZhdWx0PC9JdGVtPgogICAgICAgICAgICA8L0hhc2g+CiAgICAgICAgPC9TZXR0aW5nPgogICAgPC9Db25maWdJdGVtPgogICAgPENvbmZpZ0l0ZW0gTmFtZT0iUm9ja2V0Q2hhdDo6Q29kZSIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5KYXZhc2NyaXB0IENvZGUgZ2VuZXJhdGVkIGJ5IHlvdXIgUm9ja2V0Q2hhdCBTZXJ2ZXI8L0Rlc2NyaXB0aW9uPgogICAgICAgIDxHcm91cD5Sb2NrZXRDaGF0PC9Hcm91cD4KICAgICAgICA8U3ViR3JvdXA+U2V0dGluZ3M8L1N1Ykdyb3VwPgogICAgICAgIDxTZXR0aW5nPgogICAgICAgICAgICA8VGV4dEFyZWE+CiZsdDshLS0gU3RhcnQgb2YgUm9ja2V0LkNoYXQgTGl2ZWNoYXQgU2NyaXB0IC0tJmd0OwombHQ7c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCImZ3Q7CihmdW5jdGlvbih3LCBkLCBzLCB1KSB7Cgl3LlJvY2tldENoYXQgPSBmdW5jdGlvbihjKSB7IHcuUm9ja2V0Q2hhdC5fLnB1c2goYykgfTsgdy5Sb2NrZXRDaGF0Ll8gPSBbXTsgdy5Sb2NrZXRDaGF0LnVybCA9IHU7Cgl2YXIgaCA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF0sIGogPSBkLmNyZWF0ZUVsZW1lbnQocyk7CglqLmFzeW5jID0gdHJ1ZTsgai5zcmMgPSAnaHR0cHM6Ly95b3Vyc2VydmVyL3BhY2thZ2VzL3JvY2tldGNoYXRfbGl2ZWNoYXQvYXNzZXRzL3JvY2tldGNoYXQtbGl2ZWNoYXQubWluLmpzP189WFhYWFhYWFhYJzsKCWgucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaiwgaCk7Cn0pKHdpbmRvdywgZG9jdW1lbnQsICdzY3JpcHQnLCAnaHR0cHM6Ly95b3Vyc2VydmVyL2xpdmVjaGF0Jyk7CiZsdDsvc2NyaXB0Jmd0OwombHQ7IS0tIEVuZCBvZiBSb2NrZXQuQ2hhdCBMaXZlY2hhdCBTY3JpcHQgLS0mZ3Q7CiAgICAgICAgICAgIDwvVGV4dEFyZWE+CiAgICAgICAgPC9TZXR0aW5nPgogICAgPC9Db25maWdJdGVtPgoKICAgIDxDb25maWdJdGVtIE5hbWU9Ik5vdGlmaWNhdGlvbjo6VHJhbnNwb3J0IyMjUm9ja2V0Q2hhdCIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5EZWZpbmVzIGFsbCB0aGUgcGFyYW1ldGVycyBmb3IgdGhpcyBub3RpZmljYXRpb24gdHJhbnNwb3J0LjwvRGVzY3JpcHRpb24+CiAgICAgICAgPEdyb3VwPlJvY2tldENoYXQ8L0dyb3VwPgogICAgICAgIDxTdWJHcm91cD5Gcm9udGVuZDo6QWRtaW46OkFkbWluTm90aWZpY2F0aW9uRXZlbnQ8L1N1Ykdyb3VwPgogICAgICAgIDxTZXR0aW5nPgogICAgICAgICAgICA8SGFzaD4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iTW9kdWxlIj5LZXJuZWw6OlN5c3RlbTo6VGlja2V0OjpFdmVudDo6Tm90aWZpY2F0aW9uRXZlbnQ6OlRyYW5zcG9ydDo6Um9ja2V0Q2hhdDwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iTmFtZSIgVHJhbnNsYXRhYmxlPSIxIj5Sb2NrZXQuQ2hhdDwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iSWNvbiI+ZmEgZmEtcm9ja2V0PC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJQcmlvIj4xMDM8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IklzT1RSU0J1c2luZXNzVHJhbnNwb3J0Ij4wPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJBZ2VudEVuYWJsZWRCeURlZmF1bHQiPjE8L0l0ZW0+CiAgICAgICAgICAgIDwvSGFzaD4KICAgICAgICA8L1NldHRpbmc+CiAgICA8L0NvbmZpZ0l0ZW0+Cjwvb3Ryc19jb25maWc+Cg==</File>
        <File Location="Kernel/GenericInterface/Operation/RocketChat/IncomingChat.pm" Permission="644" Encode="Base64">cGFja2FnZSBLZXJuZWw6OkdlbmVyaWNJbnRlcmZhY2U6Ok9wZXJhdGlvbjo6Um9ja2V0Q2hhdDo6SW5jb21pbmdDaGF0OwoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKdXNlIERhdGE6OkR1bXBlcjsKCnVzZSBEaWdlc3Q6Ok1ENSBxdyhtZDVfaGV4KTsKCnVzZSBEYXRlOjpQYXJzZTsKCnVzZSBLZXJuZWw6OlN5c3RlbTo6VmFyaWFibGVDaGVjayBxdyg6YWxsKTsKdXNlIHV0Zjg7CnVzZSBFbmNvZGUgcXcoZGVjb2RlIGVuY29kZSk7Cgp1c2UgYmFzZSBxdygKICAgIEtlcm5lbDo6R2VuZXJpY0ludGVyZmFjZTo6T3BlcmF0aW9uOjpDb21tb24KKTsKCm91ciAkT2JqZWN0TWFuYWdlckRpc2FibGVkID0gMTsKCj1oZWFkMSBBRERPTgoKUm9ja2V0Q2hhdAoKCj1oZWFkMSBOQU1FCgpLZXJuZWw6OkdlbmVyaWNJbnRlcmZhY2U6Ok9wZXJhdGlvbjo6Um9ja2V0Q2hhdDo6SW5jb21pbmdDaGF0IC0gR2VuZXJpY0ludGVyZmFjZSBSb2NrZXRDaGF0IEludGVncmF0aW9uLgoKCj1oZWFkMSBTWU5PUFNJUwoKVGhpcyBpcyBhIHdlYiBzZXJ2aWNlIG9wZXJhdGlvbiBmb3IgdHJlYXRpbmcgaW5jb21pbmcgbWVzc2FnZXMgb2YgUm9ja2V0Q2hhdCBvbiBPVFJTCgo9aGVhZDEgUFVCTElDIElOVEVSRkFDRQoKPW92ZXIgNAoKPWN1dAoKPWl0ZW0gbmV3KCkKCnVzdWFsbHksIHlvdSB3YW50IHRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzCmJ5IHVzaW5nIEtlcm5lbDo6R2VuZXJpY0ludGVyZmFjZTo6T3BlcmF0aW9uLT5uZXcoKTsKCj1jdXQKCnN1YiBuZXcgewogICAgbXkgKCAkVHlwZSwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAkU2VsZiA9IHt9OwogICAgYmxlc3MoICRTZWxmLCAkVHlwZSApOwoKICAgICMgY2hlY2sgbmVlZGVkIG9iamVjdHMKICAgIGZvciBteSAkTmVlZGVkIChxdyggRGVidWdnZXJPYmplY3QgV2Vic2VydmljZUlEICkpIHsKICAgICAgICBpZiAoICEkUGFyYW17JE5lZWRlZH0gKSB7CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyAgICAgID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2UgPT4gIkdvdCBubyAkTmVlZGVkISIKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgICRTZWxmLT57JE5lZWRlZH0gPSAkUGFyYW17JE5lZWRlZH07CiAgICB9CgogICAgcmV0dXJuICRTZWxmOwp9Cgo9aXRlbSBSdW4oKQoKUmVjZWl2ZSBkYXRhIGZyb20gUm9ja2V0Q2hhdCB3ZWJzZXJ2aWNlIGFmdGVyIGxpdmVjaGF0IGlzIGNsb3NlZCBhbmQgY3JlYXRlIGEgbmV3IHRpY2tldCBvcgphIG5ldyBhcnRpY2xlIG9uIGFuIGV4aXN0ZW50IHRpY2tldCBpZiB0aGUgdGlja2V0IG51bWJlciBpcyBpbmZvcm1lZCBhcyBUQUcuCgpOb3RlIHRoYXQgaXQncyBlc3NlbnRpYWwgdG8gaGF2ZSBhIHdlbGwgY3VzdG9taXplZCB4c2x0IG1hcHBpbmcgaW4gb3JkZXIgdG8gY29ycmVjdGx5CmNyZWF0ZSBhIG5ldyB0aWNrZXQsIGFjY29yZGluZyB0byB5b3VyIHN5c3RlbSBxdWV1ZXMsIHN0YXRlcyBhbmQgc28gb24uCgpSZXR1cm5zIGEgaGFzaCBsaWtlIHRoaXM6CgogICAgewogICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICBEYXRhICAgID0+IHsKICAgICAgICAgICAgU3VjY2VzcyA9PiAxLAogICAgICAgICAgICBUaWNrZXRzID0+IFsxMjMsIDMyM10gIyBJRCBvZiBUaWNrZXRzIHRoYXQgd2VyZSBjcmVhdGVkIG9yIG1vZGlmaWVkCiAgICAgICAgfSwKICAgIH0KCj1jdXQKCnN1YiBSdW4gewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAkVGlja2V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlRpY2tldCcpOwogICAgbXkgJExheW91dE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKTsKICAgIG15ICREeW5hbWljRmllbGRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkJyk7CiAgICBteSAkRHluYW1pY0ZpZWxkQmFja2VuZE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQ6OkJhY2tlbmQnKTsKICAgIG15ICREeW5hbWljRmllbGRWYWx1ZU9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGRWYWx1ZScpOwoKICAgIGlmICgKICAgICAgICAhJFBhcmFte0RhdGF9LT57VXNlckxvZ2lufQogICAgICAgICYmICEkUGFyYW17RGF0YX0tPntDdXN0b21lclVzZXJMb2dpbn0KICAgICAgICAmJiAhJFBhcmFte0RhdGF9LT57U2Vzc2lvbklEfQogICAgICAgICkKICAgIHsKICAgICAgICByZXR1cm4gJFNlbGYtPlJldHVybkVycm9yKAogICAgICAgICAgICBFcnJvckNvZGUgICAgPT4gJ1JvY2tldENoYXQuTWlzc2luZ1BhcmFtZXRlcicsCiAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAiUm9ja2V0Q2hhdDogVXNlckxvZ2luLCBDdXN0b21lclVzZXJMb2dpbiBvciBTZXNzaW9uSUQgaXMgcmVxdWlyZWQhIiwKICAgICAgICApOwogICAgfQoKICAgIGlmICggJFBhcmFte0RhdGF9LT57VXNlckxvZ2lufSB8fCAkUGFyYW17RGF0YX0tPntDdXN0b21lclVzZXJMb2dpbn0gKSB7CgogICAgICAgIGlmICggISRQYXJhbXtEYXRhfS0+e1Bhc3N3b3JkfSApCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gJFNlbGYtPlJldHVybkVycm9yKAogICAgICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdSb2NrZXRDaGF0Lk1pc3NpbmdQYXJhbWV0ZXInLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJSb2NrZXRDaGF0OiBQYXNzd29yZCBvciBTZXNzaW9uSUQgaXMgcmVxdWlyZWQhIiwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgkKICAgIG15ICggJFVzZXJJRCwgJFVzZXJUeXBlICkgPSAkU2VsZi0+QXV0aCgKICAgICAgICAlUGFyYW0sCiAgICApOwoKICAgIGlmICggISRVc2VySUQgKSB7CiAgICAgICAgcmV0dXJuICRTZWxmLT5SZXR1cm5FcnJvcigKICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdSb2NrZXRDaGF0LkF1dGhGYWlsJywKICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJSb2NrZXRDaGF0OiBVc2VyIGNvdWxkIG5vdCBiZSBhdXRoZW50aWNhdGVkISIsCiAgICAgICAgKTsKICAgIH0KICAgIAogICAgbXkgJURhdGE7CiAgICAkRGF0YXtVc2VyTG9naW59ICAgICAgICAgPSAkUGFyYW17RGF0YX0tPnthZ2VudH0tPnt1c2VybmFtZX0gfHwgJyc7CiAgICAkRGF0YXtDdXN0b21lclVzZXJMb2dpbn0gPSAkUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e2N1c3RvbUZpZWxkc30tPnt1c2VybmFtZX0gfHwgJyc7CiAgICAkRGF0YXtDdXN0b21lclVzZXJOYW1lfSAgPSAkUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e25hbWV9IHx8ICcnOwogICAgJERhdGF7Q3VzdG9tZXJVc2VyRW1haWx9ID0gJFBhcmFte0RhdGF9LT57dmlzaXRvcn0tPntlbWFpbH0gfHwgJyc7CiAgICAkRGF0YXtRdWV1ZX0gID0gJFBhcmFte0RhdGF9LT57dmlzaXRvcn0tPntkZXBhcnRtZW50fSB8fCAnJzsKCiAgICAjIFNlIG5vdmEsIFZlcmlmaWNhIHNlIGV4aXN0ZSBjaGFtYWRvIGFzc29jaWFkbyBhIGVzdGUgY2hhdAogICAgbXkgQFRpY2tldElEczsKICAgIG15ICRNYWluVGlja2V0OwogICAgaWYoJFBhcmFte0RhdGF9LT57Il9pZCJ9KXsKCiAgICAgICAgJFNlbGYtPntDYWNoZVR5cGV9ID0gJ1JvY2tldENoYXRUaWNrZXRSb29tJzsKICAgICAgICAkU2VsZi0+e0NhY2hlVFRMfSAgPSA2MCAqIDYwICogMjQgKiAyMDsKICAgICAgICAkU2VsZi0+e0NhY2hlS2V5fSA9ICdSb2NrZXRDaGF0VGlja2V0Um9vbTo6JyAuICRQYXJhbXtEYXRhfS0+eyJfaWQifTsKCiAgICAgICAgbXkgJENhY2hlID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkNhY2hlJyktPkdldCgKICAgICAgICAgICAgVHlwZSA9PiAkU2VsZi0+e0NhY2hlVHlwZX0sCiAgICAgICAgICAgIEtleSAgPT4gJFNlbGYtPntDYWNoZUtleX0sCiAgICAgICAgKTsKCiAgICAgICAgaWYoJENhY2hlKXsKICAgICAgICAgICAgcHVzaCBAVGlja2V0SURzLCAkQ2FjaGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgQFRpY2tldElEcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFNlYXJjaCgKICAgICAgICAgICAgICAgIFVzZXJJRCA9PiAxLAogICAgICAgICAgICAgICAgUmVzdWx0ID0+ICdBUlJBWScsCiAgICAgICAgICAgICAgICAiRHluYW1pY0ZpZWxkX1JvY2tldENoYXRMaXZlQ2hhdElEIiA9PiB7CiAgICAgICAgICAgICAgICAgICAgRXF1YWxzID0+ICRQYXJhbXtEYXRhfS0+eyJfaWQifQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgICAjIHNldCBjYWNoZQogICAgICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6Q2FjaGUnKS0+U2V0KAogICAgICAgICAgICAgICAgVHlwZSAgPT4gJFNlbGYtPntDYWNoZVR5cGV9LAogICAgICAgICAgICAgICAgVFRMICAgPT4gJFNlbGYtPntDYWNoZVRUTH0sCiAgICAgICAgICAgICAgICBLZXkgICA9PiAkU2VsZi0+e0NhY2hlS2V5fSwKICAgICAgICAgICAgICAgIFZhbHVlID0+ICRUaWNrZXRJRHNbMF0sCiAgICAgICAgICAgICkgaWYgJFRpY2tldElEc1swXTsgIyBDYXNvIG8gQ2FjaGUgdGVuaGEgc2lkbyBhcGFnYWRvLCByZWFwbGljYW1vcyBhcXVpCiAgICAgICAgfQogICAgfQoKICAgIGlmIChAVGlja2V0SURzKXsKICAgICAgICAkTWFpblRpY2tldCA9ICRUaWNrZXRJRHNbMF07CiAgICB9CgogICAgbXkgJFRvcGljID0gJFBhcmFte0RhdGF9LT57dG9waWN9IHx8IAogICAgICAgICRMYXlvdXRPYmplY3QtPntMYW5ndWFnZU9iamVjdH0tPlRyYW5zbGF0ZSgnQ2hhdCBUaWNrZXQnKTsKCiAgICAjIFZlcmlmaWNhIHNlIMOpIE1lbnNhZ2VtIG5vdmEgb3UgZW5jZXJyYW1lbnRvIGRvIENoYXQKICAgIGlmKCRQYXJhbXtEYXRhfS0+e3R5cGV9IGVxICdNZXNzYWdlJyl7CiAgICAgICAgaWYgKEBUaWNrZXRJRHMpewogICAgICAgICAgICAjIHJldHVybiByZXN1bHQKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICAgICAgICAgIERhdGEgICAgPT4gewogICAgICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICAgICAgICAgICAgICBSZXR1cm5NZXNzYWdlID0+ICJOb3RoaW5nIHVwZGF0ZWQuIFRpY2tldCBmb3IgdGhpcyBjaGF0IHdhcyBhbHJlYWR5IGNyZWF0ZWQiLAogICAgICAgICAgICAgICAgICAgIFRpY2tldHMgPT4gXEBUaWNrZXRJRHMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgICMgU2UgbsOjbyBlbmNvbnRyb3UgY2hhbWFkbyBhc3NvY2lhZG8sIHNpZ25pZmljYSBxdWUgw6kgYSBwcmltZWlyYSBtZW5zYWdlbSBkbyBDaGF0CiAgICAgICAgIyBDcmlhIGVudMOjbyB1bSBjaGFtYWRvCiAgICAgICAgbXkgJEN1c3RvbWVyVXNlciA9ICRQYXJhbXtEYXRhfS0+e3Zpc2l0b3J9LT57Y3VzdG9tRmllbGRzfS0+e3VzZXJuYW1lfSB8fCAncm9ja2V0Y2hhdCc7CiAgICAgICAgbXkgQEN1c3RvbWVySURzID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkN1c3RvbWVyVXNlcicpLT5DdXN0b21lcklEcygKICAgICAgICAgICAgVXNlciA9PiAkQ3VzdG9tZXJVc2VyLAogICAgICAgICk7CiAgICAgICAgbXkgJEN1c3RvbWVyQ29tcGFueSA9ICRDdXN0b21lcklEc1swXSB8fCAkQ3VzdG9tZXJVc2VyOwogICAgICAgIG15ICRUaWNrZXRJRCA9ICRUaWNrZXRPYmplY3QtPlRpY2tldENyZWF0ZSgKICAgICAgICAgICAgVGl0bGUgICAgICAgID0+ICRUb3BpYywKICAgICAgICAgICAgQ3VzdG9tZXJVc2VyID0+ICRDdXN0b21lclVzZXIsCiAgICAgICAgICAgIEN1c3RvbWVySUQgICA9PiAkQ3VzdG9tZXJDb21wYW55LAogICAgICAgICAgICAleyRQYXJhbXtEYXRhfS0+e05ld0NoYXR9fQogICAgICAgICk7CiAgICAgICAgIyBzZXQgY2FjaGUKICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6Q2FjaGUnKS0+U2V0KAogICAgICAgICAgICBUeXBlICA9PiAkU2VsZi0+e0NhY2hlVHlwZX0sCiAgICAgICAgICAgIFRUTCAgID0+ICRTZWxmLT57Q2FjaGVUVEx9LAogICAgICAgICAgICBLZXkgICA9PiAkU2VsZi0+e0NhY2hlS2V5fSwKICAgICAgICAgICAgVmFsdWUgPT4gJFRpY2tldElELAogICAgICAgICkgaWYgJFRpY2tldElEOwoKICAgICAgICAkTWFpblRpY2tldCA9ICRUaWNrZXRJRDsKCiAgICAgICAgIyBOb3RpZmllcyBSb2NrZXQuQ2hhdCBzZXNzaW9uCiAgICAgICAgaWYoJFBhcmFte0RhdGF9LT57TmV3VGlja2V0Tm90aWZpY2F0aW9ufQogICAgICAgICAgICAmJiAkUGFyYW17RGF0YX0tPntOZXdUaWNrZXROb3RpZmljYXRpb259LT57Um9ja2V0Q2hhdEFQSVVybH0KICAgICAgICAgICAgJiYgJFBhcmFte0RhdGF9LT57TmV3VGlja2V0Tm90aWZpY2F0aW9ufS0+e01lc3NhZ2V9CiAgICAgICAgICAgICYmICRQYXJhbXtEYXRhfS0+e19pZH0KICAgICAgICAgICAgJiYgJFBhcmFte0RhdGF9LT57dmlzaXRvcn0KICAgICAgICAgICAgJiYgJFBhcmFte0RhdGF9LT57dmlzaXRvcn0tPnt0b2tlbn0KICAgICAgICAgICAgKQogICAgICAgIHsKICAgICAgICAgICAgdXNlIExXUDsKICAgICAgICAgICAgdXNlIEhUVFA6OlJlcXVlc3Q7CiAgICAgICAgICAgIHVzZSBFbmNvZGU7CiAgICAgICAgICAgIG15ICRKU09OT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkpTT04nKTsKCiAgICAgICAgICAgIG15ICVUaWNrZXQgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRHZXQoVGlja2V0SUQgPT4gJFRpY2tldElELCBVc2VySUQgPT4gMSk7CiAgICAgICAgICAgIG15ICRUTiA9ICRUaWNrZXR7VGlja2V0TnVtYmVyfTsKCiAgICAgICAgICAgIG15ICRqc29uPSd7CgkidG9rZW4iOiAiJy4kUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e3Rva2VufS4nIiwgCgkicmlkIjogIicuJFBhcmFte0RhdGF9LT57X2lkfS4nIiwgCgkibXNnIjogIicuc3ByaW50ZihlbmNvZGUoJ1VURi04JywkUGFyYW17RGF0YX0tPntOZXdUaWNrZXROb3RpZmljYXRpb259LT57TWVzc2FnZX0pLCRUTiwkVE4sJFROLCRUTiwkVE4pLiciCn0nOwogICAgICAgICAgICBteSAkdXJsID0gJFBhcmFte0RhdGF9LT57TmV3VGlja2V0Tm90aWZpY2F0aW9ufS0+e1JvY2tldENoYXRBUElVcmx9OwogICAgICAgICAgICBteSAkcmVxID0gSFRUUDo6UmVxdWVzdC0+bmV3KFBPU1QgPT4gJHVybCk7CiAgICAgICAgICAgICRyZXEtPmNvbnRlbnRfdHlwZSgnYXBwbGljYXRpb24vanNvbicpOwogICAgICAgICAgICAkcmVxLT5jb250ZW50KCRqc29uKTsKICAgICAgICAgICAgbXkgJHVhID0gTFdQOjpVc2VyQWdlbnQtPm5ldzsgIyBZb3UgbWlnaHQgd2FudCBzb21lIG9wdGlvbnMgaGVyZQogICAgICAgICAgICAjIERpc2FibGUgQ2VydGlmaWNhdGUgdmVyaWZpY2F0aW9uCiAgICAgICAgICAgICR1YS0+c3NsX29wdHModmVyaWZ5X2hvc3RuYW1lID0+IDApOwogICAgICAgICAgICAkdWEtPnNzbF9vcHRzKFNTTF92ZXJpZnlfbW9kZSA9PiAweDAwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG15ICRyZXMgPSAkdWEtPnJlcXVlc3QoJHJlcSk7CiAgICAgICAgICAgIG15ICRSZXN1bHQgPSAkSlNPTk9iamVjdC0+RGVjb2RlKERhdGE9PiRyZXMtPmRlY29kZWRfY29udGVudCk7CiAgICAgICAgICAgIG15ICRTdWNjZXNzID0gJFJlc3VsdC0+e3N1Y2Nlc3N9OwogICAgICAgIH0KCiAgICAgICAgbXkgJER5bmFtaWNGaWVsZCA9ICREeW5hbWljRmllbGRPYmplY3QtPkR5bmFtaWNGaWVsZEdldCgKICAgIAkJTmFtZSA9PiAiUm9ja2V0Q2hhdExpdmVDaGF0SUQiLAoJICAgICk7CiAgICAgICAgbXkgJFN1Y2Nlc3MgPSAkRHluYW1pY0ZpZWxkVmFsdWVPYmplY3QtPlZhbHVlU2V0KAogICAgICAgICAgICBGaWVsZElEID0+ICREeW5hbWljRmllbGQtPntJRH0sCiAgICAgICAgICAgIE9iamVjdElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVmFsdWUgPT4gWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFZhbHVlVGV4dCA9PiAkUGFyYW17RGF0YX0tPnsiX2lkIn0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgVXNlcklEID0+IDEKICAgICAgICApOwogICAgICAgIHB1c2ggQFRpY2tldElEcywgJFRpY2tldElEOwoKICAgICAgICAjIEVudmlhciBtZW5zYWdlbSBwYXJhIG8gdXN1YXJpbwoKICAgICAgICAjIFNhaXIgZG8gZmx1eG8KICAgICAgICAjIHJldHVybiByZXN1bHQKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBTdWNjZXNzID0+IDEsCiAgICAgICAgICAgIERhdGEgICAgPT4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAxLAogICAgICAgICAgICAgICAgUmV0dXJuTWVzc2FnZSA9PiAiVGlja2V0IENyZWF0ZWQhIiwKICAgICAgICAgICAgICAgIFRpY2tldHMgPT4gXEBUaWNrZXRJRHMKICAgICAgICAgICAgfSwKICAgICAgICB9OwoKICAgIH0gZWxzaWYoJFBhcmFte0RhdGF9LT57dHlwZX0gZXEgJ0xpdmVjaGF0U2Vzc2lvbicpewogICAgICAgICMgU2Ugw6kgZW5jZXJyYW1lbnRvIGRvIENoYXQKICAgICAgICAjIFZlcmlmaWNhIG5hcyB0YWdzIHNlIGhvdXZlIGFsZ3VtIG7Dum1lcm8gZGUgY2hhbWFkbyBpbmZvcm1hZG8gY29tICIjIgogICAgICAgIG15IEBUYWdzID0gKCk7CiAgICAgICAgaWYoJFBhcmFte0RhdGF9LT57dGFnc30pewogICAgICAgICAgICAjIFF1YW5kbyBow6EgYXBlbmFzIHVtYSB0YWcsIGVsYSB2ZW0gY29tbyBzdHJpbmcgZSBuw6NvIGNvbW8gYXJyYXksIGVudMOjbyB0ZW1vcyBxdWUgY29udmVydGVyCiAgICAgICAgICAgIGlmKElzU3RyaW5nKCRQYXJhbXtEYXRhfS0+e3RhZ3N9KSl7CiAgICAgICAgICAgICAgICBwdXNoIEBUYWdzLCRQYXJhbXtEYXRhfS0+e3RhZ3N9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgKEBUYWdzKSA9IEB7JFBhcmFte0RhdGF9LT57dGFnc319OyAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIFBhcmEgY2FkYSB0YWcsIHZlcmlmaWNhIHNlIHBvc3N1aSBvIHBhZHLDo28gIzk5OTk5OS4gU2Ugc2ltLCBwcm9jdXJhIHBvciB1bSB0aWNrZXRpZAogICAgICAgIFRBRzoKICAgICAgICBmb3IgbXkgJFRhZyAoQFRhZ3MpewogICAgICAgICAgICBuZXh0IFRBRyBpZiAkVGFnICF+IG0vXiMvOwogICAgICAgICAgICBteSAkVGlja2V0SUQ7CiAgICAgICAgICAgICRUYWcgPX4gcy8oIykvLzsKICAgICAgICAgICAgJFRpY2tldElEID0gJFRpY2tldE9iamVjdC0+VGlja2V0SURMb29rdXAoCiAgICAgICAgICAgICAgICBUaWNrZXROdW1iZXIgPT4gJFRhZywKICAgICAgICAgICAgICAgIFVzZXJJRCAgICAgICA9PiAxLAogICAgICAgICAgICApOwogICAgICAgICAgICBwdXNoIEBUaWNrZXRJRHMsICRUaWNrZXRJRCBpZiAkVGlja2V0SUQ7CiAgICAgICAgfQoKICAgICAgICAjIFByZXBhcmEgaHRtbCBhIHNlciBjcmlhZG8gY29tIGJhc2Ugbm9zICJtZXNzYWdlcyIKICAgICAgICBteSBATWVzc2FnZXMgPSAoKTsKICAgICAgICBpZigkUGFyYW17RGF0YX0tPnttZXNzYWdlc30gJiYgSXNBcnJheVJlZldpdGhEYXRhKCRQYXJhbXtEYXRhfS0+e21lc3NhZ2VzfSkpewogICAgICAgICAgICAoQE1lc3NhZ2VzKSA9IEB7JFBhcmFte0RhdGF9LT57bWVzc2FnZXN9fTsKICAgICAgICB9IGVsc2lmICgkUGFyYW17RGF0YX0tPnttZXNzYWdlc30pIHsKICAgICAgICAgICAgcHVzaCBATWVzc2FnZXMsICRQYXJhbXtEYXRhfS0+e21lc3NhZ2VzfTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgbXkgJExhc3REYXRlPSAgICcnOwogICAgICAgIG15ICRMYXN0QXV0aG9yPScnOwoKICAgICAgICBteSAkQWdlbnRHcmF2YXRhciA9IG1kNV9oZXgoJFBhcmFte0RhdGF9LT57YWdlbnR9LT57ZW1haWx9KSB8fCcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCc7CiAgICAgICAgbXkgJEN1c3RvbWVyR3JhdmF0YXIgPSBtZDVfaGV4KCRQYXJhbXtEYXRhfS0+e3Zpc2l0b3J9LT57ZW1haWx9KSB8fCcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCc7CiAgICAgICAgCiAgICAgICAgbXkgJEFnZW50TmFtZSA9ICRQYXJhbXtEYXRhfS0+e2FnZW50fS0+e25hbWV9IHx8ICRQYXJhbXtEYXRhfS0+e2FnZW50fS0+e3VzZXJuYW1lfSB8fCAkTGF5b3V0T2JqZWN0LT57TGFuZ3VhZ2VPYmplY3R9LT5UcmFuc2xhdGUoJ0FnZW50Jyk7CiAgICAgICAgbXkgJEN1c3RvbWVyTmFtZSA9ICRQYXJhbXtEYXRhfS0+e3Zpc2l0b3J9LT57bmFtZX0gfHwgJFBhcmFte0RhdGF9LT57dmlzaXRvcn0tPnt1c2VybmFtZX0gfHwgJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCdDdXN0b21lcicpOwogICAgICAgIAogICAgICAgIGZvciBteSAkbWVzc2FnZSAoQE1lc3NhZ2VzKXsKICAgICAgICAgICAgIyBPYnM6IHRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlIGlzIGFsd2F5cyBzZW5kIGluIFVURgogICAgICAgICAgICBteSAkdGltZSA9IHN0cjJ0aW1lKCRtZXNzYWdlLT57dHN9KTsKICAgICAgICAgICAgIyB0aGUgZm9sbG93aW5nIGZpZWxkIGlzIHNldCBieSBqYXZhc2NyaXB0IGFzIGEgY3VzdG9tZmllbGQgb24gUm9ja2V0Q2hhdC4gV2UgbmVlZCB0aGF0IHRvIGNhbGN1bGF0ZQogICAgICAgICAgICAjIGN1c3RvbWVyIHRpbWUgb2YgdGhlIG1lc3NhZ2UKICAgICAgICAgICAgbXkgJHR6ID0gJFBhcmFte0RhdGF9LT57dmlzaXRvcn0tPntjdXN0b21GaWVsZHN9LT57dGltZXpvbmV9IHx8IDA7IAogICAgICAgICAgICAkdGltZSArPSAoJHR6KjYwKTsKICAgICAgICAgICAgbXkgJGR0TG9uZyA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaW1lJyktPlN5c3RlbVRpbWUyVGltZVN0YW1wKAogICAgICAgICAgICAgICAgU3lzdGVtVGltZSA9PiAkdGltZSwKICAgICAgICAgICAgICAgIFR5cGUgICAgICAgPT4gJ0xvbmcnLAogICAgICAgICAgICApOwogICAgICAgICAgICBteSAkZHRTaG9ydCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaW1lJyktPlN5c3RlbVRpbWUyVGltZVN0YW1wKAogICAgICAgICAgICAgICAgU3lzdGVtVGltZSA9PiAkdGltZSwKICAgICAgICAgICAgICAgIFR5cGUgICAgICAgPT4gJ1Nob3J0JywKICAgICAgICAgICAgKTsKICAgICAgICAgICAgbXkgJERhdGUgPSAkTGF5b3V0T2JqZWN0LT57TGFuZ3VhZ2VPYmplY3R9LT5Gb3JtYXRUaW1lU3RyaW5nKCAkZHRMb25nLCAnRGF0ZUZvcm1hdFNob3J0JyApOwoKICAgICAgICAgICAgIyMjIExlZnQgV2lkZ2V0IChBdmF0YXIgbWF5YmUpCiAgICAgICAgICAgICMgVmVyaWZpZXMgaWYgbmVlZCB0byBwcmludCBhdXRob3IKICAgICAgICAgICAgaWYoJG1lc3NhZ2UtPnt1c2VybmFtZX0gbmUgJExhc3RBdXRob3IpewogICAgICAgICAgICAgICAgJExhc3RBdXRob3IgPSAkbWVzc2FnZS0+e3VzZXJuYW1lfTsKICAgICAgICAgICAgICAgIG15ICRBdmF0YXI7CiAgICAgICAgICAgICAgICBteSAkTmFtZTsKICAgICAgICAgICAgICAgIGlmICgkbWVzc2FnZS0+e3VzZXJuYW1lfSA9fiBtL15ndWVzdC8pewogICAgICAgICAgICAgICAgICAgICROYW1lICAgPSAkQ3VzdG9tZXJOYW1lOwogICAgICAgICAgICAgICAgICAgICRBdmF0YXIgPSAkQ3VzdG9tZXJHcmF2YXRhcjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJE5hbWUgICA9ICRBZ2VudE5hbWU7CiAgICAgICAgICAgICAgICAgICAgJEF2YXRhciA9ICRBZ2VudEdyYXZhdGFyOyAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIyMjIFByaW50IEF1dGhvcgogICAgICAgICAgICAgICAgJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpPdXRwdXQ6OkhUTUw6OkxheW91dCcpLT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdBdXRob3InLAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBMZWZ0ICAgPT4gIjxpbWcgc3JjPVwiaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci8kQXZhdGFyP3M9MzZcIiBjbGFzcz1cIlJvY2tldENoYXRBdmF0YXJcIi8+IiwKICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yID0+ICROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBUaW1lICAgPT4gJGR0U2hvcnQsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKS0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdNZXNzYWdlJywKICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPT4gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkhUTUxVdGlscycpLT5Ub0hUTUwoCiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyA9PiAkbWVzc2FnZS0+e21zZ30sCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKTsKCiAgICAgICAgfQogICAgCiAgICAgICAgbXkgJENoYXRIVE1MID0gJExheW91dE9iamVjdC0+T3V0cHV0KAogICAgICAgICAgICBUZW1wbGF0ZUZpbGUgPT4gJ1JvY2tldENoYXQvQ2hhdFRlbXBsYXRlJwogICAgICAgICk7CiAgICAgICAgCiAgICAgICAgZm9yIG15ICRUaWNrZXRJRChAVGlja2V0SURzKXsKICAgICAgICAgICAgbXkgJEFydGljbGVJRCA9ICRUaWNrZXRPYmplY3QtPkFydGljbGVDcmVhdGUoCiAgICAgICAgICAgICAgICAjTm9BZ2VudE5vdGlmeSAgPT4gJEFydGljbGUtPntOb0FnZW50Tm90aWZ5fSAgfHwgMCwKICAgICAgICAgICAgICAgIFRpY2tldElEICAgICAgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIEFydGljbGVUeXBlICAgID0+ICd3ZWJyZXF1ZXN0JywKICAgICAgICAgICAgICAgIFNlbmRlclR5cGUgICAgID0+ICdjdXN0b21lcicsCiAgICAgICAgICAgICAgICBGcm9tICAgICAgICAgICA9PiAkUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e25hbWV9IHx8ICdDaGF0IEd1ZXN0JywKICAgICAgICAgICAgICAgIFRvICAgICAgICAgICAgID0+ICRQYXJhbXtEYXRhfS0+e2FnZW50fS0+e25hbWV9IHx8ICdBZ2VudCcsCiAgICAgICAgICAgICAgICBTdWJqZWN0ICAgICAgICA9PiAkVG9waWMsCiAgICAgICAgICAgICAgICBCb2R5ICAgICAgICAgICA9PiAkQ2hhdEhUTUwsCiAgICAgICAgICAgICAgICBNaW1lVHlwZSAgICAgICA9PiAndGV4dC9odG1sJywKICAgICAgICAgICAgICAgIENoYXJzZXQgICAgICAgID0+ICd1dGYtOCcsCiAgICAgICAgICAgICAgICBVc2VySUQgICAgICAgICA9PiAnMScsCiAgICAgICAgICAgICAgICBIaXN0b3J5VHlwZSAgICA9PiAnQWRkTm90ZScsCiAgICAgICAgICAgICAgICBIaXN0b3J5Q29tbWVudCA9PiAnJSVDaGF0QWRkZWQlJScsCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICAjIFVwZGF0ZSB0aGUgdGlja2V0IHRoYXQgd2FzIGNyZWF0ZWQgYnkgUm9ja2V0LkNoYXQKICAgICAgICBteSAoICRVc2VySUQsICRVc2VyVHlwZSApID0gJFNlbGYtPkF1dGgoJVBhcmFtKTsKICAgICAgICBteSAkVXBkYXRlID0gJFBhcmFte0RhdGF9LT57Q2hhdENsb3NlZH07CiAgICAgICAgJFNlbGYtPl9UaWNrZXRVcGRhdGUoCgkJCVRpY2tldElEICAgICAgICAgPT4gJE1haW5UaWNrZXQsCgkJCVRpY2tldCAgICAgICAgICAgPT4gJFVwZGF0ZSwKCQkJVXNlcklEICAgICAgICAgICA9PiAkVXNlcklELAoJCQlVc2VyVHlwZSAgICAgICAgID0+ICRVc2VyVHlwZSwKCQkpOwogICAgfQogICAgbXkgJExvZ0Vycm9yID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkxvZycpLT5HZXRMb2dFbnRyeSgKICAgICAgICBUeXBlID0+ICdlcnJvcicsICMgZXJyb3J8aW5mb3xub3RpY2UKICAgICAgICBXaGF0ID0+ICdNZXNzYWdlJywgIyBNZXNzYWdlfFRyYWNlYmFjawogICAgKTsKICAgIAogICAgaWYoJExvZ0Vycm9yKXsKICAgICAgICAkRGF0YXtFcnJvcn09JExvZ0Vycm9yOwogICAgfQoKICAgICMgcmV0dXJuIHJlc3VsdAogICAgcmV0dXJuIHsKICAgICAgICBTdWNjZXNzID0+IDEsCiAgICAgICAgRGF0YSAgICA9PiB7CiAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICAgICAgUmV0dXJuTWVzc2FnZSA9PiAiQ2hhdCBjbG9zZWQuIFRpY2tldHMgdXBkYXRlZCEiLAogICAgICAgICAgICBUaWNrZXRzID0+IFxAVGlja2V0SURzCiAgICAgICAgfSwKICAgIH07Cn0KCgoKPWl0ZW0gX0NoZWNrVXBkYXRlUGVybWlzc2lvbnMoKQpjaGVjayBpZiB1c2VyIGhhcyBwZXJtaXNzaW9ucyB0byB1cGRhdGUgdGlja2V0IGF0dHJpYnV0ZXMuCiAgICBteSAkUmVzcG9uc2UgPSAkT3BlcmF0aW9uT2JqZWN0LT5fQ2hlY2tVcGRhdGVQZXJtaXNzaW9ucygKICAgICAgICBUaWNrZXRJRCAgICAgPT4gMTIzCiAgICAgICAgVGlja2V0ICAgICAgID0+ICRUaWNrZXQsICAgICAgICAgICAgICAgICAgIyBhbGwgdGlja2V0IHBhcmFtZXRlcnMKICAgICAgICBBcnRpY2xlICAgICAgPT4gJFRpY2tldCwgICAgICAgICAgICAgICAgICAjIGFsbCBhdHRhY2htZW50IHBhcmFtZXRlcnMKICAgICAgICBEeW5hbWljRmllbGQgPT4gJFRpY2tldCwgICAgICAgICAgICAgICAgICAjIGFsbCBkeW5hbWljIGZpZWxkIHBhcmFtZXRlcnMKICAgICAgICBBdHRhY2htZW50ICAgPT4gJFRpY2tldCwgICAgICAgICAgICAgICAgICAjIGFsbCBhdHRhY2htZW50IHBhcmFtZXRlcnMKICAgICAgICBVc2VySUQgICAgICAgPT4gMTIzLAogICAgKTsKICAgIHJldHVybnM6CiAgICAkUmVzcG9uc2UgPSB7CiAgICAgICAgU3VjY2VzcyA9PiAxLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGlmIGV2ZXJ5dGhpbmcgaXMgT0sKICAgIH0KICAgICRSZXNwb25zZSA9IHsKICAgICAgICBTdWNjZXNzICAgICAgPT4gMCwKICAgICAgICBFcnJvckNvZGUgICAgPT4gImZ1bmN0aW9uLmVycm9yIiwgICAgICAgICAgICMgaWYgZXJyb3IKICAgICAgICBFcnJvck1lc3NhZ2UgPT4gIkVycm9yIGRlc2NyaXB0aW9uIgogICAgfQo9Y3V0CgpzdWIgX0NoZWNrVXBkYXRlUGVybWlzc2lvbnMgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAkVGlja2V0SUQgICAgICAgICA9ICRQYXJhbXtUaWNrZXRJRH07CiAgICBteSAkVGlja2V0ICAgICAgICAgICA9ICRQYXJhbXtUaWNrZXR9OwogICAgbXkgJEFydGljbGUgICAgICAgICAgPSAkUGFyYW17QXJ0aWNsZX07CiAgICBteSAkRHluYW1pY0ZpZWxkTGlzdCA9ICRQYXJhbXtEeW5hbWljRmllbGRMaXN0fTsKICAgIG15ICRBdHRhY2htZW50TGlzdCAgID0gJFBhcmFte0F0dGFjaG1lbnRMaXN0fTsKCiAgICAjIGdldCB0aWNrZXQgb2JqZWN0CiAgICBteSAkVGlja2V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlRpY2tldCcpOwoKICAgICMgY2hlY2sgQXJ0aWNsZSBwZXJtaXNzaW9ucwogICAgaWYgKCBJc0hhc2hSZWZXaXRoRGF0YSgkQXJ0aWNsZSkgKSB7CiAgICAgICAgbXkgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFBlcm1pc3Npb24oCiAgICAgICAgICAgIFR5cGUgICAgID0+ICdub3RlJywKICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICApOwogICAgICAgIGlmICggISRBY2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBFcnJvckNvZGUgICAgPT4gJ1RpY2tldFVwZGF0ZU9yQ3JlYXRlLkFjY2Vzc0RlbmllZCcsCiAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2UgPT4gIlRpY2tldFVwZGF0ZU9yQ3JlYXRlOiBEb2VzIG5vdCBoYXZlIHBlcm1pc3Npb25zIHRvIGNyZWF0ZSBuZXcgYXJ0aWNsZXMhIiwKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9CgogICAgIyBjaGVjayBkeW5hbWljIGZpZWxkIHBlcm1pc3Npb25zCiAgICBpZiAoIElzQXJyYXlSZWZXaXRoRGF0YSgkRHluYW1pY0ZpZWxkTGlzdCkgKSB7CiAgICAgICAgbXkgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFBlcm1pc3Npb24oCiAgICAgICAgICAgIFR5cGUgICAgID0+ICdydycsCiAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgKTsKICAgICAgICBpZiAoICEkQWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdUaWNrZXRVcGRhdGVPckNyZWF0ZS5BY2Nlc3NEZW5pZWQnLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJUaWNrZXRVcGRhdGVPckNyZWF0ZTogRG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9ucyB0byB1cGRhdGUgZHluYW1pYyBmaWVsZHMhIiwKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9CgogICAgIyBjaGVjayBxdWV1ZSBwZXJtaXNzaW9ucwogICAgaWYgKCAkVGlja2V0LT57UXVldWV9IHx8ICRUaWNrZXQtPntRdWV1ZUlEfSApIHsKICAgICAgICBteSAkQWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UGVybWlzc2lvbigKICAgICAgICAgICAgVHlwZSAgICAgPT4gJ21vdmUnLAogICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICk7CiAgICAgICAgaWYgKCAhJEFjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIEVycm9yQ29kZSAgICA9PiAnVGlja2V0VXBkYXRlT3JDcmVhdGUuQWNjZXNzRGVuaWVkJywKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAiVGlja2V0VXBkYXRlT3JDcmVhdGU6IERvZXMgbm90IGhhdmUgcGVybWlzc2lvbnMgdG8gdXBkYXRlIHF1ZXVlISIsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgICMgY2hlY2sgb3duZXIgcGVybWlzc2lvbnMKICAgIGlmICggJFRpY2tldC0+e093bmVyfSB8fCAkVGlja2V0LT57T3duZXJJRH0gKSB7CiAgICAgICAgbXkgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFBlcm1pc3Npb24oCiAgICAgICAgICAgIFR5cGUgICAgID0+ICdvd25lcicsCiAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgKTsKICAgICAgICBpZiAoICEkQWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdUaWNrZXRVcGRhdGVPckNyZWF0ZS5BY2Nlc3NEZW5pZWQnLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJUaWNrZXRVcGRhdGVPckNyZWF0ZTogRG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9ucyB0byB1cGRhdGUgb3duZXIhIiwKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9CgogICAgIyBjaGVjayByZXNwb25zaWJsZSBwZXJtaXNzaW9ucwogICAgaWYgKCAkVGlja2V0LT57UmVzcG9uc2libGV9IHx8ICRUaWNrZXQtPntSZXNwb25zaWJsZUlEfSApIHsKICAgICAgICBteSAkQWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UGVybWlzc2lvbigKICAgICAgICAgICAgVHlwZSAgICAgPT4gJ3Jlc3BvbnNpYmxlJywKICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICApOwogICAgICAgIGlmICggISRBY2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBFcnJvckNvZGUgICAgPT4gJ1RpY2tldFVwZGF0ZU9yQ3JlYXRlLkFjY2Vzc0RlbmllZCcsCiAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2UgPT4gIlRpY2tldFVwZGF0ZU9yQ3JlYXRlOiBEb2VzIG5vdCBoYXZlIHBlcm1pc3Npb25zIHRvIHVwZGF0ZSByZXNwb25zaWJlISIsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgICMgY2hlY2sgcHJpb3JpdHkgcGVybWlzc2lvbnMKICAgIGlmICggJFRpY2tldC0+e1ByaW9yaXR5fSB8fCAkVGlja2V0LT57UHJpb3JpdHlJRH0gKSB7CiAgICAgICAgbXkgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFBlcm1pc3Npb24oCiAgICAgICAgICAgIFR5cGUgICAgID0+ICdwcmlvcml0eScsCiAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgKTsKICAgICAgICBpZiAoICEkQWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdUaWNrZXRVcGRhdGVPckNyZWF0ZS5BY2Nlc3NEZW5pZWQnLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJUaWNrZXRVcGRhdGVPckNyZWF0ZTogRG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9ucyB0byB1cGRhdGUgcHJpb3JpdHkhIiwKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9CgogICAgIyBjaGVjayBzdGF0ZSBwZXJtaXNzaW9ucwogICAgaWYgKCAkVGlja2V0LT57U3RhdGV9IHx8ICRUaWNrZXQtPntTdGF0ZUlEfSApIHsKCiAgICAgICAgIyBnZXQgU3RhdGUgRGF0YQogICAgICAgIG15ICVTdGF0ZURhdGE7CiAgICAgICAgbXkgJFN0YXRlSUQ7CgogICAgICAgICMgZ2V0IHN0YXRlIG9iamVjdAogICAgICAgIG15ICRTdGF0ZU9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpTdGF0ZScpOwoKICAgICAgICBpZiAoICRUaWNrZXQtPntTdGF0ZUlEfSApIHsKICAgICAgICAgICAgJFN0YXRlSUQgPSAkVGlja2V0LT57U3RhdGVJRH07CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkU3RhdGVJRCA9ICRTdGF0ZU9iamVjdC0+U3RhdGVMb29rdXAoCiAgICAgICAgICAgICAgICBTdGF0ZSA9PiAkVGlja2V0LT57U3RhdGV9LAogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgJVN0YXRlRGF0YSA9ICRTdGF0ZU9iamVjdC0+U3RhdGVHZXQoCiAgICAgICAgICAgIElEID0+ICRTdGF0ZUlELAogICAgICAgICk7CgogICAgICAgIG15ICRBY2Nlc3MgPSAxOwoKICAgICAgICBpZiAoICRTdGF0ZURhdGF7VHlwZU5hbWV9ID1+IC9eY2xvc2UvaSApIHsKICAgICAgICAgICAgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFBlcm1pc3Npb24oCiAgICAgICAgICAgICAgICBUeXBlICAgICA9PiAnY2xvc2UnLAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICAjIHNldCBwZW5kaW5nIHRpbWUKICAgICAgICBlbHNpZiAoICRTdGF0ZURhdGF7VHlwZU5hbWV9ID1+IC9ecGVuZGluZy9pICkgewogICAgICAgICAgICAkQWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UGVybWlzc2lvbigKICAgICAgICAgICAgICAgIFR5cGUgICAgID0+ICdjbG9zZScsCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgaWYgKCAhJEFjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIEVycm9yQ29kZSAgICA9PiAnVGlja2V0VXBkYXRlT3JDcmVhdGUuQWNjZXNzRGVuaWVkJywKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAiVGlja2V0VXBkYXRlT3JDcmVhdGU6IERvZXMgbm90IGhhdmUgcGVybWlzc2lvbnMgdG8gdXBkYXRlIHN0YXRlISIsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiB7CiAgICAgICAgU3VjY2VzcyA9PiAxLAogICAgICAgIH0KfQoKCj1pdGVtIF9UaWNrZXRVcGRhdGUoKQp1cGRhdGVzIGEgdGlja2V0IGFuZCBjcmVhdGVzIGFuIGFydGljbGUgYW5kIHNldHMgZHluYW1pYyBmaWVsZHMgYW5kIGF0dGFjaG1lbnRzIGlmIHNwZWNpZmllZC4KICAgIG15ICRSZXNwb25zZSA9ICRPcGVyYXRpb25PYmplY3QtPl9UaWNrZXRVcGRhdGUoCiAgICAgICAgVGlja2V0SUQgICAgID0+IDEyMwogICAgICAgIFRpY2tldCAgICAgICA9PiAkVGlja2V0LCAgICAgICAgICAgICAgICAgICMgYWxsIHRpY2tldCBwYXJhbWV0ZXJzCiAgICAgICAgQXJ0aWNsZSAgICAgID0+ICRBcnRpY2xlLCAgICAgICAgICAgICAgICAgIyBhbGwgYXR0YWNobWVudCBwYXJhbWV0ZXJzCiAgICAgICAgRHluYW1pY0ZpZWxkID0+ICREeW5hbWljRmllbGQsICAgICAgICAgICAgIyBhbGwgZHluYW1pYyBmaWVsZCBwYXJhbWV0ZXJzCiAgICAgICAgQXR0YWNobWVudCAgID0+ICRBdHRhY2htZW50LCAgICAgICAgICAgICAgIyBhbGwgYXR0YWNobWVudCBwYXJhbWV0ZXJzCiAgICAgICAgVXNlcklEICAgICAgID0+IDEyMywKICAgICAgICBVc2VyVHlwZSAgICAgPT4gJ0FnZW50JyAgICAgICAgICAgICAgICAgICAjIHx8ICdDdXN0b21lcgogICAgKTsKICAgIHJldHVybnM6CiAgICAkUmVzcG9uc2UgPSB7CiAgICAgICAgU3VjY2VzcyA9PiAxLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGlmIGV2ZXJ5dGhpbmcgaXMgT0sKICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgVGlja2V0SUQgICAgID0+IDEyMywKICAgICAgICAgICAgVGlja2V0TnVtYmVyID0+ICdUTjM0MjIzMzInLAogICAgICAgICAgICBBcnRpY2xlSUQgICAgPT4gMTIzLCAgICAgICAgICAgICAgICAgICAgIyBpZiBuZXcgYXJ0aWNsZSB3YXMgY3JlYXRlZAogICAgICAgIH0KICAgIH0KICAgICRSZXNwb25zZSA9IHsKICAgICAgICBTdWNjZXNzICAgICAgPT4gMCwgICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiB1bmV4cGVjdGVkIGVycm9yCiAgICAgICAgRXJyb3JNZXNzYWdlID0+ICIkUGFyYW17RXJyb3JDb2RlfTogJFBhcmFte0Vycm9yTWVzc2FnZX0iLAogICAgfQo9Y3V0CgpzdWIgX1RpY2tldFVwZGF0ZSB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIG15ICRUaWNrZXRJRCAgICAgICAgID0gJFBhcmFte1RpY2tldElEfTsKICAgIG15ICRUaWNrZXQgICAgICAgICAgID0gJFBhcmFte1RpY2tldH07CiAgICBteSAkQXJ0aWNsZSAgICAgICAgICA9ICRQYXJhbXtBcnRpY2xlfTsKICAgIG15ICREeW5hbWljRmllbGRMaXN0ID0gJFBhcmFte0R5bmFtaWNGaWVsZExpc3R9OwogICAgbXkgJEF0dGFjaG1lbnRMaXN0ICAgPSAkUGFyYW17QXR0YWNobWVudExpc3R9OwoKICAgIG15ICRBY2Nlc3MgPSAkU2VsZi0+X0NoZWNrVXBkYXRlUGVybWlzc2lvbnMoJVBhcmFtKTsKCiAgICAjIGlmIG5vIHBlcm1pc3Npb25zIHJldHVybiBlcnJvcgogICAgaWYgKCAhJEFjY2Vzcy0+e1N1Y2Nlc3N9ICkgewogICAgICAgIHJldHVybiAkU2VsZi0+UmV0dXJuRXJyb3IoICV7JEFjY2Vzc30gKTsKICAgIH0KCiAgICBteSAlQ3VzdG9tZXJVc2VyRGF0YTsKCiAgICAjIGdldCBjdXN0b21lciBpbmZvcm1hdGlvbgogICAgaWYgKCAkVGlja2V0LT57Q3VzdG9tZXJVc2VyfSApIHsKICAgICAgICAlQ3VzdG9tZXJVc2VyRGF0YSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpDdXN0b21lclVzZXInKS0+Q3VzdG9tZXJVc2VyRGF0YUdldCgKICAgICAgICAgICAgVXNlciA9PiAkVGlja2V0LT57Q3VzdG9tZXJVc2VyfSwKICAgICAgICApOwogICAgfQoKICAgICMgZ2V0IHRpY2tldCBvYmplY3QKICAgIG15ICRUaWNrZXRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VGlja2V0Jyk7CgogICAgIyBnZXQgY3VycmVudCB0aWNrZXQgZGF0YQogICAgbXkgJVRpY2tldERhdGEgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRHZXQoCiAgICAgICAgVGlja2V0SUQgICAgICA9PiAkVGlja2V0SUQsCiAgICAgICAgRHluYW1pY0ZpZWxkcyA9PiAwLAogICAgICAgIFVzZXJJRCAgICAgICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICApOwoKICAgICMgdXBkYXRlIHRpY2tldCBwYXJhbWV0ZXJzCiAgICAjIHVwZGF0ZSBUaWNrZXQtPlRpdGxlCiAgICBpZiAoCiAgICAgICAgZGVmaW5lZCAkVGlja2V0LT57VGl0bGV9CiAgICAgICAgJiYgJFRpY2tldC0+e1RpdGxlfSBuZSAnJwogICAgICAgICYmICRUaWNrZXQtPntUaXRsZX0gbmUgJFRpY2tldERhdGF7VGl0bGV9CiAgICAgICAgKQogICAgewogICAgICAgIG15ICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0VGl0bGVVcGRhdGUoCiAgICAgICAgICAgIFRpdGxlICAgID0+ICRUaWNrZXQtPntUaXRsZX0sCiAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgKTsKICAgICAgICBpZiAoICEkU3VjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9ybWVzc2FnZSA9PgogICAgICAgICAgICAgICAgICAgICdUaWNrZXQgdGl0bGUgY291bGQgbm90IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHN5c3RlbSBhZG1pbmlzdHJhdG9yIScsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgICMgdXBkYXRlIFRpY2tldC0+UXVldWUKICAgIGlmICggJFRpY2tldC0+e1F1ZXVlfSB8fCAkVGlja2V0LT57UXVldWVJRH0gKSB7CiAgICAgICAgbXkgJFN1Y2Nlc3M7CiAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXQtPntRdWV1ZX0gJiYgJFRpY2tldC0+e1F1ZXVlfSBuZSAkVGlja2V0RGF0YXtRdWV1ZX0gKSB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UXVldWVTZXQoCiAgICAgICAgICAgICAgICBRdWV1ZSAgICA9PiAkVGlja2V0LT57UXVldWV9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggZGVmaW5lZCAkVGlja2V0LT57UXVldWVJRH0gJiYgJFRpY2tldC0+e1F1ZXVlSUR9IG5lICRUaWNrZXREYXRhe1F1ZXVlSUR9ICkgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFF1ZXVlU2V0KAogICAgICAgICAgICAgICAgUXVldWVJRCAgPT4gJFRpY2tldC0+e1F1ZXVlSUR9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewoKICAgICAgICAgICAgIyBkYXRhIGlzIHRoZSBzYW1lIGFzIGluIHRpY2tldCBub3RoaW5nIHRvIGRvCiAgICAgICAgICAgICRTdWNjZXNzID0gMTsKICAgICAgICB9CgogICAgICAgIGlmICggISRTdWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+CiAgICAgICAgICAgICAgICAgICAgJ1RpY2tldCBxdWV1ZSBjb3VsZCBub3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3IhJywKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgIyB1cGRhdGUgVGlja2V0LT5Mb2NrCiAgICBpZiAoICRUaWNrZXQtPntMb2NrfSB8fCAkVGlja2V0LT57TG9ja0lEfSApIHsKICAgICAgICBteSAkU3VjY2VzczsKICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldC0+e0xvY2t9ICYmICRUaWNrZXQtPntMb2NrfSBuZSAkVGlja2V0RGF0YXtMb2NrfSApIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRMb2NrU2V0KAogICAgICAgICAgICAgICAgTG9jayAgICAgPT4gJFRpY2tldC0+e0xvY2t9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggZGVmaW5lZCAkVGlja2V0LT57TG9ja0lEfSAmJiAkVGlja2V0LT57TG9ja0lEfSBuZSAkVGlja2V0RGF0YXtMb2NrSUR9ICkgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldExvY2tTZXQoCiAgICAgICAgICAgICAgICBMb2NrSUQgICA9PiAkVGlja2V0LT57TG9ja0lEfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKCiAgICAgICAgICAgICMgZGF0YSBpcyB0aGUgc2FtZSBhcyBpbiB0aWNrZXQgbm90aGluZyB0byBkbwogICAgICAgICAgICAkU3VjY2VzcyA9IDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoICEkU3VjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9ybWVzc2FnZSA9PgogICAgICAgICAgICAgICAgICAgICdUaWNrZXQgbG9jayBjb3VsZCBub3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3IhJywKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgIyB1cGRhdGUgVGlja2V0LT5UeXBlCiAgICBpZiAoICRUaWNrZXQtPntUeXBlfSB8fCAkVGlja2V0LT57VHlwZUlEfSApIHsKICAgICAgICBteSAkU3VjY2VzczsKICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldC0+e1R5cGV9ICYmICRUaWNrZXQtPntUeXBlfSBuZSAkVGlja2V0RGF0YXtUeXBlfSApIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRUeXBlU2V0KAogICAgICAgICAgICAgICAgVHlwZSAgICAgPT4gJFRpY2tldC0+e1R5cGV9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggZGVmaW5lZCAkVGlja2V0LT57VHlwZUlEfSAmJiAkVGlja2V0LT57VHlwZUlEfSBuZSAkVGlja2V0RGF0YXtUeXBlSUR9ICkKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0VHlwZVNldCgKICAgICAgICAgICAgICAgIFR5cGVJRCAgID0+ICRUaWNrZXQtPntUeXBlSUR9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewoKICAgICAgICAgICAgIyBkYXRhIGlzIHRoZSBzYW1lIGFzIGluIHRpY2tldCBub3RoaW5nIHRvIGRvCiAgICAgICAgICAgICRTdWNjZXNzID0gMTsKICAgICAgICB9CgogICAgICAgIGlmICggISRTdWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JtZXNzYWdlID0+CiAgICAgICAgICAgICAgICAgICAgJ1RpY2tldCB0eXBlIGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAjIHVwZGF0ZSBUaWNrZXQ+U3RhdGUKICAgICMgZGVwZW5kaW5nIG9uIHRoZSBzdGF0ZSwgbWlnaHQgcmVxdWlyZSB0byB1bmxvY2sgdGlja2V0IG9yIGVuYWJsZXMgcGVuZGluZyB0aW1lIHNldAogICAgaWYgKCAkVGlja2V0LT57U3RhdGV9IHx8ICRUaWNrZXQtPntTdGF0ZUlEfSApIHsKCiAgICAgICAgIyBnZXQgU3RhdGUgRGF0YQogICAgICAgIG15ICVTdGF0ZURhdGE7CiAgICAgICAgbXkgJFN0YXRlSUQ7CgogICAgICAgICMgZ2V0IHN0YXRlIG9iamVjdAogICAgICAgIG15ICRTdGF0ZU9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpTdGF0ZScpOwoKICAgICAgICBpZiAoICRUaWNrZXQtPntTdGF0ZUlEfSApIHsKICAgICAgICAgICAgJFN0YXRlSUQgPSAkVGlja2V0LT57U3RhdGVJRH07CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkU3RhdGVJRCA9ICRTdGF0ZU9iamVjdC0+U3RhdGVMb29rdXAoCiAgICAgICAgICAgICAgICBTdGF0ZSA9PiAkVGlja2V0LT57U3RhdGV9LAogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgJVN0YXRlRGF0YSA9ICRTdGF0ZU9iamVjdC0+U3RhdGVHZXQoCiAgICAgICAgICAgIElEID0+ICRTdGF0ZUlELAogICAgICAgICk7CgogICAgICAgICMgZm9yY2UgdW5sb2NrIGlmIHN0YXRlIHR5cGUgaXMgY2xvc2UKICAgICAgICBpZiAoICRTdGF0ZURhdGF7VHlwZU5hbWV9ID1+IC9eY2xvc2UvaSApIHsKCiAgICAgICAgICAgICMgc2V0IGxvY2sKICAgICAgICAgICAgJFRpY2tldE9iamVjdC0+VGlja2V0TG9ja1NldCgKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIExvY2sgICAgID0+ICd1bmxvY2snLAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICAjIHNldCBwZW5kaW5nIHRpbWUKICAgICAgICBlbHNpZiAoICRTdGF0ZURhdGF7VHlwZU5hbWV9ID1+IC9ecGVuZGluZy9pICkgewoKICAgICAgICAgICAgIyBzZXQgcGVuZGluZyB0aW1lCiAgICAgICAgICAgIGlmICggZGVmaW5lZCAkVGlja2V0LT57UGVuZGluZ1RpbWV9ICkgewogICAgICAgICAgICAgICAgbXkgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRQZW5kaW5nVGltZVNldCgKICAgICAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICAgICAgJXsgJFRpY2tldC0+e1BlbmRpbmdUaW1lfSB9LAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICBpZiAoICEkU3VjY2VzcyApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIEVycm9ybWVzc2FnZSA9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RpY2tldCBwZW5kaWcgdGltZSBjb3VsZCBub3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3Qgc3lzdGVtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLiAnIGFkbWluaXN0cmF0b3IhJywKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuICRTZWxmLT5SZXR1cm5FcnJvcigKICAgICAgICAgICAgICAgICAgICBFcnJvckNvZGUgICAgPT4gJ1RpY2tldFVwZGF0ZU9yQ3JlYXRlLk1pc3NpbmdQYXJhbWV0ZXInLAogICAgICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAnQ2FuXCd0IHNldCBhIHRpY2tldCBvbiBhIHBlbmRpbmcgc3RhdGUgd2l0aG91dCBwZW5kaWcgdGltZSEnCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBteSAkU3VjY2VzczsKICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldC0+e1N0YXRlfSAmJiAkVGlja2V0LT57U3RhdGV9IG5lICRUaWNrZXREYXRhe1N0YXRlfSApIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRTdGF0ZVNldCgKICAgICAgICAgICAgICAgIFN0YXRlICAgID0+ICRUaWNrZXQtPntTdGF0ZX0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzaWYgKCBkZWZpbmVkICRUaWNrZXQtPntTdGF0ZUlEfSAmJiAkVGlja2V0LT57U3RhdGVJRH0gbmUgJFRpY2tldERhdGF7U3RhdGVJRH0gKQogICAgICAgIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRTdGF0ZVNldCgKICAgICAgICAgICAgICAgIFN0YXRlSUQgID0+ICRUaWNrZXQtPntTdGF0ZUlEfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKCiAgICAgICAgICAgICMgZGF0YSBpcyB0aGUgc2FtZSBhcyBpbiB0aWNrZXQgbm90aGluZyB0byBkbwogICAgICAgICAgICAkU3VjY2VzcyA9IDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoICEkU3VjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9ybWVzc2FnZSA9PgogICAgICAgICAgICAgICAgICAgICdUaWNrZXQgc3RhdGUgY291bGQgbm90IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHN5c3RlbSBhZG1pbmlzdHJhdG9yIScsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgICMgdXBkYXRlIFRpY2tldC0+U2VydmljZQogICAgIyB0aGlzIG1pZ2h0IHJlc2V0IFNMQSBpZiBjdXJyZW50IFNMQSBpcyBub3QgYXZhaWxhYmxlIGZvciB0aGUgbmV3IHNlcnZpY2UKICAgIGlmICggJFRpY2tldC0+e1NlcnZpY2V9IHx8ICRUaWNrZXQtPntTZXJ2aWNlSUR9ICkgewoKICAgICAgICAjIGNoZWNrIGlmIHRpY2tldCBoYXMgYSBTTEEgYXNzaWduZWQKICAgICAgICBpZiAoICRUaWNrZXREYXRhe1NMQUlEfSApIHsKCiAgICAgICAgICAgICMgY2hlY2sgaWYgb2xkIFNMQSBpcyBzdGlsbCB2YWxpZAogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAhJFNlbGYtPlZhbGlkYXRlU0xBKAogICAgICAgICAgICAgICAgICAgIFNMQUlEICAgICA9PiAkVGlja2V0RGF0YXtTTEFJRH0sCiAgICAgICAgICAgICAgICAgICAgU2VydmljZSAgID0+ICRUaWNrZXQtPntTZXJ2aWNlfSB8fCAnJywKICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlSUQgPT4gJFRpY2tldC0+e1NlcnZpY2VJRH0gfHwgJycsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAjIHJlbW92ZSBjdXJyZW50IFNMQSBpZiBpcyBub3QgY29tcGF0aWJsZSB3aXRoIG5ldyBzZXJ2aWNlCiAgICAgICAgICAgICAgICBteSAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFNMQVNldCgKICAgICAgICAgICAgICAgICAgICBTTEFJRCAgICA9PiAnJywKICAgICAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBteSAkU3VjY2VzczsKCiAgICAgICAgIyBwcmV2ZW50IGNvbXBhcmlzb24gZXJyb3JzIG9uIHVuZGVmaW5lZCB2YWx1ZXMKICAgICAgICBpZiAoICFkZWZpbmVkICRUaWNrZXREYXRhe1NlcnZpY2V9ICkgewogICAgICAgICAgICAkVGlja2V0RGF0YXtTZXJ2aWNlfSA9ICcnOwogICAgICAgIH0KICAgICAgICBpZiAoICFkZWZpbmVkICRUaWNrZXREYXRhe1NlcnZpY2VJRH0gKSB7CiAgICAgICAgICAgICRUaWNrZXREYXRhe1NlcnZpY2VJRH0gPSAnJzsKICAgICAgICB9CgogICAgICAgIGlmICggZGVmaW5lZCAkVGlja2V0LT57U2VydmljZX0gJiYgJFRpY2tldC0+e1NlcnZpY2V9IG5lICRUaWNrZXREYXRhe1NlcnZpY2V9ICkgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFNlcnZpY2VTZXQoCiAgICAgICAgICAgICAgICBTZXJ2aWNlICA9PiAkVGlja2V0LT57U2VydmljZX0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzaWYgKCBkZWZpbmVkICRUaWNrZXQtPntTZXJ2aWNlSUR9ICYmICRUaWNrZXQtPntTZXJ2aWNlSUR9IG5lICRUaWNrZXREYXRhe1NlcnZpY2VJRH0gKQogICAgICAgIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRTZXJ2aWNlU2V0KAogICAgICAgICAgICAgICAgU2VydmljZUlEID0+ICRUaWNrZXQtPntTZXJ2aWNlSUR9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAjIGRhdGEgaXMgdGhlIHNhbWUgYXMgaW4gdGlja2V0IG5vdGhpbmcgdG8gZG8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IHNlcnZpY2UgY291bGQgbm90IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHN5c3RlbSBhZG1pbmlzdHJhdG9yIScsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgICMgdXBkYXRlIFRpY2tldC0+U0xBCiAgICBpZiAoICRUaWNrZXQtPntTTEF9IHx8ICRUaWNrZXQtPntTTEFJRH0gKSB7CiAgICAgICAgbXkgJFN1Y2Nlc3M7CgogICAgICAgICMgcHJldmVudCBjb21wYXJpc29uIGVycm9ycyBvbiB1bmRlZmluZWQgdmFsdWVzCiAgICAgICAgaWYgKCAhZGVmaW5lZCAkVGlja2V0RGF0YXtTTEF9ICkgewogICAgICAgICAgICAkVGlja2V0RGF0YXtTTEF9ID0gJyc7CiAgICAgICAgfQogICAgICAgIGlmICggIWRlZmluZWQgJFRpY2tldERhdGF7U0xBSUR9ICkgewogICAgICAgICAgICAkVGlja2V0RGF0YXtTTEFJRH0gPSAnJzsKICAgICAgICB9CgogICAgICAgIGlmICggZGVmaW5lZCAkVGlja2V0LT57U0xBfSAmJiAkVGlja2V0LT57U0xBfSBuZSAkVGlja2V0RGF0YXtTTEF9ICkgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFNMQVNldCgKICAgICAgICAgICAgICAgIFNMQSAgICAgID0+ICRUaWNrZXQtPntTTEF9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggZGVmaW5lZCAkVGlja2V0LT57U0xBSUR9ICYmICRUaWNrZXQtPntTTEFJRH0gbmUgJFRpY2tldERhdGF7U0xBSUR9ICkKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0U0xBU2V0KAogICAgICAgICAgICAgICAgU0xBSUQgICAgPT4gJFRpY2tldC0+e1NMQUlEfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKCiAgICAgICAgICAgICMgZGF0YSBpcyB0aGUgc2FtZSBhcyBpbiB0aWNrZXQgbm90aGluZyB0byBkbwogICAgICAgICAgICAkU3VjY2VzcyA9IDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoICEkU3VjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9ybWVzc2FnZSA9PgogICAgICAgICAgICAgICAgICAgICdUaWNrZXQgU0xBIGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAjIHVwZGF0ZSBUaWNrZXQtPkN1c3RvbWVyVXNlciAmJiBUaWNrZXQtPkN1c3RvbWVySUQKICAgIGlmICggJFRpY2tldC0+e0N1c3RvbWVyVXNlcn0gfHwgJFRpY2tldC0+e0N1c3RvbWVySUR9ICkgewoKICAgICAgICAjIHNldCB2YWx1ZXMgdG8gZW1wdHkgaWYgdGhleSBhcmUgbm90IGRlZmluZWQKICAgICAgICAkVGlja2V0RGF0YXtDdXN0b21lclVzZXJJRH0gPSAkVGlja2V0RGF0YXtDdXN0b21lclVzZXJJRH0gfHwgJyc7CiAgICAgICAgJFRpY2tldERhdGF7Q3VzdG9tZXJJRH0gICAgID0gJFRpY2tldERhdGF7Q3VzdG9tZXJJRH0gICAgIHx8ICcnOwogICAgICAgICRUaWNrZXQtPntDdXN0b21lclVzZXJ9ICAgICA9ICRUaWNrZXQtPntDdXN0b21lclVzZXJ9ICAgICB8fCAnJzsKICAgICAgICAkVGlja2V0LT57Q3VzdG9tZXJJRH0gICAgICAgPSAkVGlja2V0LT57Q3VzdG9tZXJJRH0gICAgICAgfHwgJyc7CgogICAgICAgIG15ICRTdWNjZXNzOwogICAgICAgIGlmICgKICAgICAgICAgICAgJFRpY2tldC0+e0N1c3RvbWVyVXNlcn0gbmUgJFRpY2tldERhdGF7Q3VzdG9tZXJVc2VySUR9CiAgICAgICAgICAgIHx8ICRUaWNrZXQtPntDdXN0b21lcklEfSBuZSAkVGlja2V0RGF0YXtDdXN0b21lcklEfQogICAgICAgICAgICApCiAgICAgICAgewogICAgICAgICAgICBteSAkQ3VzdG9tZXJJRCA9ICRDdXN0b21lclVzZXJEYXRhe1VzZXJDdXN0b21lcklEfSB8fCAnJzsKCiAgICAgICAgICAgICMgdXNlIHVzZXIgZGVmaW5lZCBDdXN0b21lcklEIGlmIGRlZmluZWQKICAgICAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXQtPntDdXN0b21lcklEfSAmJiAkVGlja2V0LT57Q3VzdG9tZXJJRH0gbmUgJycgKSB7CiAgICAgICAgICAgICAgICAkQ3VzdG9tZXJJRCA9ICRUaWNrZXQtPntDdXN0b21lcklEfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRDdXN0b21lclNldCgKICAgICAgICAgICAgICAgIE5vICAgICAgID0+ICRDdXN0b21lcklELAogICAgICAgICAgICAgICAgVXNlciAgICAgPT4gJFRpY2tldC0+e0N1c3RvbWVyVXNlcn0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAjIGRhdGEgaXMgdGhlIHNhbWUgYXMgaW4gdGlja2V0IG5vdGhpbmcgdG8gZG8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IGN1c3RvbWVyIHVzZXIgY291bGQgbm90IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHN5c3RlbSBhZG1pbmlzdHJhdG9yIScsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgICMgdXBkYXRlIFRpY2tldC0+UHJpb3JpdHkKICAgIGlmICggJFRpY2tldC0+e1ByaW9yaXR5fSB8fCAkVGlja2V0LT57UHJpb3JpdHlJRH0gKSB7CiAgICAgICAgbXkgJFN1Y2Nlc3M7CiAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXQtPntQcmlvcml0eX0gJiYgJFRpY2tldC0+e1ByaW9yaXR5fSBuZSAkVGlja2V0RGF0YXtQcmlvcml0eX0gKSB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UHJpb3JpdHlTZXQoCiAgICAgICAgICAgICAgICBQcmlvcml0eSA9PiAkVGlja2V0LT57UHJpb3JpdHl9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggZGVmaW5lZCAkVGlja2V0LT57UHJpb3JpdHlJRH0gJiYgJFRpY2tldC0+e1ByaW9yaXR5SUR9IG5lICRUaWNrZXREYXRhe1ByaW9yaXR5SUR9ICkKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UHJpb3JpdHlTZXQoCiAgICAgICAgICAgICAgICBQcmlvcml0eUlEID0+ICRUaWNrZXQtPntQcmlvcml0eUlEfSwKICAgICAgICAgICAgICAgIFRpY2tldElEICAgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAjIGRhdGEgaXMgdGhlIHNhbWUgYXMgaW4gdGlja2V0IG5vdGhpbmcgdG8gZG8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IHByaW9yaXR5IGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBteSAkVW5sb2NrT25Bd2F5ID0gMTsKCiAgICAjIHVwZGF0ZSBUaWNrZXQtPk93bmVyCiAgICBpZiAoICRUaWNrZXQtPntPd25lcn0gfHwgJFRpY2tldC0+e093bmVySUR9ICkgewogICAgICAgIG15ICRTdWNjZXNzOwogICAgICAgIGlmICggZGVmaW5lZCAkVGlja2V0LT57T3duZXJ9ICYmICRUaWNrZXQtPntPd25lcn0gbmUgJFRpY2tldERhdGF7T3duZXJ9ICkgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldE93bmVyU2V0KAogICAgICAgICAgICAgICAgTmV3VXNlciAgPT4gJFRpY2tldC0+e093bmVyfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgICAgICAkVW5sb2NrT25Bd2F5ID0gMDsKICAgICAgICB9CiAgICAgICAgZWxzaWYgKCBkZWZpbmVkICRUaWNrZXQtPntPd25lcklEfSAmJiAkVGlja2V0LT57T3duZXJJRH0gbmUgJFRpY2tldERhdGF7T3duZXJJRH0gKQogICAgICAgIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRPd25lclNldCgKICAgICAgICAgICAgICAgIE5ld1VzZXJJRCA9PiAkVGlja2V0LT57T3duZXJJRH0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCAgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgICAgICAkVW5sb2NrT25Bd2F5ID0gMDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAjIGRhdGEgaXMgdGhlIHNhbWUgYXMgaW4gdGlja2V0IG5vdGhpbmcgdG8gZG8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IG93bmVyIGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAjIHVwZGF0ZSBUaWNrZXQtPlJlc3BvbnNpYmxlCiAgICBpZiAoICRUaWNrZXQtPntSZXNwb25zaWJsZX0gfHwgJFRpY2tldC0+e1Jlc3BvbnNpYmxlSUR9ICkgewogICAgICAgIG15ICRTdWNjZXNzOwogICAgICAgIGlmICgKICAgICAgICAgICAgZGVmaW5lZCAkVGlja2V0LT57UmVzcG9uc2libGV9CiAgICAgICAgICAgICYmICRUaWNrZXQtPntSZXNwb25zaWJsZX0gbmUgJFRpY2tldERhdGF7UmVzcG9uc2libGV9CiAgICAgICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UmVzcG9uc2libGVTZXQoCiAgICAgICAgICAgICAgICBOZXdVc2VyICA9PiAkVGlja2V0LT57UmVzcG9uc2libGV9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICgKICAgICAgICAgICAgZGVmaW5lZCAkVGlja2V0LT57UmVzcG9uc2libGVJRH0KICAgICAgICAgICAgJiYgJFRpY2tldC0+e1Jlc3BvbnNpYmxlSUR9IG5lICRUaWNrZXREYXRhe1Jlc3BvbnNpYmxlSUR9CiAgICAgICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UmVzcG9uc2libGVTZXQoCiAgICAgICAgICAgICAgICBOZXdVc2VySUQgPT4gJFRpY2tldC0+e1Jlc3BvbnNpYmxlSUR9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAjIGRhdGEgaXMgdGhlIHNhbWUgYXMgaW4gdGlja2V0IG5vdGhpbmcgdG8gZG8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IHJlc3BvbnNpYmxlIGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBteSAkQXJ0aWNsZUlEOwogICAgaWYgKCBJc0hhc2hSZWZXaXRoRGF0YSgkQXJ0aWNsZSkgKSB7CgogICAgICAgICMgc2V0IEFydGljbGUgRnJvbQogICAgICAgIG15ICRGcm9tOwogICAgICAgIGlmICggJEFydGljbGUtPntGcm9tfSApIHsKICAgICAgICAgICAgJEZyb20gPSAkQXJ0aWNsZS0+e0Zyb219OwogICAgICAgIH0KICAgICAgICBlbHNpZiAoICRQYXJhbXtVc2VyVHlwZX0gZXEgJ0N1c3RvbWVyJyApIHsKCiAgICAgICAgICAgICMgdXNlIGRhdGEgZnJvbSBjdXN0b21lciB1c2VyIChpZiBjdXN0b21lciB1c2VyIGlzIGluIGRhdGFiYXNlKQogICAgICAgICAgICBpZiAoIElzSGFzaFJlZldpdGhEYXRhKCBcJUN1c3RvbWVyVXNlckRhdGEgKSApIHsKICAgICAgICAgICAgICAgICRGcm9tID0gJyInCiAgICAgICAgICAgICAgICAgICAgLiAkQ3VzdG9tZXJVc2VyRGF0YXtVc2VyRmlyc3RuYW1lfSAuICcgJwogICAgICAgICAgICAgICAgICAgIC4gJEN1c3RvbWVyVXNlckRhdGF7VXNlckxhc3RuYW1lfSAuICciJwogICAgICAgICAgICAgICAgICAgIC4gJyA8JyAuICRDdXN0b21lclVzZXJEYXRhe1VzZXJFbWFpbH0gLiAnPic7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgb3RoZXJ3aXNlIHVzZSBjdXN0b21lciB1c2VyIGFzIHNlbnQgZnJvbSB0aGUgcmVxdWVzdCAoaXQgc2hvdWxkIGJlIGFuIGVtYWlsKQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRGcm9tID0gJFRpY2tldC0+e0N1c3RvbWVyVXNlcn07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIG15ICVVc2VyRGF0YSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpVc2VyJyktPkdldFVzZXJEYXRhKAogICAgICAgICAgICAgICAgVXNlcklEID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgICAgICAkRnJvbSA9ICRVc2VyRGF0YXtVc2VyRmlyc3RuYW1lfSAuICcgJyAuICRVc2VyRGF0YXtVc2VyTGFzdG5hbWV9OwogICAgICAgIH0KCiAgICAgICAgIyBzZXQgQXJ0aWNsZSBUbwogICAgICAgIG15ICRUbyA9ICcnOwoKICAgICAgICAjIGNyZWF0ZSBhcnRpY2xlCiAgICAgICAgJEFydGljbGVJRCA9ICRUaWNrZXRPYmplY3QtPkFydGljbGVDcmVhdGUoCiAgICAgICAgICAgIE5vQWdlbnROb3RpZnkgID0+ICRBcnRpY2xlLT57Tm9BZ2VudE5vdGlmeX0gIHx8IDAsCiAgICAgICAgICAgIFRpY2tldElEICAgICAgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgQXJ0aWNsZVR5cGVJRCAgPT4gJEFydGljbGUtPntBcnRpY2xlVHlwZUlEfSAgfHwgJycsCiAgICAgICAgICAgIEFydGljbGVUeXBlICAgID0+ICRBcnRpY2xlLT57QXJ0aWNsZVR5cGV9ICAgIHx8ICcnLAogICAgICAgICAgICBTZW5kZXJUeXBlSUQgICA9PiAkQXJ0aWNsZS0+e1NlbmRlclR5cGVJRH0gICB8fCAnJywKICAgICAgICAgICAgU2VuZGVyVHlwZSAgICAgPT4gJEFydGljbGUtPntTZW5kZXJUeXBlfSAgICAgfHwgJycsCiAgICAgICAgICAgIEZyb20gICAgICAgICAgID0+ICRGcm9tLAogICAgICAgICAgICBUbyAgICAgICAgICAgICA9PiAkVG8sCiAgICAgICAgICAgIFN1YmplY3QgICAgICAgID0+ICRBcnRpY2xlLT57U3ViamVjdH0sCiAgICAgICAgICAgIEJvZHkgICAgICAgICAgID0+ICRBcnRpY2xlLT57Qm9keX0sCiAgICAgICAgICAgIE1pbWVUeXBlICAgICAgID0+ICRBcnRpY2xlLT57TWltZVR5cGV9ICAgICAgIHx8ICcnLAogICAgICAgICAgICBDaGFyc2V0ICAgICAgICA9PiAkQXJ0aWNsZS0+e0NoYXJzZXR9ICAgICAgICB8fCAnJywKICAgICAgICAgICAgQ29udGVudFR5cGUgICAgPT4gJEFydGljbGUtPntDb250ZW50VHlwZX0gICAgfHwgJycsCiAgICAgICAgICAgIFVzZXJJRCAgICAgICAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICBIaXN0b3J5VHlwZSAgICA9PiAkQXJ0aWNsZS0+e0hpc3RvcnlUeXBlfSwKICAgICAgICAgICAgSGlzdG9yeUNvbW1lbnQgPT4gJEFydGljbGUtPntIaXN0b3J5Q29tbWVudH0gfHwgJyUlJywKICAgICAgICAgICAgQXV0b1Jlc3BvbnNlVHlwZSA9PiAkQXJ0aWNsZS0+e0F1dG9SZXNwb25zZVR5cGV9LAogICAgICAgICAgICBVbmxvY2tPbkF3YXkgICAgID0+ICRVbmxvY2tPbkF3YXksCiAgICAgICAgICAgIE9yaWdIZWFkZXIgICAgICAgPT4gewogICAgICAgICAgICAgICAgRnJvbSAgICA9PiAkRnJvbSwKICAgICAgICAgICAgICAgIFRvICAgICAgPT4gJFRvLAogICAgICAgICAgICAgICAgU3ViamVjdCA9PiAkQXJ0aWNsZS0+e1N1YmplY3R9LAogICAgICAgICAgICAgICAgQm9keSAgICA9PiAkQXJ0aWNsZS0+e0JvZHl9LAoKICAgICAgICAgICAgfSwKICAgICAgICApOwoKICAgICAgICBpZiAoICEkQXJ0aWNsZUlEICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+CiAgICAgICAgICAgICAgICAgICAgJ0FydGljbGUgY291bGQgbm90IGJlIGNyZWF0ZWQsIHBsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvcicKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgdGltZSBhY2NvdW50aW5nCiAgICAgICAgaWYgKCAkQXJ0aWNsZS0+e1RpbWVVbml0fSApIHsKICAgICAgICAgICAgJFRpY2tldE9iamVjdC0+VGlja2V0QWNjb3VudFRpbWUoCiAgICAgICAgICAgICAgICBUaWNrZXRJRCAgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgQXJ0aWNsZUlEID0+ICRBcnRpY2xlSUQsCiAgICAgICAgICAgICAgICBUaW1lVW5pdCAgPT4gJEFydGljbGUtPntUaW1lVW5pdH0sCiAgICAgICAgICAgICAgICBVc2VySUQgICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQoKICAgICMgc2V0IGR5bmFtaWMgZmllbGRzCiAgICBmb3IgbXkgJER5bmFtaWNGaWVsZCAoIEB7JER5bmFtaWNGaWVsZExpc3R9ICkgewogICAgICAgIG15ICRSZXN1bHQgPSAkU2VsZi0+U2V0RHluYW1pY0ZpZWxkVmFsdWUoCiAgICAgICAgICAgICV7JER5bmFtaWNGaWVsZH0sCiAgICAgICAgICAgIFRpY2tldElEICA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIEFydGljbGVJRCA9PiAkQXJ0aWNsZUlEIHx8ICcnLAogICAgICAgICAgICBVc2VySUQgICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgKTsKCiAgICAgICAgaWYgKCAhJFJlc3VsdC0+e1N1Y2Nlc3N9ICkgewogICAgICAgICAgICBteSAkRXJyb3JNZXNzYWdlID0KICAgICAgICAgICAgICAgICRSZXN1bHQtPntFcnJvck1lc3NhZ2V9IHx8ICJEeW5hbWljIEZpZWxkICREeW5hbWljRmllbGQtPntOYW1lfSBjb3VsZCBub3QgYmUgc2V0LCIKICAgICAgICAgICAgICAgIC4gIiBwbGVhc2UgY29udGFjdCB0aGUgc3lzdGVtIGFkbWluaXN0cmF0b3IiOwoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgICAgICA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICRFcnJvck1lc3NhZ2UsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgICMgc2V0IGF0dGFjaG1lbnRzCgogICAgZm9yIG15ICRBdHRhY2htZW50ICggQHskQXR0YWNobWVudExpc3R9ICkgewogICAgICAgIG15ICRSZXN1bHQgPSAkU2VsZi0+Q3JlYXRlQXR0YWNobWVudCgKICAgICAgICAgICAgQXR0YWNobWVudCA9PiAkQXR0YWNobWVudCwKICAgICAgICAgICAgQXJ0aWNsZUlEICA9PiAkQXJ0aWNsZUlEIHx8ICcnLAogICAgICAgICAgICBVc2VySUQgICAgID0+ICRQYXJhbXtVc2VySUR9CiAgICAgICAgKTsKCiAgICAgICAgaWYgKCAhJFJlc3VsdC0+e1N1Y2Nlc3N9ICkgewogICAgICAgICAgICBteSAkRXJyb3JNZXNzYWdlID0KICAgICAgICAgICAgICAgICRSZXN1bHQtPntFcnJvck1lc3NhZ2V9IHx8ICJBdHRhY2htZW50IGNvdWxkIG5vdCBiZSBjcmVhdGVkLCBwbGVhc2UgY29udGFjdCB0aGUgIgogICAgICAgICAgICAgICAgLiAiIHN5c3RlbSBhZG1pbmlzdHJhdG9yIjsKCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzICAgICAgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAkRXJyb3JNZXNzYWdlLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KCiAgICBpZiAoJEFydGljbGVJRCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICAgICAgRGF0YSAgICA9PiB7CiAgICAgICAgICAgICAgICBUaWNrZXRJRCAgICAgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVGlja2V0TnVtYmVyID0+ICRUaWNrZXREYXRhe1RpY2tldE51bWJlcn0sCiAgICAgICAgICAgICAgICBBcnRpY2xlSUQgICAgPT4gJEFydGljbGVJRCwKICAgICAgICAgICAgfSwKICAgICAgICB9OwogICAgfQogICAgcmV0dXJuIHsKICAgICAgICBTdWNjZXNzID0+IDEsCiAgICAgICAgRGF0YSAgICA9PiB7CiAgICAgICAgICAgIFRpY2tldElEICAgICA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIFRpY2tldE51bWJlciA9PiAkVGlja2V0RGF0YXtUaWNrZXROdW1iZXJ9LAogICAgICAgIH0sCiAgICB9Owp9CgoxOwoKPWJhY2sK</File>
        <File Location="Kernel/Output/HTML/FilterElementPost/RocketChat.pm" Permission="644" Encode="Base64">cGFja2FnZSBLZXJuZWw6Ok91dHB1dDo6SFRNTDo6RmlsdGVyRWxlbWVudFBvc3Q6OlJvY2tldENoYXQ7Cgp1c2Ugc3RyaWN0Owp1c2Ugd2FybmluZ3M7Cgp1c2UgRGF0YTo6RHVtcGVyOwoKCm91ciBAT2JqZWN0RGVwZW5kZW5jaWVzID0gKAogICAgJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnLAopOwoKPWhlYWQxIEFERE9OCgpSb2NrZXRDaGF0CgoKPWhlYWQxIE5BTUUKCktlcm5lbDo6T3V0cHV0OjpIVE1MOjpGaWx0ZXJFbGVtZW50UG9zdDo6Um9ja2V0Q2hhdAoKCj1oZWFkMSBTWU5PUFNJUwoKT3V0cHV0IGVsZW1lbnQgZmlsdGVyIHRoYXQgaW5jbHVkZXMgcm9ja2V0LmNoYXQgc2NyaXB0Cm9uIE9UUlMncyBDdXN0b21lciBpbnRlcmZhY2UKCj1oZWFkMSBQVUJMSUMgSU5URVJGQUNFCgo9b3ZlciA0Cgo9Y3V0Cgo9aXRlbSBuZXcoKQoKQ3JlYXRlcyB0aGUgb2JqZWN0LiBBbHNvIHRha2VzIHVzZXIgaW5mb3JtYXRpb24gYW5kIHNldHMgaW50byBTZWxmIGVsZW1lbnQKCj1jdXQKc3ViIG5ldyB7CiAgICBteSAoICRUeXBlLCAlUGFyYW0gKSA9IEBfOwoKICAgICMgYWxsb2NhdGUgbmV3IGhhc2ggZm9yIG9iamVjdAogICAgbXkgJFNlbGYgPSB7fTsKICAgIGJsZXNzKCAkU2VsZiwgJFR5cGUgKTsKICAgIAogICAgJFNlbGYtPntVc2VyTG9naW59ID0gJFBhcmFte1VzZXJMb2dpbn07CiAgICAkU2VsZi0+e1VzZXJGaXJzdG5hbWV9ID0gJFBhcmFte1VzZXJGaXJzdG5hbWV9IHx8ICdHdWVzdCc7CiAgICAkU2VsZi0+e1VzZXJMYXN0bmFtZX0gPSAkUGFyYW17VXNlckxhc3RuYW1lfSB8fCAnJzsKICAgICRTZWxmLT57VXNlckVtYWlsfSA9ICRQYXJhbXtVc2VyRW1haWx9OwogICAgCiAgICByZXR1cm4gJFNlbGY7Cn0KCj1pdGVtIFJ1bigpCgpFeGVjdXRlIG91dHB1dCBmaWx0ZXIgZWxlbWVudCBmb3IgaW5jbHVkaW4gUm9ja2V0LkNoYXQgbGl2ZWNoYXQgc2NyaXB0IG9uIApPVFJTJ3MgQ3VzdG9tZXIgSW50ZXJmYWNlCgo9Y3V0CnN1YiBSdW4gewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAkTGF5b3V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpPdXRwdXQ6OkhUTUw6OkxheW91dCcpOwoKICAgIG15ICVEYXRhID0gKAogICAgICAgIFVzZXJMb2dpbiAgICAgICAgICAgID0+ICRTZWxmLT57VXNlckxvZ2lufSwKICAgICAgICBVc2VyRmlyc3RuYW1lICAgICAgICA9PiAkU2VsZi0+e1VzZXJGaXJzdG5hbWV9LAogICAgICAgIFVzZXJMYXN0bmFtZSAgICAgICAgID0+ICRTZWxmLT57VXNlckxhc3RuYW1lfSwKICAgICAgICBVc2VyRW1haWwgICAgICAgICAgICA9PiAkU2VsZi0+e1VzZXJFbWFpbH0sCiAgICAgICAgUm9ja2V0Q2hhdEphdmFzY3JpcHQgPT4gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpDb25maWcnKS0+R2V0KCdSb2NrZXRDaGF0OjpDb2RlJykKICAgICk7CgogICAgbXkgJENvbnRlbnQgPSAkTGF5b3V0T2JqZWN0LT5PdXRwdXQoCiAgICAgICAgVGVtcGxhdGVGaWxlID0+ICdSb2NrZXRDaGF0JywKICAgICAgICBEYXRhICAgICAgICAgPT4gewogICAgICAgICAgICAlRGF0YQogICAgICAgIH0sCiAgICApOwogICAgIyMgQWRkIFJvY2tldCBDaGF0IHNjcmlwdAogICAgJHsgJFBhcmFte0RhdGF9IH0gLj0gJENvbnRlbnQ7CgogICAgcmV0dXJuIDE7Cn0KCjE7Cg==</File>
        <File Location="Kernel/Output/HTML/Templates/Standard/RocketChat.tt" Permission="644" Encode="Base64">PCEtLSBTdGFydCBvZiBSb2NrZXQuQ2hhdCBMaXZlY2hhdCBTY3JpcHQgLS0+CgpbJSBEYXRhLlJvY2tldENoYXRKYXZhc2NyaXB0ICVdCgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CnZhciBSb2NrZXRDaGF0UHJlRm9ybUNsZWFuID0gMDsKClJvY2tldENoYXQoZnVuY3Rpb24oKSB7CiAgICB0aGlzLm9uQ2hhdE1heGltaXplZChmdW5jdGlvbigpIHsKICAgICAgICAvLyBkbyB3aGF0ZXZlciB5b3Ugd2FudAogICAgICAgIGlmICghUm9ja2V0Q2hhdFByZUZvcm1DbGVhbil7CiAgICAgICAgICAgIC8vIEdldCBSb2NrZXRjaGF0IHByZSBmb3JtIGVsZW1lbnQKICAgICAgICAgICAgdmFyIGd1ZXN0TmFtZSA9ICQoJyNyb2NrZXRjaGF0LWlmcmFtZScpLmNvbnRlbnRzKCkuZmluZCgnI2d1ZXN0TmFtZScpOwogICAgICAgICAgICB2YXIgZ3Vlc3RFbWFpbCA9ICQoJyNyb2NrZXRjaGF0LWlmcmFtZScpLmNvbnRlbnRzKCkuZmluZCgnI2d1ZXN0RW1haWwnKTsKICAgICAgICAgICAgdmFyIGRlcGFydG1lbnQgPSAkKCcjcm9ja2V0Y2hhdC1pZnJhbWUnKS5jb250ZW50cygpLmZpbmQoJ3NlbGVjdFtuYW1lPWRlcGFydG1lbnRdJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTZXQgQ3VzdG9tZXIgTmFtZSBhbmQgRW1haWwKICAgICAgICAgICAgZ3Vlc3ROYW1lLnZhbCgnWyUgRGF0YS5Vc2VyRmlyc3RuYW1lICVdJyk7CiAgICAgICAgICAgIGd1ZXN0RW1haWwudmFsKCdbJSBEYXRhLlVzZXJFbWFpbCAlXScpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ1NTCiAgICAgICAgICAgIGd1ZXN0TmFtZS5jc3MoJ2NvbG9yJywnIzc3NycpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsJyNlZWUnKS5wcm9wKCdyZWFkb25seScsJ3RydWUnKTsKICAgICAgICAgICAgZ3Vlc3RFbWFpbC5jc3MoJ2NvbG9yJywnIzc3NycpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsJyNlZWUnKS5wcm9wKCdyZWFkb25seScsJ3RydWUnKTsKICAgICAgICAgICAgJCgnI3JvY2tldGNoYXQtaWZyYW1lJykuY29udGVudHMoKS5maW5kKCdzZWxlY3RbbmFtZT1kZXBhcnRtZW50XSBvcHRpb246Y29udGFpbnMoIlNlbGVjdCBhIGRlcGFydG1lbnQiKScpLmdldCgwKS5yZW1vdmUoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIE1hcmsgYXMgY2xlYW5lZCBzbyB3ZSBkb24ndCBwZXJmb3JtIGl0IGFnYWluCiAgICAgICAgICAgIFJvY2tldENoYXRQcmVGb3JtQ2xlYW49MTsKICAgICAgICB9CiAgICB9KTsKICAgIHRoaXMuc2V0Q3VzdG9tRmllbGQoJ3VzZXJuYW1lJywgJ1slIERhdGEuVXNlckxvZ2luICVdJyk7CiAgICAvL0RpZmVyZW7Dp2EgICAgCiAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICB2YXIgbiA9IGQuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgIHRoaXMuc2V0Q3VzdG9tRmllbGQoJ3RpbWV6b25lJywgbik7Cn0pOwoKPC9zY3JpcHQ+Cg==</File>
        <File Location="Kernel/Output/HTML/Templates/Standard/RocketChat/ChatTemplate.tt" Permission="644" Encode="Base64">PHN0eWxlPgoqIHsKICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sIEFyaWFsLCBWZXJkYW5hLCBTYW5zIFNlcmlmLCBTYW5zU2VyaWYsIFNhbnMtU2VyaWY7CiAgICBjb2xvcjogIzMzMzsKICAgIGZvbnQtc2l6ZTogMTBwdDsKfQouUm9ja2V0Q2hhdERhdGUgewogICAgZm9udC1zaXplOiAxMHB0OwogICAgdGV4dC1hbGlnbjpjZW50ZXI7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHRvcDogLTE2cHg7CiAgICB3aWR0aDogMTIwcHg7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIG1hcmdpbi1yaWdodDogYXV0bzsKfQouUm9ja2V0Q2hhdExlZnQgewogICAgZmxvYXQ6IGxlZnQ7CiAgICBwYWRkaW5nOiA1cHg7CiAgICB3aWR0aDogNDVweDsKfQouUm9ja2V0Q2hhdEF1dGhvcnsKICAgIHBhZGRpbmctdG9wOiA2cHg7CiAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGNvbG9yOiAjMzMzOwp9Ci5Sb2NrZXRDaGF0VGltZXsKICAgIGNvbG9yOiAjODg4OwogICAgZm9udC1zdHlsZTogaXRhbGljOwogICAgZm9udC1zaXplOiA5cHQ7Cn0KLlJvY2tldENoYXRSaWdodHsKICAgIG1pbi1oZWlnaHQ6NTBweDsKICAgIG1hcmdpbi1sZWZ0OjU2cHg7CiAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgZGlzcGxheTpibG9jazsKfQouUm9ja2V0Q2hhdE1lc3NhZ2V7CiAgICBkaXNwbGF5OiBibG9jazsKfQo8L3N0eWxlPgo8ZGl2IGNsYXNzPSJSb2NrZXRDaGF0Q2hhdCI+CiMgWyUgUmVuZGVyQmxvY2tTdGFydCgiUm93IikgJV0KI1slIFJlbmRlckJsb2NrU3RhcnQoIkRhdGUiKSAlXQojICAgIDxoci8+CiMgICAgPGRpdiBjbGFzcz0iUm9ja2V0Q2hhdERhdGUiPlslIERhdGEuQ29udGVudCB8IExvY2FsaXplKCJEYXRlIikgJV08L2Rpdj4KI1slIFJlbmRlckJsb2NrRW5kKCJEYXRlIikgJV0KClslIFJlbmRlckJsb2NrU3RhcnQoIkF1dGhvciIpICVdCiAgICA8ZGl2IGNsYXNzPSJSb2NrZXRDaGF0TGVmdCI+CiAgICAgICAgICAgIFslIERhdGEuTGVmdCAlXQogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJSb2NrZXRDaGF0UmlnaHQiPgogICAgICAgIDxzcGFuIGNsYXNzPSJSb2NrZXRDaGF0QXV0aG9yIj4KICAgICAgICAgICAgPGI+WyUgRGF0YS5BdXRob3IgfCBodG1sICVdPC9iPiAKICAgICAgICAgICAgPHNwYW4gY2xhc3M9IlJvY2tldENoYXRUaW1lIj5bJSBEYXRhLlRpbWUgfCBMb2NhbGl6ZSgiVGltZVNob3J0IikgJV08L3NwYW4+CiAgICAgICAgPC9zcGFuPgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJNZXNzYWdlIikgJV0KICAgICAgICA8c3BhbiBjbGFzcz0iUm9ja2V0Q2hhdE1lc3NhZ2UiPgogICAgICAgICAgICBbJSBEYXRhLkNvbnRlbnQgJV0KICAgICAgICA8L3NwYW4+ClslIFJlbmRlckJsb2NrRW5kKCJNZXNzYWdlIikgJV0KICAgIDwvZGl2PgpbJSBSZW5kZXJCbG9ja0VuZCgiQXV0aG9yIikgJV0KIyBbJSBSZW5kZXJCbG9ja0VuZCgiUm93IikgJV0KPC9kaXY+Cg==</File>
        <File Location="var/packagesetup/RocketChat.pm" Permission="644" Encode="Base64">IyAtLQojIFRoaXMgc29mdHdhcmUgY29tZXMgd2l0aCBBQlNPTFVURUxZIE5PIFdBUlJBTlRZLiBGb3IgZGV0YWlscywgc2VlCiMgdGhlIGVuY2xvc2VkIGZpbGUgQ09QWUlORyBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbiAoQUdQTCkuIElmIHlvdQojIGRpZCBub3QgcmVjZWl2ZSB0aGlzIGZpbGUsIHNlZSBodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvYWdwbC50eHQuCiMgLS0KCnBhY2thZ2UgdmFyOjpwYWNrYWdlc2V0dXA6OlJvY2tldENoYXQ7Cgo9aGVhZDEgQURET04KClJvY2tldENoYXQKCgo9aGVhZDEgTkFNRQoKdmFyOjpwYWNrYWdlc2V0dXA6OlJvY2tldENoYXQgLSBBZGRPbiBBdXRvIGluc3RhbGxlciBzY3JpcHQKCgo9aGVhZDEgU1lOT1BTSVMKCkNyZWF0ZSBhIFJvY2tldENoYXQgZGVmYXVsdCBXZWIgU2VydmljZSBvbiBPVFJTCgo9aGVhZDEgUFVCTElDIElOVEVSRkFDRQoKPW92ZXIgNAoKPWN1dAoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKdXNlIEtlcm5lbDo6T3V0cHV0OjpUZW1wbGF0ZTo6UHJvdmlkZXI7CgpvdXIgQE9iamVjdERlcGVuZGVuY2llcyA9ICgKICAgICdLZXJuZWw6OkNvbmZpZycsCiAgICAnS2VybmVsOjpTeXN0ZW06OkRCJywKICAgICdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkJywKICAgICdLZXJuZWw6OlN5c3RlbTo6TG9nJywKICAgICdLZXJuZWw6OlN5c3RlbTo6U3RhdGUnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpTdGF0cycsCiAgICAnS2VybmVsOjpTeXN0ZW06OlN5c0NvbmZpZycsCiAgICAnS2VybmVsOjpTeXN0ZW06OlR5cGUnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpWYWxpZCcsCik7Cgo9aXRlbSBuZXcoKQoKQ3JlYXRlcyB0aGUgT2JqZWN0Cgo9Y3V0CnN1YiBuZXcgewogICAgbXkgKCAkVHlwZSwgJVBhcmFtICkgPSBAXzsKCiAgICAjIGFsbG9jYXRlIG5ldyBoYXNoIGZvciBvYmplY3QKICAgIG15ICRTZWxmID0ge307CiAgICBibGVzcyggJFNlbGYsICRUeXBlICk7CgogICAgcmV0dXJuICRTZWxmOwp9Cgo9aXRlbSBuZXcoKQoKQ2FsbCBhbGwgc3Vicm91dGluZXMgbmVlZGVkIHRvIHRoZSBwYWNrYWdlIGluc3RhbGxhdGlvbgoKPWN1dApzdWIgQ29kZUluc3RhbGwgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICAkU2VsZi0+X0NyZWF0ZUR5bmFtaWNGaWVsZHMoKTsKCSMkU2VsZi0+X1VwZGF0ZUNvbmZpZygpOwogICAgJFNlbGYtPiBfQ3JlYXRlV2ViU2VydmljZXMoKTsKICAgIHJldHVybiAxOwp9Cgo9aXRlbSBuZXcoKQoKQ2FsbCBhbGwgc3Vicm91dGluZXMgbmVlZGVkIHRvIHRoZSBwYWNrYWdlIFVwZ3JhZGUKCj1jdXQKc3ViIENvZGVVcGdyYWRlIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgIyRTZWxmLT5fQ3JlYXRlRHluYW1pY0ZpZWxkcygpOwogICAgJFNlbGYtPl9DcmVhdGVXZWJTZXJ2aWNlcygpOwogICAgIyRTZWxmLT5fVXBkYXRlQ29uZmlnKCk7CgkKICAgIHJldHVybiAxOwp9CgpzdWIgX1VwZGF0ZUNvbmZpZyB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIG15ICRTeXNDb25maWdPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6U3lzQ29uZmlnJyk7CiMgICAgbXkgQENvbmZpZ3MgPSAoCiMgICAgICAgIHsKIyAgICAgICAgICAgIENvbmZpZ0l0ZW0gPT4gJ0N1c3RvbWVyRnJvbnRlbmQ6OkNvbW1vblBhcmFtIyMjQWN0aW9uJywKIyAgICAgICAgICAgIFZhbHVlIAkgICA9PiAnQ3VzdG9tZXJTZXJ2aWNlQ2F0YWxvZycKIyAgICAgICAgfSwKIyAgICApOwoKIyAgICBDT05GSUdJVEVNOgojICAgIGZvciBteSAkQ29uZmlnIChAQ29uZmlncykgewojICAgICAgICAjIHNldCBuZXcgc2V0dGluZywKIyAgICAgICAgbXkgJFN1Y2Nlc3MgPSAkU3lzQ29uZmlnT2JqZWN0LT5Db25maWdJdGVtVXBkYXRlKAojICAgICAgICAgICAgVmFsaWQgPT4gMSwKIyAgICAgICAgICAgIEtleSAgID0+ICRDb25maWctPntDb25maWdJdGVtfSwKIyAgICAgICAgICAgIFZhbHVlID0+ICRDb25maWctPntWYWx1ZX0sCiMgICAgICAgICk7CgojICAgIH0KCiAgICByZXR1cm4gMTsKfQoKc3ViIF9DcmVhdGVEeW5hbWljRmllbGRzIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgbXkgJFZhbGlkSUQgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VmFsaWQnKS0+VmFsaWRMb29rdXAoCiAgICAgICAgVmFsaWQgPT4gJ3ZhbGlkJywKICAgICk7CgogICAgIyBnZXQgYWxsIGN1cnJlbnQgZHluYW1pYyBmaWVsZHMKICAgIG15ICREeW5hbWljRmllbGRMaXN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcpLT5EeW5hbWljRmllbGRMaXN0R2V0KAogICAgICAgIFZhbGlkID0+IDAsCiAgICApOwoKICAgICMgZ2V0IHRoZSBsaXN0IG9mIG9yZGVyIG51bWJlcnMgKGlzIGFscmVhZHkgc29ydGVkKS4KICAgIG15IEBEeW5hbWljZmllbGRPcmRlckxpc3Q7CiAgICBmb3IgbXkgJER5bmFtaWNmaWVsZCAoIEB7JER5bmFtaWNGaWVsZExpc3R9ICkgewogICAgICAgIHB1c2ggQER5bmFtaWNmaWVsZE9yZGVyTGlzdCwgJER5bmFtaWNmaWVsZC0+e0ZpZWxkT3JkZXJ9OwogICAgfQoKICAgICMgZ2V0IHRoZSBsYXN0IGVsZW1lbnQgZnJvbSB0aGUgb3JkZXIgbGlzdCBhbmQgYWRkIDEKICAgIG15ICROZXh0T3JkZXJOdW1iZXIgPSAxOwogICAgaWYgKEBEeW5hbWljZmllbGRPcmRlckxpc3QpIHsKICAgICAgICAkTmV4dE9yZGVyTnVtYmVyID0gJER5bmFtaWNmaWVsZE9yZGVyTGlzdFstMV0gKyAxOwogICAgfQoKICAgICMgZ2V0IHRoZSBkZWZpbml0aW9uIGZvciBhbGwgZHluYW1pYyBmaWVsZHMgZm9yIElUU00KICAgIG15IEBEeW5hbWljRmllbGRzID0gJFNlbGYtPl9HZXRJVFNNRHluYW1pY0ZpZWxkc0RlZmluaXRpb24oKTsKCiAgICAjIGNyZWF0ZSBhIGR5bmFtaWMgZmllbGRzIGxvb2t1cCB0YWJsZQogICAgbXkgJUR5bmFtaWNGaWVsZExvb2t1cDsKICAgIERZTkFNSUNGSUVMRDoKICAgIGZvciBteSAkRHluYW1pY0ZpZWxkICggQHskRHluYW1pY0ZpZWxkTGlzdH0gKSB7CiAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgcmVmICREeW5hbWljRmllbGQgbmUgJ0hBU0gnOwogICAgICAgICREeW5hbWljRmllbGRMb29rdXB7ICREeW5hbWljRmllbGQtPntOYW1lfSB9ID0gJER5bmFtaWNGaWVsZDsKICAgIH0KCiAgICAjIGNyZWF0ZSBvciB1cGRhdGUgZHluYW1pYyBmaWVsZHMKICAgIERZTkFNSUNGSUVMRDoKICAgIGZvciBteSAkRHluYW1pY0ZpZWxkIChARHluYW1pY0ZpZWxkcykgewoKICAgICAgICBteSAkQ3JlYXRlRHluYW1pY0ZpZWxkOwoKICAgICAgICBpZiAoIHJlZiAkRHluYW1pY0ZpZWxkTG9va3VweyAkRHluYW1pY0ZpZWxkLT57TmFtZX0gfSBlcSAnSEFTSCcgKSB7CiAgICAgICAgICAgICMgRGVsZXRlcyBERgogICAgICAgICAgICBteSAkRHluYW1pY0ZpZWxkSUQgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkJyktPkR5bmFtaWNGaWVsZEdldCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAkRHluYW1pY0ZpZWxkLT57TmFtZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmICgkRHluYW1pY0ZpZWxkSUQtPntJRH0pewogICAgICAgICAgICAgICAgICBteSAkU3VjY2VzcyA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQnKS0+RHluYW1pY0ZpZWxkRGVsZXRlKAogICAgICAgICAgICAgICAgICAgSUQgICAgICA9PiAkRHluYW1pY0ZpZWxkSUQtPntJRH0sCiAgICAgICAgICAgICAgICAgICBVc2VySUQgID0+IDEsCiAgICAgICAgICAgICAgICAgICBSZW9yZGVyID0+IDEsICAgICAgICAgICAgICAgIyBvciAwLCB0byB0cmlnZ2VyIHJlb3JkZXIgZnVuY3Rpb24sIGRlZmF1bHQgMQogICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIGNoZWNrIGlmIG5ldyBmaWVsZCBoYXMgdG8gYmUgY3JlYXRlZAojICAgICAgICBpZiAoJENyZWF0ZUR5bmFtaWNGaWVsZCkgewoKCiAgICAgICAgICAgICMgY3JlYXRlIGEgbmV3IGZpZWxkCiAgICAgICAgICAgIG15ICRGaWVsZElEID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcpLT5EeW5hbWljRmllbGRBZGQoCiAgICAgICAgICAgICAgICBJbnRlcm5hbEZpZWxkID0+IDEsCiAgICAgICAgICAgICAgICBOYW1lICAgICAgICAgID0+ICREeW5hbWljRmllbGQtPntOYW1lfSwKICAgICAgICAgICAgICAgIExhYmVsICAgICAgICAgPT4gJER5bmFtaWNGaWVsZC0+e0xhYmVsfSwKICAgICAgICAgICAgICAgIEZpZWxkT3JkZXIgICAgPT4gJE5leHRPcmRlck51bWJlciwKICAgICAgICAgICAgICAgIEZpZWxkVHlwZSAgICAgPT4gJER5bmFtaWNGaWVsZC0+e0ZpZWxkVHlwZX0sCiAgICAgICAgICAgICAgICBPYmplY3RUeXBlICAgID0+ICREeW5hbWljRmllbGQtPntPYmplY3RUeXBlfSwKICAgICAgICAgICAgICAgIENvbmZpZyAgICAgICAgPT4gJER5bmFtaWNGaWVsZC0+e0NvbmZpZ30sCiAgICAgICAgICAgICAgICBWYWxpZElEICAgICAgID0+ICRWYWxpZElELAogICAgICAgICAgICAgICAgVXNlcklEICAgICAgICA9PiAxLAogICAgICAgICAgICApOwogICAgICAgICAgICBuZXh0IERZTkFNSUNGSUVMRCBpZiAhJEZpZWxkSUQ7CgogICAgICAgICAgICAjIGluY3JlYXNlIHRoZSBvcmRlciBudW1iZXIKICAgICAgICAgICAgJE5leHRPcmRlck51bWJlcisrOwojICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIDE7Cn0KCnN1YiBfR2V0SVRTTUR5bmFtaWNGaWVsZHNEZWZpbml0aW9uIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgIyBkZWZpbmUgYWxsIGR5bmFtaWMgZmllbGRzIGZvciBJVFNNCiAgICBteSBARHluYW1pY0ZpZWxkcyA9ICgKICAgICAgICB7CiAgICAgICAgICAgIE5hbWUgICAgICAgPT4gJ1JvY2tldENoYXRMaXZlQ2hhdElEJywKICAgICAgICAgICAgTGFiZWwgICAgICA9PiAnUm9ja2V0Q2hhdExpdmVDaGF0SUQnLAogICAgICAgICAgICBGaWVsZFR5cGUgID0+ICdUZXh0JywKICAgICAgICAgICAgT2JqZWN0VHlwZSA9PiAnVGlja2V0JywKICAgICAgICAgICAgQ29uZmlnICAgICA9PiB7CiAgICAgICAgICAgICAgICBEZWZhdWx0VmFsdWUgICA9PiAnJywKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgKTsKCiAgICByZXR1cm4gQER5bmFtaWNGaWVsZHM7Cn0KCnN1YiBfQ3JlYXRlV2ViU2VydmljZXMgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICAjVmVyaWZ5IGlmIGl0IGFscmVhZHkgZXhpc3RzCiAgICBteSAkTGlzdCAgICAgICAgICAgICA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpHZW5lcmljSW50ZXJmYWNlOjpXZWJzZXJ2aWNlJyktPldlYnNlcnZpY2VMaXN0KCk7CiAgICBteSAlV2ViU2VydmljZUxvb2t1cCA9IHJldmVyc2UgJXskTGlzdH07CiAgICBteSAkTmFtZSA9ICdSb2NrZXRDaGF0JzsKICAgIGlmICggJFdlYlNlcnZpY2VMb29rdXB7JE5hbWV9ICkgewogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgICMgaWYgZG9lc24ndCBleGlzdHMKICAgIG15ICRZQU1MID0gPDwiX0VORF8iOwotLS0KRGVidWdnZXI6CiAgRGVidWdUaHJlc2hvbGQ6IGRlYnVnCiAgVGVzdE1vZGU6ICcwJwpEZXNjcmlwdGlvbjogJycKRnJhbWV3b3JrVmVyc2lvbjogNS4wLnggZ2l0ClByb3ZpZGVyOgogIE9wZXJhdGlvbjoKICAgIENoYXQ6CiAgICAgIERlc2NyaXB0aW9uOiAnJwogICAgICBNYXBwaW5nSW5ib3VuZDoKICAgICAgICBDb25maWc6CiAgICAgICAgICBUZW1wbGF0ZTogIjw/eG1sIHZlcnNpb249XFwiMS4wXFwiIGVuY29kaW5nPVxcIlVURi04XFwiPz5cXHJcXG48eHNsOnN0eWxlc2hlZXQKICAgICAgICAgICAgdmVyc2lvbj1cXCIxLjBcXCIgeG1sbnM6eHNsPVxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkvWFNML1RyYW5zZm9ybVxcIj5cXHJcXG4KICAgICAgICAgICAgXFwgPCEtLVxcclxcbiAgICAgICBEZXBhcnRtZW50IGZpZWxkIG1hcHBpbmcgdG8gcXVldWUgZm9yIG5ldyB0aWNrZXQgY3JlYXRpb25cXHJcXG4KICAgICAgICAgICAgXFwgLS0+XFxyXFxuICA8eHNsOnZhcmlhYmxlIG5hbWU9XFwiZGVwdG9cXCI+XFxyXFxuICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcIi8vdmlzaXRvci9kZXBhcnRtZW50XFwiCiAgICAgICAgICAgIC8+XFxyXFxuICA8L3hzbDp2YXJpYWJsZT5cXHJcXG4gIDx4c2w6dmFyaWFibGUgbmFtZT1cXCJkZXB0b3RyYW5zXFwiPlxcclxcbiAgICA8eHNsOmNob29zZT5cXHJcXG4KICAgICAgICAgICAgXFwgICAgIDx4c2w6d2hlbiB0ZXN0PVxcIlwkZGVwdG89JydcXCI+UmF3PC94c2w6d2hlbj5cXHJcXG4gICAgICA8eHNsOndoZW4gdGVzdD1cXCJcJGRlcHRvPSc0RlNqUjVIZEd6enlja0t0RSdcXCI+UmF3PC94c2w6d2hlbj5cXHJcXG4KICAgICAgICAgICAgXFwgICAgIDx4c2w6d2hlbiB0ZXN0PVxcIlwkZGVwdG89J0U3UzdhNXlzS2F4S2VFWjdZJ1xcIj5SYXc8L3hzbDp3aGVuPlxcclxcbgogICAgICAgICAgICBcXCAgICAgPHhzbDp3aGVuIHRlc3Q9XFwiXCRkZXB0bz0nRTdTN2E1eXNLYXhLZUVaN1knXFwiPlJhdzwveHNsOndoZW4+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICA8eHNsOm90aGVyd2lzZT5SYXc8L3hzbDpvdGhlcndpc2U+XFxyXFxuICAgIDwveHNsOmNob29zZT5cXHJcXG4gIDwveHNsOnZhcmlhYmxlPlxcclxcbjwhLS1cXHJcXG4KICAgICAgICAgICAgXFwgQ29weSBhbGwgdGhlIGVsZW1lbnRzXFxyXFxuLS0+XFxyXFxuICA8eHNsOnRlbXBsYXRlIG1hdGNoPVxcIm5vZGUoKSB8IEAqXFwiPlxcclxcbgogICAgICAgICAgICBcXCAgIDx4c2w6Y29weT5cXHJcXG4gICAgICA8eHNsOmFwcGx5LXRlbXBsYXRlcyBzZWxlY3Q9XFwibm9kZSgpIHwgQCpcXCIgLz5cXHJcXG4KICAgICAgICAgICAgXFwgICA8L3hzbDpjb3B5PlxcclxcbiAgPC94c2w6dGVtcGxhdGU+XFxyXFxuPCEtLVxcclxcbiAgQWRkIFxcIlF1ZXVlXFwiLFxcIlByaW9yaXR5XFwiLFxcIlN0YXRlXFwiLi4uCiAgICAgICAgICAgIG5vZGVzIGZvciBuZXcgdGlja2V0IGNyZWF0aW9uXFxyXFxuICBZb3UgY2FuL2hhdmUgdG8gbWFrZSB5b3VyIGFkanVzdG1lbnQKICAgICAgICAgICAgaGVyZVxcclxcbi0tPlxcclxcbiAgICA8eHNsOnRlbXBsYXRlIG1hdGNoPVxcIlJvb3RFbGVtZW50XFwiPlxcclxcbiAgICAgICAgPHhzbDpjb3B5PlxcclxcbgogICAgICAgICAgICBcXCAgICAgICAgICAgPE5ld1RpY2tldE5vdGlmaWNhdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgPFJvY2tldENoYXRBUElVcmw+aHR0cDovLzE3Mi4xNy4wLjE6MzAwMC9hcGkvdjEvbGl2ZWNoYXQvbWVzc2FnZTwvUm9ja2V0Q2hhdEFQSVVybD5cXHJcXG4KICAgICAgICAgICAgXFwgICAgICAgICAgICAgICA8TWVzc2FnZT5UaGUgZm9sbG93aW5nIHRpY2tldCB3YXMgY3JlYXRlZCBmb3IgdGhpcyBjaGF0OlxcXFxuXCVzPC9NZXNzYWdlPlxcclxcbgogICAgICAgICAgICBcXCAgICAgICAgICAgPC9OZXdUaWNrZXROb3RpZmljYXRpb24+XFxyXFxuICAgICAgICAgICAgPE5ld0NoYXQ+XFxyXFxuICAgICAgICAgICAgICAgPFF1ZXVlPlxcclxcbgogICAgICAgICAgICBcXCAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcIlwkZGVwdG90cmFuc1xcIiAvPlxcclxcbiAgICAgICAgICAgICAgIDwvUXVldWU+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICAgICAgICAgICA8U3RhdGU+bmV3PC9TdGF0ZT5cXHJcXG4gICAgICAgICAgICAgICA8TG9jaz51bmxvY2s8L0xvY2s+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICAgICAgICAgICA8UHJpb3JpdHk+MyBub3JtYWw8L1ByaW9yaXR5PlxcclxcbiAgICAgICAgICAgICAgIDxPd25lcklEPjE8L093bmVySUQ+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICAgICAgICAgICA8VXNlcklEPjE8L1VzZXJJRD5cXHJcXG4gICAgICAgICAgICA8L05ld0NoYXQ+XFxyXFxuICAgICAgICAgICAgPENoYXRDbG9zZWQ+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICAgICAgICAgICA8U3RhdGU+Y2xvc2VkIHN1Y2Nlc3NmdWw8L1N0YXRlPlxcclxcbiAgICAgICAgICAgICAgIDxMb2NrPnVubG9jazwvTG9jaz5cXHJcXG4KICAgICAgICAgICAgXFwgICAgICAgICAgIDwvQ2hhdENsb3NlZD5cXHJcXG4gICAgICAgICAgIDx4c2w6YXBwbHktdGVtcGxhdGVzIHNlbGVjdD1cXCJAKnxub2RlKClcXCIvPlxcclxcbgogICAgICAgICAgICBcXCAgICAgICA8L3hzbDpjb3B5PlxcclxcbiAgICA8L3hzbDp0ZW1wbGF0ZT5cXHJcXG4gICAgPHhzbDp0ZW1wbGF0ZSBtYXRjaD1cXCJjb250ZW50XFwiCiAgICAgICAgICAgIC8+XFxyXFxuPC94c2w6c3R5bGVzaGVldD4iCiAgICAgICAgVHlwZTogWFNMVAogICAgICBNYXBwaW5nT3V0Ym91bmQ6IHt9CiAgICAgIFR5cGU6IFJvY2tldENoYXQ6OkluY29taW5nQ2hhdAogIFRyYW5zcG9ydDoKICAgIENvbmZpZzoKICAgICAgS2VlcEFsaXZlOiAnJwogICAgICBNYXhMZW5ndGg6ICc5OTk5OTk5OTknCiAgICAgIFJvdXRlT3BlcmF0aW9uTWFwcGluZzoKICAgICAgICBDaGF0OgogICAgICAgICAgUmVxdWVzdE1ldGhvZDoKICAgICAgICAgIC0gR0VUCiAgICAgICAgICAtIFBPU1QKICAgICAgICAgIFJvdXRlOiAvCiAgICBUeXBlOiBIVFRQOjpSRVNUClJlbW90ZVN5c3RlbTogJycKUmVxdWVzdGVyOgogIFRyYW5zcG9ydDoKICAgIFR5cGU6ICcnCgpfRU5EXwoKICAgIG15ICRDb25maWcgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6WUFNTCcpLT5Mb2FkKCBEYXRhID0+ICRZQU1MICk7CgogICAgIyBhZGQgbmV3IHdlYiBzZXJ2aWNlCiAgICBteSAkSUQgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6R2VuZXJpY0ludGVyZmFjZTo6V2Vic2VydmljZScpLT5XZWJzZXJ2aWNlQWRkKAogICAgICAgIE5hbWUgICAgPT4gJE5hbWUsCiAgICAgICAgQ29uZmlnICA9PiAkQ29uZmlnLAogICAgICAgIFZhbGlkSUQgPT4gMSwKICAgICAgICBVc2VySUQgID0+IDEsCiAgICApOwoKICAgIHJldHVybiAxOyAgIAp9Cj1iYWNrCjEK</File>
        <File Location="Kernel/System/Ticket/Event/NotificationEvent/Transport/RocketChat.pm" Permission="644" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAwMS0yMDE4IENvbXBsZW1lbnRvLCBodHRwOi8vY29tcGxlbWVudG8ubmV0LmJyLwojIC0tCiMgVGhpcyBzb2Z0d2FyZSBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFkuIEZvciBkZXRhaWxzLCBzZWUKIyB0aGUgZW5jbG9zZWQgZmlsZSBDT1BZSU5HIGZvciBsaWNlbnNlIGluZm9ybWF0aW9uIChBR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9hZ3BsLnR4dC4KIyAtLQoKcGFja2FnZSBLZXJuZWw6OlN5c3RlbTo6VGlja2V0OjpFdmVudDo6Tm90aWZpY2F0aW9uRXZlbnQ6OlRyYW5zcG9ydDo6Um9ja2V0Q2hhdDsKIyMgbm9maWx0ZXIoVGlkeUFsbDo6UGx1Z2luOjpPVFJTOjpQZXJsOjpMYXlvdXRPYmplY3QpCiMjIG5vZmlsdGVyKFRpZHlBbGw6OlBsdWdpbjo6T1RSUzo6UGVybDo6UGFyYW1PYmplY3QpCgp1c2Ugc3RyaWN0Owp1c2Ugd2FybmluZ3M7CnVzZSBKU09OOjpQUDsKCnVzZSBMV1A7CnVzZSBIVFRQOjpSZXF1ZXN0Owp1c2UgWE1MOjpTaW1wbGU7CnVzZSBFbmNvZGUgcXcoZGVjb2RlIGVuY29kZSk7CnVzZSBNSU1FOjpCYXNlNjQ7CnVzZSBEYXRhOjpEdW1wZXI7CnVzZSB1dGY4OwoKdXNlIEtlcm5lbDo6U3lzdGVtOjpWYXJpYWJsZUNoZWNrIHF3KDphbGwpOwp1c2UgS2VybmVsOjpMYW5ndWFnZSBxdyhUcmFuc2xhdGFibGUpOwoKdXNlIGJhc2UgcXcoS2VybmVsOjpTeXN0ZW06OlRpY2tldDo6RXZlbnQ6Ok5vdGlmaWNhdGlvbkV2ZW50OjpUcmFuc3BvcnQ6OkVtYWlsKTsKCm91ciBAT2JqZWN0RGVwZW5kZW5jaWVzID0gKAogICAgJ0tlcm5lbDo6Q29uZmlnJywKICAgICdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0JywKICAgICdLZXJuZWw6OlN5c3RlbTo6Q3VzdG9tZXJVc2VyJywKICAgICdLZXJuZWw6OlN5c3RlbTo6RW1haWwnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpMb2cnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpNYWluJywKICAgICdLZXJuZWw6OlN5c3RlbTo6UXVldWUnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpTeXN0ZW1BZGRyZXNzJywKICAgICdLZXJuZWw6OlN5c3RlbTo6VGlja2V0JywKICAgICdLZXJuZWw6OlN5c3RlbTo6VXNlcicsCiAgICAnS2VybmVsOjpTeXN0ZW06OldlYjo6UmVxdWVzdCcsCiAgICAnS2VybmVsOjpTeXN0ZW06OkNyeXB0OjpQR1AnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpDcnlwdDo6U01JTUUnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQ6OkJhY2tlbmQnLAopOwoKPWhlYWQxIE5BTUUKCktlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkV2ZW50OjpOb3RpZmljYXRpb25FdmVudDo6VHJhbnNwb3J0OjpTbXNOb3RpZnkgLSBzbXMgdHJhbnNwb3J0IGxheWVyCgo9aGVhZDEgU1lOT1BTSVMKCk5vdGlmaWNhdGlvbiBldmVudCB0cmFuc3BvcnQgbGF5ZXIuCgo9aGVhZDEgUFVCTElDIElOVEVSRkFDRQoKPW92ZXIgNAoKPWN1dAoKPWl0ZW0gbmV3KCkKCmNyZWF0ZSBhIG5vdGlmaWNhdGlvbiB0cmFuc3BvcnQgb2JqZWN0LiBEbyBub3QgdXNlIGl0IGRpcmVjdGx5LCBpbnN0ZWFkIHVzZToKCiAgICB1c2UgS2VybmVsOjpTeXN0ZW06Ok9iamVjdE1hbmFnZXI7CiAgICBsb2NhbCAkS2VybmVsOjpPTSA9IEtlcm5lbDo6U3lzdGVtOjpPYmplY3RNYW5hZ2VyLT5uZXcoJycpOwogICAgbXkgJFRyYW5zcG9ydE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkV2ZW50OjpOb3RpZmljYXRpb25FdmVudDo6VHJhbnNwb3J0OjpTbXNOb3RpZnknKTsKCj1jdXQKCiNzdWIgbmV3IHsKICAgICNteSAoICRUeXBlLCAlUGFyYW0gKSA9IEBfOwoKICAgICMjIGFsbG9jYXRlIG5ldyBoYXNoIGZvciBvYmplY3QKICAgICNteSAkU2VsZiA9IHt9OwogICAgI2JsZXNzKCAkU2VsZiwgJFR5cGUgKTsKCiAgICAjcmV0dXJuICRTZWxmOwojfQoKc3ViIFNlbmROb3RpZmljYXRpb24gewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICAjIGNoZWNrIG5lZWRlZCBzdHVmZgogICAgZm9yIG15ICROZWVkZWQgKHF3KFRpY2tldElEIFVzZXJJRCBOb3RpZmljYXRpb24gUmVjaXBpZW50KSkgewogICAgICAgIGlmICggISRQYXJhbXskTmVlZGVkfSApIHsKICAgICAgICAgICAgJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkxvZycpLT5Mb2coCiAgICAgICAgICAgICAgICBQcmlvcml0eSA9PiAnZXJyb3InLAogICAgICAgICAgICAgICAgTWVzc2FnZSAgPT4gJ05lZWQgJE5lZWRlZCEnLAogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfQoKICAgICMgY2xlYW51cCBldmVudCBkYXRhCiAgICAkU2VsZi0+e0V2ZW50RGF0YX0gPSB1bmRlZjsKCiAgICAjIGdldCBuZWVkZWQgb2JqZWN0cwogICAgbXkgJENvbmZpZ09iamVjdCAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OkNvbmZpZycpOwogICAgbXkgJFN5c3RlbUFkZHJlc3NPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6U3lzdGVtQWRkcmVzcycpOwogICAgbXkgJExheW91dE9iamVjdCAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0Jyk7CgoKICAgIG15ICVOb3RpZmljYXRpb24gPSAleyAkUGFyYW17Tm90aWZpY2F0aW9ufSB9OwoKICAgIHJldHVybiBpZiAhJFBhcmFte05vdGlmaWNhdGlvbn0tPntEYXRhfS0+e1JlY2lwaWVudFdlYmhvb2tVUkx9OwoKICAgICMgZ2V0IHRpY2tldCBvYmplY3QKICAgIG15ICRUaWNrZXRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VGlja2V0Jyk7CgogICAgIyBzZW5kIG5vdGlmaWNhdGlvbgogICAgbXkgJFNlbnQgPSAkU2VsZi0+X1NjaGVkdWxlTWVzc2FnZSgKICAgICAgICAgICAgICAgICAgICBTdWJqZWN0ICAgICAgICAgICAgID0+ICROb3RpZmljYXRpb257U3ViamVjdH0sCiAgICAgICAgICAgICAgICAgICAgQm9keSAgICAgICAgICAgICAgICA9PiAkTm90aWZpY2F0aW9ue0JvZHl9LAogICAgICAgICAgICAgICAgICAgIFJlY2lwaWVudFdlYmhvb2tVUkwgPT4gJFBhcmFte05vdGlmaWNhdGlvbn0tPntEYXRhfS0+e1JlY2lwaWVudFdlYmhvb2tVUkx9CiAgICAgICAgICAgICAgICAgICAgKTsKCiAgICBpZiAoICEkU2VudCApIHsKICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6TG9nJyktPkxvZygKICAgICAgICAgICAgUHJpb3JpdHkgPT4gJ2Vycm9yJywKICAgICAgICAgICAgTWVzc2FnZSAgPT4gIickTm90aWZpY2F0aW9ue05hbWV9JyBub3RpZmljYXRpb24gY291bGQgbm90IGJlIHNlbnQgdG8gUm9ja2V0LkNoYXQiLAogICAgICAgICk7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgICMgbG9nIGV2ZW50CiAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6TG9nJyktPkxvZygKICAgICAgICBQcmlvcml0eSA9PiAnaW5mbycsCiAgICAgICAgTWVzc2FnZSAgPT4gIlNlbnQgYWdlbnQgJyROb3RpZmljYXRpb257TmFtZX0nIG5vdGlmaWNhdGlvbiB0byBSb2NrZXQuQ2hhdC4iLAogICAgKTsKCiAgICByZXR1cm4gMTsKfQoKc3ViIEdldFRyYW5zcG9ydFJlY2lwaWVudHMgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBmb3IgbXkgJE5lZWRlZCAocXcoTm90aWZpY2F0aW9uKSkgewogICAgICAgIGlmICggISRQYXJhbXskTmVlZGVkfSApIHsKICAgICAgICAgICAgJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkxvZycpLT5Mb2coCiAgICAgICAgICAgICAgICBQcmlvcml0eSA9PiAnZXJyb3InLAogICAgICAgICAgICAgICAgTWVzc2FnZSAgPT4gIk5lZWQgJE5lZWRlZCIsCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQoKICAgIG15IEBSZWNpcGllbnRzOwoKICAgIG15ICVSZWNpcGllbnQ7CiAgICAkUmVjaXBpZW50e1R5cGV9ICAgICAgICA9ICdBZ2VudCc7CiAgICAkUmVjaXBpZW50e1dlYmhvb2tVUkx9ICA9ICRQYXJhbXtOb3RpZmljYXRpb259LT57RGF0YX0tPntSZWNpcGllbnRXZWJob29rVVJMfTsKCiAgICBwdXNoIEBSZWNpcGllbnRzLCBcJVJlY2lwaWVudDsKICAgIHJldHVybiBAUmVjaXBpZW50czsKfQoKc3ViIFRyYW5zcG9ydFNldHRpbmdzRGlzcGxheUdldCB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIEtFWToKICAgIGZvciBteSAkS2V5IChxdyhSZWNpcGllbnRXZWJob29rVVJMKSkgewogICAgICAgIG5leHQgS0VZIGlmICEkUGFyYW17RGF0YX0tPnskS2V5fTsKICAgICAgICBuZXh0IEtFWSBpZiAhZGVmaW5lZCAkUGFyYW17RGF0YX0tPnskS2V5fS0+WzBdOwogICAgICAgICRQYXJhbXskS2V5fSA9ICRQYXJhbXtEYXRhfS0+eyRLZXl9LT5bMF07CiAgICB9CgogICAgIyBnZXQgbGF5b3V0IG9iamVjdAogICAgbXkgJExheW91dE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKTsKICAgIAogICAgIyBnZW5lcmF0ZSBIVE1MCiAgICBteSAkT3V0cHV0ID0gJExheW91dE9iamVjdC0+T3V0cHV0KAogICAgICAgIFRlbXBsYXRlRmlsZSA9PiAnQWRtaW5Ob3RpZmljYXRpb25FdmVudFRyYW5zcG9ydFJvY2tldENoYXQnLAogICAgICAgIERhdGEgICAgICAgICA9PiBcJVBhcmFtLAogICAgKTsKCiAgICByZXR1cm4gJE91dHB1dDsKfQoKc3ViIFRyYW5zcG9ydFBhcmFtU2V0dGluZ3NHZXQgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBmb3IgbXkgJE5lZWRlZCAocXcoR2V0UGFyYW0pKSB7CiAgICAgICAgaWYgKCAhJFBhcmFteyROZWVkZWR9ICkgewogICAgICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6TG9nJyktPkxvZygKICAgICAgICAgICAgICAgIFByaW9yaXR5ID0+ICdlcnJvcicsCiAgICAgICAgICAgICAgICBNZXNzYWdlICA9PiAiTmVlZCAkTmVlZGVkIiwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgogICAgIyBnZXQgcGFyYW0gb2JqZWN0CiAgICBteSAkUGFyYW1PYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6V2ViOjpSZXF1ZXN0Jyk7CgogICAgUEFSQU1FVEVSOgogICAgZm9yIG15ICRQYXJhbWV0ZXIgKAogICAgICAgIHF3KFJlY2lwaWVudFdlYmhvb2tVUkwpCiAgICAgICAgKQogICAgewogICAgICAgIG15IEBEYXRhID0gJFBhcmFtT2JqZWN0LT5HZXRBcnJheSggUGFyYW0gPT4gJFBhcmFtZXRlciApOwogICAgICAgIG5leHQgUEFSQU1FVEVSIGlmICFARGF0YTsKICAgICAgICAkUGFyYW17R2V0UGFyYW19LT57RGF0YX0tPnskUGFyYW1ldGVyfSA9IFxARGF0YTsKICAgIH0KCiAgICAjIE5vdGU6IEV4YW1wbGUgaG93IHRvIHNldCBlcnJvcnMgYW5kIHVzZSB0aGVtCiAgICAjIG9uIHRoZSBub3JtYWwgQWRtaW5Ob3RpZmljYXRpb25FdmVudCBzY3JlZW4KICAgICMgIyBzZXQgZXJyb3IKICAgICMgJFBhcmFte0dldFBhcmFtfS0+eyRQYXJhbWV0ZXIuJ1NlcnZlckVycm9yJ30gPSAnU2VydmVyRXJyb3InOwoKICAgIHJldHVybiAxOwp9CgpzdWIgX1NjaGVkdWxlTWVzc2FnZSB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKCSMgRm9yIEFzeW5jaHJvbm91cyBzZW5kaW5nCglteSAkVGFza05hbWUgPSBzdWJzdHIgIlJlY2lwaWVudCIucmFuZCgpLiRQYXJhbXtSZWNpcGllbnRXZWJob29rVVJMfSwgMCwgMjU1OwoJCgkjIGNyZWF0ZSBhIG5ldyB0YXNrCglteSAkVGFza0lEID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlNjaGVkdWxlcicpLT5UYXNrQWRkKAoJCVR5cGUgICAgICAgICAgICAgICAgICAgICA9PiAnQXN5bmNocm9ub3VzRXhlY3V0b3InLAoJCU5hbWUgICAgICAgICAgICAgICAgICAgICA9PiAkVGFza05hbWUsCgkJQXR0ZW1wdHMgICAgICAgICAgICAgICAgID0+ICAxLAoJCU1heGltdW1QYXJhbGxlbEluc3RhbmNlcyA9PiAgMCwKCQlEYXRhICAgICAgICAgICAgICAgICAgICAgPT4gewoJCQlPYmplY3QgICA9PiAnS2VybmVsOjpTeXN0ZW06OlRpY2tldDo6RXZlbnQ6Ok5vdGlmaWNhdGlvbkV2ZW50OjpUcmFuc3BvcnQ6OlJvY2tldENoYXQnLAoJCQlGdW5jdGlvbiA9PiAnU2VuZE1lc3NhZ2VSb2NrZXRDaGF0JywKCQkJUGFyYW1zICAgPT4gewoJCQkJCQlSZWNpcGllbnRXZWJob29rVVJMID0+ICRQYXJhbXtSZWNpcGllbnRXZWJob29rVVJMfSwKCQkJCQkJU3ViamVjdCAgICAgICAgICAgICA9PiAkUGFyYW17U3ViamVjdH0sCgkJCQkJCUJvZHkgICAgICAgICAgICAgICAgPT4gJFBhcmFte0JvZHl9LAoJCQkJCX0sCgkJfSwKCSk7Cn0KCnN1YiBTZW5kTWVzc2FnZVJvY2tldENoYXQgewoJbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCgkjIENvbnZlcnQgQm9keSB0byBwdXJlIHRleHQKCSRQYXJhbXtCb2R5fSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpIVE1MVXRpbHMnKS0+VG9Bc2NpaSggU3RyaW5nID0+ICRQYXJhbXtCb2R5fSApOwoJJFBhcmFte0JvZHl9ID0gZW5jb2RlKCJ1dGY4IiwgJFBhcmFte0JvZHl9KTsKCglteSAkdWEgICA9IExXUDo6VXNlckFnZW50LT5uZXc7CgoJbXkgJURhdGE7CgkkRGF0YXt0ZXh0fSA9ICRQYXJhbXtTdWJqZWN0fSAuIlxuXG4iLiRQYXJhbXtCb2R5fTsKCQoJbXkgJGpzb25EYXRhID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkpTT04nKS0+RW5jb2RlKAogICAgICAgIERhdGEgPT4gXCVEYXRhLAogICAgKTsKCgkkdWEtPmRlZmF1bHRfaGVhZGVyKCJDb250ZW50LVR5cGUiID0+ICJhcHBsaWNhdGlvbi9qc29uIik7CgkkdWEtPmRlZmF1bHRfaGVhZGVyKCJBY2NlcHQiID0+ICJhcHBsaWNhdGlvbi9qc29uIik7CgoJbXkgJHJlc3BvbnNlID0gJHVhLT5wb3N0KCRQYXJhbXtSZWNpcGllbnRXZWJob29rVVJMfS0+WzBdLCBDb250ZW50X1R5cGUgPT4gJ2FwcGxpY2F0aW9uL2pzb24nLCBDb250ZW50ID0+ICRqc29uRGF0YSk7CgoJbXkgJFJlc3BvbnNlRGF0YSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpKU09OJyktPkRlY29kZSgKICAgICAgICBEYXRhID0+ICRyZXNwb25zZS0+ZGVjb2RlZF9jb250ZW50LAogICAgKTsKCglpZighJFJlc3BvbnNlRGF0YS0+e3N1Y2Nlc3N9KXsKCQkkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6TG9nJyktPkxvZygKCQkJIFByaW9yaXR5ID0+ICdlcnJvcicsCgkJCSBNZXNzYWdlICA9PiAiRXJyb3Igb24gc2VuZGluZyBtZXNzYWdlIHRvIFJvY2tldC5DaGF0IiwKCQkpOwoJCXJldHVybiAwOwoJfSBlbHNlIHsKCQlyZXR1cm4gMTsKCX0KCn0KMTsKCj1iYWNrCgo9aGVhZDEgVEVSTVMgQU5EIENPTkRJVElPTlMKClRoaXMgc29mdHdhcmUgY29tZXMgd2l0aCBBQlNPTFVURUxZIE5PIFdBUlJBTlRZLiBGb3IgZGV0YWlscywgc2VlCnRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEFHUEwpLiBJZiB5b3UKZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIEw8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0Pi4KCj1jdXQK</File>
        <File Location="Kernel/Output/HTML/Templates/Standard/AdminNotificationEventTransportRocketChat.tt" Permission="644" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAwMS0yMDE4IENvbXBsZW1lbnRvLCBodHRwOi8vd3d3LmNvbXBsZW1lbnRvLm5ldC5icgojIC0tCiMgVGhpcyBzb2Z0d2FyZSBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFkuIEZvciBkZXRhaWxzLCBzZWUKIyB0aGUgZW5jbG9zZWQgZmlsZSBDT1BZSU5HIGZvciBsaWNlbnNlIGluZm9ybWF0aW9uIChBR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9hZ3BsLnR4dC4KIyAtLQoKPHAgY2xhc3M9IkZpZWxkRXhwbGFuYXRpb24iPlslIFRyYW5zbGF0ZSgiVGhpcyBtZXRob2Qgc2VuZHMgdGhlIG5vdGlmaWNhdGlvbiB0byB5b3VyIFJvY2tldC5DaGF0ISIpIHwgaHRtbCAlXTwvcD4KCjxsYWJlbCBmb3I9IlJlY2lwaWVudFdlYmhvb2tVUkwiPlslIFRyYW5zbGF0ZSgiUm9ja2V0LkNoYXQgV2ViaG9vayBVUkwiKSB8IGh0bWwgJV06IDwvbGFiZWw+CjxkaXYgY2xhc3M9IkZpZWxkIj4KICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJSZWNpcGllbnRXZWJob29rVVJMIiBpZD0iUmVjaXBpZW50V2ViaG9va1VSTCIgY2xhc3M9Ilc1MHBjIiB2YWx1ZT0iWyUgRGF0YS5SZWNpcGllbnRXZWJob29rVVJMIHwgaHRtbCAlXSIvPgo8L2Rpdj4KPGRpdiBjbGFzcz0iQ2xlYXIiPjwvZGl2Pgo=</File>
    </Filelist>
</otrs_package>