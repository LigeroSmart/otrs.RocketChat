<?xml version="1.0" encoding="utf-8" ?>
<otrs_package version="1.1">
    <Name>RocketChat</Name>
    <Version>6.0.3</Version>
    <Vendor>Ligero [Community]</Vendor>
    <URL>http://ligero.online/</URL>
    <License>GNU GENERAL PUBLIC LICENSE Version 2, June 1991</License>
    <ChangeLog Date="2017-11-23 09:50:00" Version="0.8">First Release</ChangeLog>
    <Description Lang="en">This addon enables OTRS to integrate with Rocket.Chat. You can have a livechat on your 
    OTRS or any site of your company.</Description>
    <Description Lang="pt_BR">Este AddOn realiza a integração do OTRS com o Rocket.Chat.</Description>
    <Framework>6.0.x</Framework>
    <CodeInstall Type="post">
        my $CodeModule = 'var::packagesetup::' . $Param{Structure}-&gt;{Name}-&gt;{Content};
        $Kernel::OM-&gt;Get($CodeModule)-&gt;CodeInstall();
    </CodeInstall>
    <CodeUpgrade Type="post">
        my $CodeModule = 'var::packagesetup::' . $Param{Structure}-&gt;{Name}-&gt;{Content};
        $Kernel::OM-&gt;Get($CodeModule)-&gt;CodeUpgrade();
    </CodeUpgrade>
    <BuildDate>2019-10-09 16:38:44</BuildDate>
    <BuildHost>yourhost.example.com</BuildHost>
    <Filelist>
        <File Location="Custom/RocketChat.sopm" Permission="644" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+CjxvdHJzX3BhY2thZ2UgdmVyc2lvbj0iMS4xIj4KICAgIDxOYW1lPlJvY2tldENoYXQ8L05hbWU+CiAgICA8VmVyc2lvbj42LjAuMzwvVmVyc2lvbj4KICAgIDxWZW5kb3I+TGlnZXJvIFtDb21tdW5pdHldPC9WZW5kb3I+CiAgICA8VVJMPmh0dHA6Ly9saWdlcm8ub25saW5lLzwvVVJMPgogICAgPExpY2Vuc2U+R05VIEdFTkVSQUwgUFVCTElDIExJQ0VOU0UgVmVyc2lvbiAyLCBKdW5lIDE5OTE8L0xpY2Vuc2U+CiAgICA8Q2hhbmdlTG9nIERhdGU9IjIwMTctMTEtMjMgMDk6NTA6MDAiIFZlcnNpb249IjAuOCI+Rmlyc3QgUmVsZWFzZTwvQ2hhbmdlTG9nPgogICAgPERlc2NyaXB0aW9uIExhbmc9ImVuIj5UaGlzIGFkZG9uIGVuYWJsZXMgT1RSUyB0byBpbnRlZ3JhdGUgd2l0aCBSb2NrZXQuQ2hhdC4gWW91IGNhbiBoYXZlIGEgbGl2ZWNoYXQgb24geW91ciAKICAgIE9UUlMgb3IgYW55IHNpdGUgb2YgeW91ciBjb21wYW55LjwvRGVzY3JpcHRpb24+CiAgICA8RGVzY3JpcHRpb24gTGFuZz0icHRfQlIiPkVzdGUgQWRkT24gcmVhbGl6YSBhIGludGVncmHDp8OjbyBkbyBPVFJTIGNvbSBvIFJvY2tldC5DaGF0LjwvRGVzY3JpcHRpb24+CiAgICA8RnJhbWV3b3JrPjYuMC54PC9GcmFtZXdvcms+CiAgICA8RmlsZWxpc3Q+CiAgICAgICAgPEZpbGUgTG9jYXRpb249IkN1c3RvbS9Sb2NrZXRDaGF0LnNvcG0iIFBlcm1pc3Npb249IjY0NCI+PC9GaWxlPgogICAgICAgIDxGaWxlIExvY2F0aW9uPSJLZXJuZWwvQ29uZmlnL0ZpbGVzL1hNTC9Sb2NrZXRDaGF0LnhtbCIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICAgICAgPEZpbGUgTG9jYXRpb249Iktlcm5lbC9HZW5lcmljSW50ZXJmYWNlL09wZXJhdGlvbi9Sb2NrZXRDaGF0L0luY29taW5nQ2hhdC5wbSIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICAgICAgPEZpbGUgTG9jYXRpb249Iktlcm5lbC9PdXRwdXQvSFRNTC9GaWx0ZXJFbGVtZW50UG9zdC9Sb2NrZXRDaGF0LnBtIiBQZXJtaXNzaW9uPSI2NDQiPjwvRmlsZT4KICAgICAgICA8RmlsZSBMb2NhdGlvbj0iS2VybmVsL091dHB1dC9IVE1ML1RlbXBsYXRlcy9TdGFuZGFyZC9Sb2NrZXRDaGF0LnR0IiBQZXJtaXNzaW9uPSI2NDQiPjwvRmlsZT4KICAgICAgICA8RmlsZSBMb2NhdGlvbj0iS2VybmVsL091dHB1dC9IVE1ML1RlbXBsYXRlcy9TdGFuZGFyZC9Sb2NrZXRDaGF0L0NoYXRUZW1wbGF0ZS50dCIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICAgICAgPEZpbGUgTG9jYXRpb249InZhci9wYWNrYWdlc2V0dXAvUm9ja2V0Q2hhdC5wbSIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICAgICAgPEZpbGUgTG9jYXRpb249Iktlcm5lbC9TeXN0ZW0vVGlja2V0L0V2ZW50L05vdGlmaWNhdGlvbkV2ZW50L1RyYW5zcG9ydC9Sb2NrZXRDaGF0LnBtIiBQZXJtaXNzaW9uPSI2NDQiPjwvRmlsZT4KICAgICAgICA8RmlsZSBMb2NhdGlvbj0iS2VybmVsL091dHB1dC9IVE1ML1RlbXBsYXRlcy9TdGFuZGFyZC9BZG1pbk5vdGlmaWNhdGlvbkV2ZW50VHJhbnNwb3J0Um9ja2V0Q2hhdC50dCIgUGVybWlzc2lvbj0iNjQ0Ij48L0ZpbGU+CiAgICA8L0ZpbGVsaXN0PgogICAgPENvZGVJbnN0YWxsIFR5cGU9InBvc3QiPgogICAgICAgIG15ICRDb2RlTW9kdWxlID0gJ3Zhcjo6cGFja2FnZXNldHVwOjonIC4gJFBhcmFte1N0cnVjdHVyZX0tJmd0O3tOYW1lfS0mZ3Q7e0NvbnRlbnR9OwogICAgICAgICRLZXJuZWw6Ok9NLSZndDtHZXQoJENvZGVNb2R1bGUpLSZndDtDb2RlSW5zdGFsbCgpOwogICAgPC9Db2RlSW5zdGFsbD4KCTxDb2RlVXBncmFkZSBUeXBlPSJwb3N0Ij4KICAgICAgICBteSAkQ29kZU1vZHVsZSA9ICd2YXI6OnBhY2thZ2VzZXR1cDo6JyAuICRQYXJhbXtTdHJ1Y3R1cmV9LSZndDt7TmFtZX0tJmd0O3tDb250ZW50fTsKICAgICAgICAkS2VybmVsOjpPTS0mZ3Q7R2V0KCRDb2RlTW9kdWxlKS0mZ3Q7Q29kZVVwZ3JhZGUoKTsKICAgIDwvQ29kZVVwZ3JhZGU+Cjwvb3Ryc19wYWNrYWdlPgo=</File>
        <File Location="Kernel/Config/Files/XML/RocketChat.xml" Permission="644" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+CjxvdHJzX2NvbmZpZyB2ZXJzaW9uPSIyLjAiIGluaXQ9IkFwcGxpY2F0aW9uIj4KICAgIDxTZXR0aW5nIE5hbWU9IkZyb250ZW5kOjpPdXRwdXQ6OkZpbHRlckVsZW1lbnRQb3N0IyMjUm9ja2V0Q2hhdCIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5Sb2NrZXQgQ2hhdCBMaXZlY2hhdCBPdXRwdXQgRmlsdGVyPC9EZXNjcmlwdGlvbj4KICAgICAgICA8TmF2aWdhdGlvbj5Sb2NrZXRDaGF0OjpGcm9udGVuZDo6T3V0cHV0OjpGaWx0ZXJFbGVtZW50UG9zdDwvTmF2aWdhdGlvbj4KICAgICAgICA8VmFsdWU+CiAgICAgICAgICAgIDxIYXNoPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJNb2R1bGUiPktlcm5lbDo6T3V0cHV0OjpIVE1MOjpGaWx0ZXJFbGVtZW50UG9zdDo6Um9ja2V0Q2hhdDwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRGVidWciPjA8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlRlbXBsYXRlcyI+CiAgICAgICAgICAgICAgICAgICAgPEhhc2g+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQ3VzdG9tZXJGb290ZXIiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgPC9IYXNoPgogICAgICAgICAgICAgICAgPC9JdGVtPgogICAgICAgICAgICA8L0hhc2g+CiAgICAgICAgPC9WYWx1ZT4KICAgIDwvU2V0dGluZz4KICAgIDxTZXR0aW5nIE5hbWU9IkdlbmVyaWNJbnRlcmZhY2U6Ok9wZXJhdGlvbjo6TW9kdWxlIyMjUm9ja2V0Q2hhdDo6SW5jb21pbmdDaGF0IiBSZXF1aXJlZD0iMCIgVmFsaWQ9IjEiPgogICAgICAgIDxEZXNjcmlwdGlvbiBUcmFuc2xhdGFibGU9IjEiPkdlbmVyaWNJbnRlcmZhY2UgbW9kdWxlIHJlZ2lzdHJhdGlvbiBmb3IgdGhlIG9wZXJhdGlvbiBsYXllci48L0Rlc2NyaXB0aW9uPgogICAgICAgIDxOYXZpZ2F0aW9uPlJvY2tldENoYXQ6OkdlbmVyaWNJbnRlcmZhY2U6Ok9wZXJhdGlvbjo6TW9kdWxlUmVnaXN0cmF0aW9uPC9OYXZpZ2F0aW9uPgogICAgICAgIDxWYWx1ZT4KICAgICAgICAgICAgPEhhc2g+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9Ik5hbWUiPkluY29taW5nQ2hhdDwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQ29udHJvbGxlciI+Um9ja2V0Q2hhdDwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQ29uZmlnRGlhbG9nIj5BZG1pbkdlbmVyaWNJbnRlcmZhY2VPcGVyYXRpb25EZWZhdWx0PC9JdGVtPgogICAgICAgICAgICA8L0hhc2g+CiAgICAgICAgPC9WYWx1ZT4KICAgIDwvU2V0dGluZz4KICAgIDxTZXR0aW5nIE5hbWU9IlJvY2tldENoYXQ6OkNvZGUiIFJlcXVpcmVkPSIwIiBWYWxpZD0iMSI+CiAgICAgICAgPERlc2NyaXB0aW9uIFRyYW5zbGF0YWJsZT0iMSI+SmF2YXNjcmlwdCBDb2RlIGdlbmVyYXRlZCBieSB5b3VyIFJvY2tldENoYXQgU2VydmVyPC9EZXNjcmlwdGlvbj4KICAgICAgICA8TmF2aWdhdGlvbj5Sb2NrZXRDaGF0OjpTZXR0aW5nczwvTmF2aWdhdGlvbj4KICAgICAgICA8VmFsdWU+CiAgICAgICAgICAgIDxJdGVtIFZhbHVlVHlwZT0iVGV4dGFyZWEiPgombHQ7IS0tIFN0YXJ0IG9mIFJvY2tldC5DaGF0IExpdmVjaGF0IFNjcmlwdCAtLSZndDsKJmx0O3NjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiJmd0OwooZnVuY3Rpb24odywgZCwgcywgdSkgewoJdy5Sb2NrZXRDaGF0ID0gZnVuY3Rpb24oYykgeyB3LlJvY2tldENoYXQuXy5wdXNoKGMpIH07IHcuUm9ja2V0Q2hhdC5fID0gW107IHcuUm9ja2V0Q2hhdC51cmwgPSB1OwoJdmFyIGggPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdLCBqID0gZC5jcmVhdGVFbGVtZW50KHMpOwoJai5hc3luYyA9IHRydWU7IGouc3JjID0gJ2h0dHBzOi8veW91cnNlcnZlci9wYWNrYWdlcy9yb2NrZXRjaGF0X2xpdmVjaGF0L2Fzc2V0cy9yb2NrZXRjaGF0LWxpdmVjaGF0Lm1pbi5qcz9fPVhYWFhYWFhYWCc7CgloLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGosIGgpOwp9KSh3aW5kb3csIGRvY3VtZW50LCAnc2NyaXB0JywgJ2h0dHBzOi8veW91cnNlcnZlci9saXZlY2hhdCcpOwombHQ7L3NjcmlwdCZndDsKJmx0OyEtLSBFbmQgb2YgUm9ja2V0LkNoYXQgTGl2ZWNoYXQgU2NyaXB0IC0tJmd0OwogICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgPC9WYWx1ZT4KICAgIDwvU2V0dGluZz4KICAgIDxTZXR0aW5nIE5hbWU9Ik5vdGlmaWNhdGlvbjo6VHJhbnNwb3J0IyMjUm9ja2V0Q2hhdCIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5EZWZpbmVzIGFsbCB0aGUgcGFyYW1ldGVycyBmb3IgdGhpcyBub3RpZmljYXRpb24gdHJhbnNwb3J0LjwvRGVzY3JpcHRpb24+CiAgICAgICAgPE5hdmlnYXRpb24+Um9ja2V0Q2hhdDo6RnJvbnRlbmQ6OkFkbWluOjpWaWV3OjpOb3RpZmljYXRpb25FdmVudDwvTmF2aWdhdGlvbj4KICAgICAgICA8VmFsdWU+CiAgICAgICAgICAgIDxIYXNoPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJNb2R1bGUiPktlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkV2ZW50OjpOb3RpZmljYXRpb25FdmVudDo6VHJhbnNwb3J0OjpSb2NrZXRDaGF0PC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJOYW1lIiBUcmFuc2xhdGFibGU9IjEiPlJvY2tldC5DaGF0PC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJJY29uIj5mYSBmYS1yb2NrZXQ8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlByaW8iPjEwMzwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iSXNPVFJTQnVzaW5lc3NUcmFuc3BvcnQiPjA8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkFnZW50RW5hYmxlZEJ5RGVmYXVsdCI+MTwvSXRlbT4KICAgICAgICAgICAgPC9IYXNoPgogICAgICAgIDwvVmFsdWU+CiAgICA8L1NldHRpbmc+Cjwvb3Ryc19jb25maWc+Cg==</File>
        <File Location="Kernel/GenericInterface/Operation/RocketChat/IncomingChat.pm" Permission="644" Encode="Base64">cGFja2FnZSBLZXJuZWw6OkdlbmVyaWNJbnRlcmZhY2U6Ok9wZXJhdGlvbjo6Um9ja2V0Q2hhdDo6SW5jb21pbmdDaGF0OwoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKdXNlIERhdGE6OkR1bXBlcjsKCnVzZSBEaWdlc3Q6Ok1ENSBxdyhtZDVfaGV4KTsKCnVzZSBEYXRlOjpQYXJzZTsKCnVzZSBLZXJuZWw6OlN5c3RlbTo6VmFyaWFibGVDaGVjayBxdyg6YWxsKTsKdXNlIHV0Zjg7CnVzZSBFbmNvZGUgcXcoZGVjb2RlIGVuY29kZSk7Cgp1c2UgYmFzZSBxdygKICAgIEtlcm5lbDo6R2VuZXJpY0ludGVyZmFjZTo6T3BlcmF0aW9uOjpDb21tb24KKTsKCm91ciAkT2JqZWN0TWFuYWdlckRpc2FibGVkID0gMTsKCj1oZWFkMSBBRERPTgoKUm9ja2V0Q2hhdAoKCj1oZWFkMSBOQU1FCgpLZXJuZWw6OkdlbmVyaWNJbnRlcmZhY2U6Ok9wZXJhdGlvbjo6Um9ja2V0Q2hhdDo6SW5jb21pbmdDaGF0IC0gR2VuZXJpY0ludGVyZmFjZSBSb2NrZXRDaGF0IEludGVncmF0aW9uLgoKCj1oZWFkMSBTWU5PUFNJUwoKVGhpcyBpcyBhIHdlYiBzZXJ2aWNlIG9wZXJhdGlvbiBmb3IgdHJlYXRpbmcgaW5jb21pbmcgbWVzc2FnZXMgb2YgUm9ja2V0Q2hhdCBvbiBPVFJTCgo9aGVhZDEgUFVCTElDIElOVEVSRkFDRQoKPW92ZXIgNAoKPWN1dAoKPWl0ZW0gbmV3KCkKCnVzdWFsbHksIHlvdSB3YW50IHRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzCmJ5IHVzaW5nIEtlcm5lbDo6R2VuZXJpY0ludGVyZmFjZTo6T3BlcmF0aW9uLT5uZXcoKTsKCj1jdXQKCnN1YiBuZXcgewogICAgbXkgKCAkVHlwZSwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAkU2VsZiA9IHt9OwogICAgYmxlc3MoICRTZWxmLCAkVHlwZSApOwoKICAgICMgY2hlY2sgbmVlZGVkIG9iamVjdHMKICAgIGZvciBteSAkTmVlZGVkIChxdyggRGVidWdnZXJPYmplY3QgV2Vic2VydmljZUlEICkpIHsKICAgICAgICBpZiAoICEkUGFyYW17JE5lZWRlZH0gKSB7CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyAgICAgID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2UgPT4gIkdvdCBubyAkTmVlZGVkISIKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgICRTZWxmLT57JE5lZWRlZH0gPSAkUGFyYW17JE5lZWRlZH07CiAgICB9CgogICAgcmV0dXJuICRTZWxmOwp9Cgo9aXRlbSBSdW4oKQoKUmVjZWl2ZSBkYXRhIGZyb20gUm9ja2V0Q2hhdCB3ZWJzZXJ2aWNlIGFmdGVyIGxpdmVjaGF0IGlzIGNsb3NlZCBhbmQgY3JlYXRlIGEgbmV3IHRpY2tldCBvcgphIG5ldyBhcnRpY2xlIG9uIGFuIGV4aXN0ZW50IHRpY2tldCBpZiB0aGUgdGlja2V0IG51bWJlciBpcyBpbmZvcm1lZCBhcyBUQUcuCgpOb3RlIHRoYXQgaXQncyBlc3NlbnRpYWwgdG8gaGF2ZSBhIHdlbGwgY3VzdG9taXplZCB4c2x0IG1hcHBpbmcgaW4gb3JkZXIgdG8gY29ycmVjdGx5CmNyZWF0ZSBhIG5ldyB0aWNrZXQsIGFjY29yZGluZyB0byB5b3VyIHN5c3RlbSBxdWV1ZXMsIHN0YXRlcyBhbmQgc28gb24uCgpSZXR1cm5zIGEgaGFzaCBsaWtlIHRoaXM6CgogICAgewogICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICBEYXRhICAgID0+IHsKICAgICAgICAgICAgU3VjY2VzcyA9PiAxLAogICAgICAgICAgICBUaWNrZXRzID0+IFsxMjMsIDMyM10gIyBJRCBvZiBUaWNrZXRzIHRoYXQgd2VyZSBjcmVhdGVkIG9yIG1vZGlmaWVkCiAgICAgICAgfSwKICAgIH0KCj1jdXQKCnN1YiBSdW4gewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAkVGlja2V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlRpY2tldCcpOwogICAgbXkgJExheW91dE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKTsKICAgIG15ICREeW5hbWljRmllbGRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkJyk7CiAgICBteSAkRHluYW1pY0ZpZWxkQmFja2VuZE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQ6OkJhY2tlbmQnKTsKICAgIG15ICREeW5hbWljRmllbGRWYWx1ZU9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGRWYWx1ZScpOwoKICAgIGlmICgKICAgICAgICAhJFBhcmFte0RhdGF9LT57VXNlckxvZ2lufQogICAgICAgICYmICEkUGFyYW17RGF0YX0tPntDdXN0b21lclVzZXJMb2dpbn0KICAgICAgICAmJiAhJFBhcmFte0RhdGF9LT57U2Vzc2lvbklEfQogICAgICAgICkKICAgIHsKICAgICAgICByZXR1cm4gJFNlbGYtPlJldHVybkVycm9yKAogICAgICAgICAgICBFcnJvckNvZGUgICAgPT4gJ1JvY2tldENoYXQuTWlzc2luZ1BhcmFtZXRlcicsCiAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAiUm9ja2V0Q2hhdDogVXNlckxvZ2luLCBDdXN0b21lclVzZXJMb2dpbiBvciBTZXNzaW9uSUQgaXMgcmVxdWlyZWQhIiwKICAgICAgICApOwogICAgfQoKICAgIGlmICggJFBhcmFte0RhdGF9LT57VXNlckxvZ2lufSB8fCAkUGFyYW17RGF0YX0tPntDdXN0b21lclVzZXJMb2dpbn0gKSB7CgogICAgICAgIGlmICggISRQYXJhbXtEYXRhfS0+e1Bhc3N3b3JkfSApCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gJFNlbGYtPlJldHVybkVycm9yKAogICAgICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdSb2NrZXRDaGF0Lk1pc3NpbmdQYXJhbWV0ZXInLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJSb2NrZXRDaGF0OiBQYXNzd29yZCBvciBTZXNzaW9uSUQgaXMgcmVxdWlyZWQhIiwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgkKICAgIG15ICggJFVzZXJJRCwgJFVzZXJUeXBlICkgPSAkU2VsZi0+QXV0aCgKICAgICAgICAlUGFyYW0sCiAgICApOwoKICAgIGlmICggISRVc2VySUQgKSB7CiAgICAgICAgcmV0dXJuICRTZWxmLT5SZXR1cm5FcnJvcigKICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdSb2NrZXRDaGF0LkF1dGhGYWlsJywKICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJSb2NrZXRDaGF0OiBVc2VyIGNvdWxkIG5vdCBiZSBhdXRoZW50aWNhdGVkISIsCiAgICAgICAgKTsKICAgIH0KICAgIAogICAgbXkgJURhdGE7CiAgICAkRGF0YXtVc2VyTG9naW59ICAgICAgICAgPSAkUGFyYW17RGF0YX0tPnthZ2VudH0tPnt1c2VybmFtZX0gfHwgJyc7CiAgICAkRGF0YXtDdXN0b21lclVzZXJMb2dpbn0gPSAkUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e2N1c3RvbUZpZWxkc30tPnt1c2VybmFtZX0gfHwgJyc7CiAgICAkRGF0YXtDdXN0b21lclVzZXJOYW1lfSAgPSAkUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e25hbWV9IHx8ICcnOwogICAgJERhdGF7Q3VzdG9tZXJVc2VyRW1haWx9ID0gJFBhcmFte0RhdGF9LT57dmlzaXRvcn0tPntlbWFpbH0gfHwgJyc7CiAgICAkRGF0YXtRdWV1ZX0gID0gJFBhcmFte0RhdGF9LT57dmlzaXRvcn0tPntkZXBhcnRtZW50fSB8fCAnJzsKCiAgICAjIFNlIG5vdmEsIFZlcmlmaWNhIHNlIGV4aXN0ZSBjaGFtYWRvIGFzc29jaWFkbyBhIGVzdGUgY2hhdAogICAgbXkgQFRpY2tldElEczsKICAgIG15ICRNYWluVGlja2V0OwogICAgaWYoJFBhcmFte0RhdGF9LT57Il9pZCJ9KXsKCiAgICAgICAgJFNlbGYtPntDYWNoZVR5cGV9ID0gJ1JvY2tldENoYXRUaWNrZXRSb29tJzsKICAgICAgICAkU2VsZi0+e0NhY2hlVFRMfSAgPSA2MCAqIDYwICogMjQgKiAyMDsKICAgICAgICAkU2VsZi0+e0NhY2hlS2V5fSA9ICdSb2NrZXRDaGF0VGlja2V0Um9vbTo6JyAuICRQYXJhbXtEYXRhfS0+eyJfaWQifTsKCiAgICAgICAgbXkgJENhY2hlID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkNhY2hlJyktPkdldCgKICAgICAgICAgICAgVHlwZSA9PiAkU2VsZi0+e0NhY2hlVHlwZX0sCiAgICAgICAgICAgIEtleSAgPT4gJFNlbGYtPntDYWNoZUtleX0sCiAgICAgICAgKTsKCiAgICAgICAgaWYoJENhY2hlKXsKICAgICAgICAgICAgcHVzaCBAVGlja2V0SURzLCAkQ2FjaGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgQFRpY2tldElEcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFNlYXJjaCgKICAgICAgICAgICAgICAgIFVzZXJJRCA9PiAxLAogICAgICAgICAgICAgICAgUmVzdWx0ID0+ICdBUlJBWScsCiAgICAgICAgICAgICAgICAiRHluYW1pY0ZpZWxkX1JvY2tldENoYXRMaXZlQ2hhdElEIiA9PiB7CiAgICAgICAgICAgICAgICAgICAgRXF1YWxzID0+ICRQYXJhbXtEYXRhfS0+eyJfaWQifQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgICAjIHNldCBjYWNoZQogICAgICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6Q2FjaGUnKS0+U2V0KAogICAgICAgICAgICAgICAgVHlwZSAgPT4gJFNlbGYtPntDYWNoZVR5cGV9LAogICAgICAgICAgICAgICAgVFRMICAgPT4gJFNlbGYtPntDYWNoZVRUTH0sCiAgICAgICAgICAgICAgICBLZXkgICA9PiAkU2VsZi0+e0NhY2hlS2V5fSwKICAgICAgICAgICAgICAgIFZhbHVlID0+ICRUaWNrZXRJRHNbMF0sCiAgICAgICAgICAgICkgaWYgJFRpY2tldElEc1swXTsgIyBDYXNvIG8gQ2FjaGUgdGVuaGEgc2lkbyBhcGFnYWRvLCByZWFwbGljYW1vcyBhcXVpCiAgICAgICAgfQogICAgfQoKICAgIGlmIChAVGlja2V0SURzKXsKICAgICAgICAkTWFpblRpY2tldCA9ICRUaWNrZXRJRHNbMF07CiAgICB9CgogICAgbXkgJFRvcGljID0gJFBhcmFte0RhdGF9LT57dG9waWN9IHx8IAogICAgICAgICRMYXlvdXRPYmplY3QtPntMYW5ndWFnZU9iamVjdH0tPlRyYW5zbGF0ZSgnQ2hhdCBUaWNrZXQnKTsKCiAgICAjIFZlcmlmaWNhIHNlIMOpIE1lbnNhZ2VtIG5vdmEgb3UgZW5jZXJyYW1lbnRvIGRvIENoYXQKICAgIGlmKCRQYXJhbXtEYXRhfS0+e3R5cGV9IGVxICdNZXNzYWdlJyl7CiAgICAgICAgaWYgKEBUaWNrZXRJRHMpewogICAgICAgICAgICAjIHJldHVybiByZXN1bHQKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICAgICAgICAgIERhdGEgICAgPT4gewogICAgICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICAgICAgICAgICAgICBSZXR1cm5NZXNzYWdlID0+ICJOb3RoaW5nIHVwZGF0ZWQuIFRpY2tldCBmb3IgdGhpcyBjaGF0IHdhcyBhbHJlYWR5IGNyZWF0ZWQiLAogICAgICAgICAgICAgICAgICAgIFRpY2tldHMgPT4gXEBUaWNrZXRJRHMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgICMgU2UgbsOjbyBlbmNvbnRyb3UgY2hhbWFkbyBhc3NvY2lhZG8sIHNpZ25pZmljYSBxdWUgw6kgYSBwcmltZWlyYSBtZW5zYWdlbSBkbyBDaGF0CiAgICAgICAgIyBDcmlhIGVudMOjbyB1bSBjaGFtYWRvCiAgICAgICAgbXkgJEN1c3RvbWVyVXNlciA9ICRQYXJhbXtEYXRhfS0+e3Zpc2l0b3J9LT57Y3VzdG9tRmllbGRzfS0+e3VzZXJuYW1lfSB8fCAncm9ja2V0Y2hhdCc7CiAgICAgICAgbXkgQEN1c3RvbWVySURzID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkN1c3RvbWVyVXNlcicpLT5DdXN0b21lcklEcygKICAgICAgICAgICAgVXNlciA9PiAkQ3VzdG9tZXJVc2VyLAogICAgICAgICk7CiAgICAgICAgbXkgJEN1c3RvbWVyQ29tcGFueSA9ICRDdXN0b21lcklEc1swXSB8fCAkQ3VzdG9tZXJVc2VyOwogICAgICAgIG15ICRUaWNrZXRJRCA9ICRUaWNrZXRPYmplY3QtPlRpY2tldENyZWF0ZSgKICAgICAgICAgICAgVGl0bGUgICAgICAgID0+ICRUb3BpYywKICAgICAgICAgICAgQ3VzdG9tZXJVc2VyID0+ICRDdXN0b21lclVzZXIsCiAgICAgICAgICAgIEN1c3RvbWVySUQgICA9PiAkQ3VzdG9tZXJDb21wYW55LAogICAgICAgICAgICAleyRQYXJhbXtEYXRhfS0+e05ld0NoYXR9fQogICAgICAgICk7CiAgICAgICAgIyBzZXQgY2FjaGUKICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6Q2FjaGUnKS0+U2V0KAogICAgICAgICAgICBUeXBlICA9PiAkU2VsZi0+e0NhY2hlVHlwZX0sCiAgICAgICAgICAgIFRUTCAgID0+ICRTZWxmLT57Q2FjaGVUVEx9LAogICAgICAgICAgICBLZXkgICA9PiAkU2VsZi0+e0NhY2hlS2V5fSwKICAgICAgICAgICAgVmFsdWUgPT4gJFRpY2tldElELAogICAgICAgICkgaWYgJFRpY2tldElEOwoKICAgICAgICAkTWFpblRpY2tldCA9ICRUaWNrZXRJRDsKCiAgICAgICAgIyBOb3RpZmllcyBSb2NrZXQuQ2hhdCBzZXNzaW9uCiAgICAgICAgaWYoJFBhcmFte0RhdGF9LT57TmV3VGlja2V0Tm90aWZpY2F0aW9ufQogICAgICAgICAgICAmJiAkUGFyYW17RGF0YX0tPntOZXdUaWNrZXROb3RpZmljYXRpb259LT57Um9ja2V0Q2hhdEFQSVVybH0KICAgICAgICAgICAgJiYgJFBhcmFte0RhdGF9LT57TmV3VGlja2V0Tm90aWZpY2F0aW9ufS0+e01lc3NhZ2V9CiAgICAgICAgICAgICYmICRQYXJhbXtEYXRhfS0+e19pZH0KICAgICAgICAgICAgJiYgJFBhcmFte0RhdGF9LT57dmlzaXRvcn0KICAgICAgICAgICAgJiYgJFBhcmFte0RhdGF9LT57dmlzaXRvcn0tPnt0b2tlbn0KICAgICAgICAgICAgKQogICAgICAgIHsKICAgICAgICAgICAgdXNlIExXUDsKICAgICAgICAgICAgdXNlIEhUVFA6OlJlcXVlc3Q7CiAgICAgICAgICAgIHVzZSBFbmNvZGU7CiAgICAgICAgICAgIG15ICRKU09OT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkpTT04nKTsKCiAgICAgICAgICAgIG15ICVUaWNrZXQgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRHZXQoVGlja2V0SUQgPT4gJFRpY2tldElELCBVc2VySUQgPT4gMSk7CiAgICAgICAgICAgIG15ICRUTiA9ICRUaWNrZXR7VGlja2V0TnVtYmVyfTsKCiAgICAgICAgICAgIG15ICRqc29uOwoKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbm8gd2FybmluZ3MgJ3JlZHVuZGFudCc7CiAgICAgICAgICAgICAgICAkanNvbj0newogICAgICAgICAgICAgICAgICAgICJ0b2tlbiI6ICInLiRQYXJhbXtEYXRhfS0+e3Zpc2l0b3J9LT57dG9rZW59LiciLCAKICAgICAgICAgICAgICAgICAgICAicmlkIjogIicuJFBhcmFte0RhdGF9LT57X2lkfS4nIiwgCiAgICAgICAgICAgICAgICAgICAgIm1zZyI6ICInLnNwcmludGYoZW5jb2RlKCdVVEYtOCcsJFBhcmFte0RhdGF9LT57TmV3VGlja2V0Tm90aWZpY2F0aW9ufS0+e01lc3NhZ2V9KSwkVE4sJFROLCRUTiwkVE4sJFROKS4nIgogICAgICAgICAgICAgICAgfSc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbXkgJHVybCA9ICRQYXJhbXtEYXRhfS0+e05ld1RpY2tldE5vdGlmaWNhdGlvbn0tPntSb2NrZXRDaGF0QVBJVXJsfTsKICAgICAgICAgICAgbXkgJHJlcSA9IEhUVFA6OlJlcXVlc3QtPm5ldyhQT1NUID0+ICR1cmwpOwogICAgICAgICAgICAkcmVxLT5jb250ZW50X3R5cGUoJ2FwcGxpY2F0aW9uL2pzb24nKTsKICAgICAgICAgICAgJHJlcS0+Y29udGVudCgkanNvbik7CiAgICAgICAgICAgIG15ICR1YSA9IExXUDo6VXNlckFnZW50LT5uZXc7ICMgWW91IG1pZ2h0IHdhbnQgc29tZSBvcHRpb25zIGhlcmUKICAgICAgICAgICAgIyBEaXNhYmxlIENlcnRpZmljYXRlIHZlcmlmaWNhdGlvbgogICAgICAgICAgICAkdWEtPnNzbF9vcHRzKHZlcmlmeV9ob3N0bmFtZSA9PiAwKTsKICAgICAgICAgICAgJHVhLT5zc2xfb3B0cyhTU0xfdmVyaWZ5X21vZGUgPT4gMHgwMCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBteSAkcmVzID0gJHVhLT5yZXF1ZXN0KCRyZXEpOwogICAgICAgICAgICBteSAkUmVzdWx0ID0gJEpTT05PYmplY3QtPkRlY29kZShEYXRhPT4kcmVzLT5kZWNvZGVkX2NvbnRlbnQpOwogICAgICAgICAgICBteSAkU3VjY2VzcyA9ICRSZXN1bHQtPntzdWNjZXNzfTsKICAgICAgICB9CgogICAgICAgIG15ICREeW5hbWljRmllbGQgPSAkRHluYW1pY0ZpZWxkT2JqZWN0LT5EeW5hbWljRmllbGRHZXQoCiAgICAJCU5hbWUgPT4gIlJvY2tldENoYXRMaXZlQ2hhdElEIiwKCSAgICApOwogICAgICAgIG15ICRTdWNjZXNzID0gJER5bmFtaWNGaWVsZFZhbHVlT2JqZWN0LT5WYWx1ZVNldCgKICAgICAgICAgICAgRmllbGRJRCA9PiAkRHluYW1pY0ZpZWxkLT57SUR9LAogICAgICAgICAgICBPYmplY3RJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIFZhbHVlID0+IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBWYWx1ZVRleHQgPT4gJFBhcmFte0RhdGF9LT57Il9pZCJ9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIFVzZXJJRCA9PiAxCiAgICAgICAgKTsKICAgICAgICBwdXNoIEBUaWNrZXRJRHMsICRUaWNrZXRJRDsKCiAgICAgICAgIyBFbnZpYXIgbWVuc2FnZW0gcGFyYSBvIHVzdWFyaW8KCiAgICAgICAgIyBTYWlyIGRvIGZsdXhvCiAgICAgICAgIyByZXR1cm4gcmVzdWx0CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgU3VjY2VzcyA9PiAxLAogICAgICAgICAgICBEYXRhICAgID0+IHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICAgICAgICAgIFJldHVybk1lc3NhZ2UgPT4gIlRpY2tldCBDcmVhdGVkISIsCiAgICAgICAgICAgICAgICBUaWNrZXRzID0+IFxAVGlja2V0SURzCiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKCiAgICB9IGVsc2lmKCRQYXJhbXtEYXRhfS0+e3R5cGV9IGVxICdMaXZlY2hhdFNlc3Npb24nKXsKICAgICAgICAjIFNlIMOpIGVuY2VycmFtZW50byBkbyBDaGF0CiAgICAgICAgIyBWZXJpZmljYSBuYXMgdGFncyBzZSBob3V2ZSBhbGd1bSBuw7ptZXJvIGRlIGNoYW1hZG8gaW5mb3JtYWRvIGNvbSAiIyIKICAgICAgICBteSBAVGFncyA9ICgpOwogICAgICAgIGlmKCRQYXJhbXtEYXRhfS0+e3RhZ3N9KXsKICAgICAgICAgICAgIyBRdWFuZG8gaMOhIGFwZW5hcyB1bWEgdGFnLCBlbGEgdmVtIGNvbW8gc3RyaW5nIGUgbsOjbyBjb21vIGFycmF5LCBlbnTDo28gdGVtb3MgcXVlIGNvbnZlcnRlcgogICAgICAgICAgICBpZihJc1N0cmluZygkUGFyYW17RGF0YX0tPnt0YWdzfSkpewogICAgICAgICAgICAgICAgcHVzaCBAVGFncywkUGFyYW17RGF0YX0tPnt0YWdzfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIChAVGFncykgPSBAeyRQYXJhbXtEYXRhfS0+e3RhZ3N9fTsgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgIyBQYXJhIGNhZGEgdGFnLCB2ZXJpZmljYSBzZSBwb3NzdWkgbyBwYWRyw6NvICM5OTk5OTkuIFNlIHNpbSwgcHJvY3VyYSBwb3IgdW0gdGlja2V0aWQKICAgICAgICBUQUc6CiAgICAgICAgZm9yIG15ICRUYWcgKEBUYWdzKXsKICAgICAgICAgICAgbmV4dCBUQUcgaWYgJFRhZyAhfiBtL14jLzsKICAgICAgICAgICAgbXkgJFRpY2tldElEOwogICAgICAgICAgICAkVGFnID1+IHMvKCMpLy87CiAgICAgICAgICAgICRUaWNrZXRJRCA9ICRUaWNrZXRPYmplY3QtPlRpY2tldElETG9va3VwKAogICAgICAgICAgICAgICAgVGlja2V0TnVtYmVyID0+ICRUYWcsCiAgICAgICAgICAgICAgICBVc2VySUQgICAgICAgPT4gMSwKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcHVzaCBAVGlja2V0SURzLCAkVGlja2V0SUQgaWYgJFRpY2tldElEOwogICAgICAgIH0KCiAgICAgICAgIyBQcmVwYXJhIGh0bWwgYSBzZXIgY3JpYWRvIGNvbSBiYXNlIG5vcyAibWVzc2FnZXMiCiAgICAgICAgbXkgQE1lc3NhZ2VzID0gKCk7CiAgICAgICAgaWYoJFBhcmFte0RhdGF9LT57bWVzc2FnZXN9ICYmIElzQXJyYXlSZWZXaXRoRGF0YSgkUGFyYW17RGF0YX0tPnttZXNzYWdlc30pKXsKICAgICAgICAgICAgKEBNZXNzYWdlcykgPSBAeyRQYXJhbXtEYXRhfS0+e21lc3NhZ2VzfX07CiAgICAgICAgfSBlbHNpZiAoJFBhcmFte0RhdGF9LT57bWVzc2FnZXN9KSB7CiAgICAgICAgICAgIHB1c2ggQE1lc3NhZ2VzLCAkUGFyYW17RGF0YX0tPnttZXNzYWdlc307CiAgICAgICAgfQogICAgICAgIAogICAgICAgIG15ICRMYXN0RGF0ZT0gICAnJzsKICAgICAgICBteSAkTGFzdEF1dGhvcj0nJzsKCiAgICAgICAgbXkgJEFnZW50R3JhdmF0YXIgPSBtZDVfaGV4KCRQYXJhbXtEYXRhfS0+e2FnZW50fS0+e2VtYWlsfSkgfHwnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnOwogICAgICAgIG15ICRDdXN0b21lckdyYXZhdGFyID0gbWQ1X2hleCgkUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e2VtYWlsfSkgfHwnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnOwogICAgICAgIAogICAgICAgIG15ICRBZ2VudE5hbWUgPSAkUGFyYW17RGF0YX0tPnthZ2VudH0tPntuYW1lfSB8fCAkUGFyYW17RGF0YX0tPnthZ2VudH0tPnt1c2VybmFtZX0gfHwgJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCdBZ2VudCcpOwogICAgICAgIG15ICRDdXN0b21lck5hbWUgPSAkUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e25hbWV9IHx8ICRQYXJhbXtEYXRhfS0+e3Zpc2l0b3J9LT57dXNlcm5hbWV9IHx8ICRMYXlvdXRPYmplY3QtPntMYW5ndWFnZU9iamVjdH0tPlRyYW5zbGF0ZSgnQ3VzdG9tZXInKTsKICAgICAgICAKICAgICAgICBmb3IgbXkgJG1lc3NhZ2UgKEBNZXNzYWdlcyl7CiAgICAgICAgICAgICMgT2JzOiB0aGUgdGltZSBvZiB0aGUgbWVzc2FnZSBpcyBhbHdheXMgc2VuZCBpbiBVVEYKICAgICAgICAgICAgbXkgJHRpbWUgPSBzdHIydGltZSgkbWVzc2FnZS0+e3RzfSk7CiAgICAgICAgICAgICMgdGhlIGZvbGxvd2luZyBmaWVsZCBpcyBzZXQgYnkgamF2YXNjcmlwdCBhcyBhIGN1c3RvbWZpZWxkIG9uIFJvY2tldENoYXQuIFdlIG5lZWQgdGhhdCB0byBjYWxjdWxhdGUKICAgICAgICAgICAgIyBjdXN0b21lciB0aW1lIG9mIHRoZSBtZXNzYWdlCiAgICAgICAgICAgIG15ICR0eiA9ICRQYXJhbXtEYXRhfS0+e3Zpc2l0b3J9LT57Y3VzdG9tRmllbGRzfS0+e3RpbWV6b25lfSB8fCAwOyAKICAgICAgICAgICAgJHRpbWUgKz0gKCR0eio2MCk7CiAgICAgICAgICAgICMgQ2xlYW4gVGltZSBzdHJpbmcgRXBvY2gKICAgICAgICAgICAgJHRpbWUgPX4gcy9cLi4qLy87CiAgICAgICAgICAgIG15ICREYXRlT2JqID0gJEtlcm5lbDo6T00tPkNyZWF0ZSgKICAgICAgICAgICAgICAgICdLZXJuZWw6OlN5c3RlbTo6RGF0ZVRpbWUnLAogICAgICAgICAgICAgICAgT2JqZWN0UGFyYW1zID0+IHsKICAgICAgICAgICAgICAgICAgICBFcG9jaCA9PiAkdGltZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICk7CgogICAgICAgICAgICAkRGF0ZU9iai0+VG9UaW1lWm9uZSgKICAgICAgICAgICAgICAgIFRpbWVab25lID0+ICREYXRlT2JqLT5Vc2VyRGVmYXVsdFRpbWVab25lR2V0KCkKICAgICAgICAgICAgKTsKCgogICAgICAgICAgICAjIyMgTGVmdCBXaWRnZXQgKEF2YXRhciBtYXliZSkKICAgICAgICAgICAgIyBWZXJpZmllcyBpZiBuZWVkIHRvIHByaW50IGF1dGhvcgogICAgICAgICAgICBpZigkbWVzc2FnZS0+e3VzZXJuYW1lfSBuZSAkTGFzdEF1dGhvcil7CiAgICAgICAgICAgICAgICAkTGFzdEF1dGhvciA9ICRtZXNzYWdlLT57dXNlcm5hbWV9OwogICAgICAgICAgICAgICAgbXkgJEF2YXRhcjsKICAgICAgICAgICAgICAgIG15ICROYW1lOwogICAgICAgICAgICAgICAgaWYgKCRtZXNzYWdlLT57dXNlcm5hbWV9ID1+IG0vXmd1ZXN0Lyl7CiAgICAgICAgICAgICAgICAgICAgJE5hbWUgICA9ICRDdXN0b21lck5hbWU7CiAgICAgICAgICAgICAgICAgICAgJEF2YXRhciA9ICRDdXN0b21lckdyYXZhdGFyOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkTmFtZSAgID0gJEFnZW50TmFtZTsKICAgICAgICAgICAgICAgICAgICAkQXZhdGFyID0gJEFnZW50R3JhdmF0YXI7ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAjIyMgUHJpbnQgQXV0aG9yCiAgICAgICAgICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0JyktPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0F1dGhvcicsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIExlZnQgICA9PiAiPGltZyBzcmM9XCJodHRwczovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLyRBdmF0YXI/cz0zNlwiIGNsYXNzPVwiUm9ja2V0Q2hhdEF2YXRhclwiLz4iLAogICAgICAgICAgICAgICAgICAgICAgICBBdXRob3IgPT4gJE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIFRpbWUgICA9PiAkRGF0ZU9iai0+Rm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybWF0ID0+ICIlSDolTSIKICAgICAgICAgICAgICAgICAgICAgICAgKSAuICIgKCIuJERhdGVPYmotPlVzZXJEZWZhdWx0VGltZVpvbmVHZXQoKS4iKSIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKS0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdNZXNzYWdlJywKICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPT4gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkhUTUxVdGlscycpLT5Ub0hUTUwoCiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyA9PiAkbWVzc2FnZS0+e21zZ30sCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKTsKCiAgICAgICAgfQogICAgCiAgICAgICAgbXkgJENoYXRIVE1MID0gJExheW91dE9iamVjdC0+T3V0cHV0KAogICAgICAgICAgICBUZW1wbGF0ZUZpbGUgPT4gJ1JvY2tldENoYXQvQ2hhdFRlbXBsYXRlJwogICAgICAgICk7CgogICAgICAgIG15ICRBcnRpY2xlT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlRpY2tldDo6QXJ0aWNsZScpOwogICAgICAgIG15ICRBcnRpY2xlQmFja2VuZE9iamVjdCA9ICRBcnRpY2xlT2JqZWN0LT5CYWNrZW5kRm9yQ2hhbm5lbCggQ2hhbm5lbE5hbWUgPT4gJ1Bob25lJyApOwogICAgICAgIAogICAgICAgIGZvciBteSAkVGlja2V0SUQoQFRpY2tldElEcyl7CiAgICAgICAgICAgIG15ICRBcnRpY2xlSUQgPSAkQXJ0aWNsZUJhY2tlbmRPYmplY3QtPkFydGljbGVDcmVhdGUoCiAgICAgICAgICAgICAgICAjTm9BZ2VudE5vdGlmeSAgPT4gJEFydGljbGUtPntOb0FnZW50Tm90aWZ5fSAgfHwgMCwKICAgICAgICAgICAgICAgIFRpY2tldElEICAgICAgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIEFydGljbGVUeXBlICAgID0+ICd3ZWJyZXF1ZXN0JywKICAgICAgICAgICAgICAgIFNlbmRlclR5cGUgICAgID0+ICdjdXN0b21lcicsCiAgICAgICAgICAgICAgICBGcm9tICAgICAgICAgICA9PiAkUGFyYW17RGF0YX0tPnt2aXNpdG9yfS0+e25hbWV9IHx8ICdDaGF0IEd1ZXN0JywKICAgICAgICAgICAgICAgIFRvICAgICAgICAgICAgID0+ICRQYXJhbXtEYXRhfS0+e2FnZW50fS0+e25hbWV9IHx8ICdBZ2VudCcsCiAgICAgICAgICAgICAgICBTdWJqZWN0ICAgICAgICA9PiAkVG9waWMsCiAgICAgICAgICAgICAgICBCb2R5ICAgICAgICAgICA9PiAkQ2hhdEhUTUwsCiAgICAgICAgICAgICAgICBNaW1lVHlwZSAgICAgICA9PiAndGV4dC9odG1sJywKICAgICAgICAgICAgICAgIENoYXJzZXQgICAgICAgID0+ICd1dGYtOCcsCiAgICAgICAgICAgICAgICBVc2VySUQgICAgICAgICA9PiAnMScsCiAgICAgICAgICAgICAgICBIaXN0b3J5VHlwZSAgICA9PiAnQWRkTm90ZScsCiAgICAgICAgICAgICAgICBIaXN0b3J5Q29tbWVudCA9PiAnJSVDaGF0QWRkZWQlJScsCiAgICAgICAgICAgICAgICBJc1Zpc2libGVGb3JDdXN0b21lciA9PiAxLAogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgIyBVcGRhdGUgdGhlIHRpY2tldCB0aGF0IHdhcyBjcmVhdGVkIGJ5IFJvY2tldC5DaGF0CiAgICAgICAgbXkgKCAkVXNlcklELCAkVXNlclR5cGUgKSA9ICRTZWxmLT5BdXRoKCVQYXJhbSk7CiAgICAgICAgbXkgJFVwZGF0ZSA9ICRQYXJhbXtEYXRhfS0+e0NoYXRDbG9zZWR9OwogICAgICAgICRTZWxmLT5fVGlja2V0VXBkYXRlKAoJCQlUaWNrZXRJRCAgICAgICAgID0+ICRNYWluVGlja2V0LAoJCQlUaWNrZXQgICAgICAgICAgID0+ICRVcGRhdGUsCgkJCVVzZXJJRCAgICAgICAgICAgPT4gJFVzZXJJRCwKCQkJVXNlclR5cGUgICAgICAgICA9PiAkVXNlclR5cGUsCgkJKTsKICAgIH0KICAgIG15ICRMb2dFcnJvciA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpMb2cnKS0+R2V0TG9nRW50cnkoCiAgICAgICAgVHlwZSA9PiAnZXJyb3InLCAjIGVycm9yfGluZm98bm90aWNlCiAgICAgICAgV2hhdCA9PiAnTWVzc2FnZScsICMgTWVzc2FnZXxUcmFjZWJhY2sKICAgICk7CiAgICAKICAgIGlmKCRMb2dFcnJvcil7CiAgICAgICAgJERhdGF7RXJyb3J9PSRMb2dFcnJvcjsKICAgIH0KCiAgICAjIHJldHVybiByZXN1bHQKICAgIHJldHVybiB7CiAgICAgICAgU3VjY2VzcyA9PiAxLAogICAgICAgIERhdGEgICAgPT4gewogICAgICAgICAgICBTdWNjZXNzID0+IDEsCiAgICAgICAgICAgIFJldHVybk1lc3NhZ2UgPT4gIkNoYXQgY2xvc2VkLiBUaWNrZXRzIHVwZGF0ZWQhIiwKICAgICAgICAgICAgVGlja2V0cyA9PiBcQFRpY2tldElEcwogICAgICAgIH0sCiAgICB9Owp9CgoKCj1pdGVtIF9DaGVja1VwZGF0ZVBlcm1pc3Npb25zKCkKY2hlY2sgaWYgdXNlciBoYXMgcGVybWlzc2lvbnMgdG8gdXBkYXRlIHRpY2tldCBhdHRyaWJ1dGVzLgogICAgbXkgJFJlc3BvbnNlID0gJE9wZXJhdGlvbk9iamVjdC0+X0NoZWNrVXBkYXRlUGVybWlzc2lvbnMoCiAgICAgICAgVGlja2V0SUQgICAgID0+IDEyMwogICAgICAgIFRpY2tldCAgICAgICA9PiAkVGlja2V0LCAgICAgICAgICAgICAgICAgICMgYWxsIHRpY2tldCBwYXJhbWV0ZXJzCiAgICAgICAgQXJ0aWNsZSAgICAgID0+ICRUaWNrZXQsICAgICAgICAgICAgICAgICAgIyBhbGwgYXR0YWNobWVudCBwYXJhbWV0ZXJzCiAgICAgICAgRHluYW1pY0ZpZWxkID0+ICRUaWNrZXQsICAgICAgICAgICAgICAgICAgIyBhbGwgZHluYW1pYyBmaWVsZCBwYXJhbWV0ZXJzCiAgICAgICAgQXR0YWNobWVudCAgID0+ICRUaWNrZXQsICAgICAgICAgICAgICAgICAgIyBhbGwgYXR0YWNobWVudCBwYXJhbWV0ZXJzCiAgICAgICAgVXNlcklEICAgICAgID0+IDEyMywKICAgICk7CiAgICByZXR1cm5zOgogICAgJFJlc3BvbnNlID0gewogICAgICAgIFN1Y2Nlc3MgPT4gMSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiBldmVyeXRoaW5nIGlzIE9LCiAgICB9CiAgICAkUmVzcG9uc2UgPSB7CiAgICAgICAgU3VjY2VzcyAgICAgID0+IDAsCiAgICAgICAgRXJyb3JDb2RlICAgID0+ICJmdW5jdGlvbi5lcnJvciIsICAgICAgICAgICAjIGlmIGVycm9yCiAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJFcnJvciBkZXNjcmlwdGlvbiIKICAgIH0KPWN1dAoKc3ViIF9DaGVja1VwZGF0ZVBlcm1pc3Npb25zIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgbXkgJFRpY2tldElEICAgICAgICAgPSAkUGFyYW17VGlja2V0SUR9OwogICAgbXkgJFRpY2tldCAgICAgICAgICAgPSAkUGFyYW17VGlja2V0fTsKICAgIG15ICRBcnRpY2xlICAgICAgICAgID0gJFBhcmFte0FydGljbGV9OwogICAgbXkgJER5bmFtaWNGaWVsZExpc3QgPSAkUGFyYW17RHluYW1pY0ZpZWxkTGlzdH07CiAgICBteSAkQXR0YWNobWVudExpc3QgICA9ICRQYXJhbXtBdHRhY2htZW50TGlzdH07CgogICAgIyBnZXQgdGlja2V0IG9iamVjdAogICAgbXkgJFRpY2tldE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQnKTsKCiAgICAjIGNoZWNrIEFydGljbGUgcGVybWlzc2lvbnMKICAgIGlmICggSXNIYXNoUmVmV2l0aERhdGEoJEFydGljbGUpICkgewogICAgICAgIG15ICRBY2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRQZXJtaXNzaW9uKAogICAgICAgICAgICBUeXBlICAgICA9PiAnbm90ZScsCiAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgKTsKICAgICAgICBpZiAoICEkQWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdUaWNrZXRVcGRhdGVPckNyZWF0ZS5BY2Nlc3NEZW5pZWQnLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJUaWNrZXRVcGRhdGVPckNyZWF0ZTogRG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9ucyB0byBjcmVhdGUgbmV3IGFydGljbGVzISIsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgICMgY2hlY2sgZHluYW1pYyBmaWVsZCBwZXJtaXNzaW9ucwogICAgaWYgKCBJc0FycmF5UmVmV2l0aERhdGEoJER5bmFtaWNGaWVsZExpc3QpICkgewogICAgICAgIG15ICRBY2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRQZXJtaXNzaW9uKAogICAgICAgICAgICBUeXBlICAgICA9PiAncncnLAogICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICk7CiAgICAgICAgaWYgKCAhJEFjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIEVycm9yQ29kZSAgICA9PiAnVGlja2V0VXBkYXRlT3JDcmVhdGUuQWNjZXNzRGVuaWVkJywKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAiVGlja2V0VXBkYXRlT3JDcmVhdGU6IERvZXMgbm90IGhhdmUgcGVybWlzc2lvbnMgdG8gdXBkYXRlIGR5bmFtaWMgZmllbGRzISIsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgICMgY2hlY2sgcXVldWUgcGVybWlzc2lvbnMKICAgIGlmICggJFRpY2tldC0+e1F1ZXVlfSB8fCAkVGlja2V0LT57UXVldWVJRH0gKSB7CiAgICAgICAgbXkgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFBlcm1pc3Npb24oCiAgICAgICAgICAgIFR5cGUgICAgID0+ICdtb3ZlJywKICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICApOwogICAgICAgIGlmICggISRBY2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBFcnJvckNvZGUgICAgPT4gJ1RpY2tldFVwZGF0ZU9yQ3JlYXRlLkFjY2Vzc0RlbmllZCcsCiAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2UgPT4gIlRpY2tldFVwZGF0ZU9yQ3JlYXRlOiBEb2VzIG5vdCBoYXZlIHBlcm1pc3Npb25zIHRvIHVwZGF0ZSBxdWV1ZSEiLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KCiAgICAjIGNoZWNrIG93bmVyIHBlcm1pc3Npb25zCiAgICBpZiAoICRUaWNrZXQtPntPd25lcn0gfHwgJFRpY2tldC0+e093bmVySUR9ICkgewogICAgICAgIG15ICRBY2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRQZXJtaXNzaW9uKAogICAgICAgICAgICBUeXBlICAgICA9PiAnb3duZXInLAogICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICk7CiAgICAgICAgaWYgKCAhJEFjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIEVycm9yQ29kZSAgICA9PiAnVGlja2V0VXBkYXRlT3JDcmVhdGUuQWNjZXNzRGVuaWVkJywKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAiVGlja2V0VXBkYXRlT3JDcmVhdGU6IERvZXMgbm90IGhhdmUgcGVybWlzc2lvbnMgdG8gdXBkYXRlIG93bmVyISIsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgICMgY2hlY2sgcmVzcG9uc2libGUgcGVybWlzc2lvbnMKICAgIGlmICggJFRpY2tldC0+e1Jlc3BvbnNpYmxlfSB8fCAkVGlja2V0LT57UmVzcG9uc2libGVJRH0gKSB7CiAgICAgICAgbXkgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFBlcm1pc3Npb24oCiAgICAgICAgICAgIFR5cGUgICAgID0+ICdyZXNwb25zaWJsZScsCiAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgKTsKICAgICAgICBpZiAoICEkQWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdUaWNrZXRVcGRhdGVPckNyZWF0ZS5BY2Nlc3NEZW5pZWQnLAogICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlID0+ICJUaWNrZXRVcGRhdGVPckNyZWF0ZTogRG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9ucyB0byB1cGRhdGUgcmVzcG9uc2liZSEiLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KCiAgICAjIGNoZWNrIHByaW9yaXR5IHBlcm1pc3Npb25zCiAgICBpZiAoICRUaWNrZXQtPntQcmlvcml0eX0gfHwgJFRpY2tldC0+e1ByaW9yaXR5SUR9ICkgewogICAgICAgIG15ICRBY2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRQZXJtaXNzaW9uKAogICAgICAgICAgICBUeXBlICAgICA9PiAncHJpb3JpdHknLAogICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICk7CiAgICAgICAgaWYgKCAhJEFjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIEVycm9yQ29kZSAgICA9PiAnVGlja2V0VXBkYXRlT3JDcmVhdGUuQWNjZXNzRGVuaWVkJywKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAiVGlja2V0VXBkYXRlT3JDcmVhdGU6IERvZXMgbm90IGhhdmUgcGVybWlzc2lvbnMgdG8gdXBkYXRlIHByaW9yaXR5ISIsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgICMgY2hlY2sgc3RhdGUgcGVybWlzc2lvbnMKICAgIGlmICggJFRpY2tldC0+e1N0YXRlfSB8fCAkVGlja2V0LT57U3RhdGVJRH0gKSB7CgogICAgICAgICMgZ2V0IFN0YXRlIERhdGEKICAgICAgICBteSAlU3RhdGVEYXRhOwogICAgICAgIG15ICRTdGF0ZUlEOwoKICAgICAgICAjIGdldCBzdGF0ZSBvYmplY3QKICAgICAgICBteSAkU3RhdGVPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6U3RhdGUnKTsKCiAgICAgICAgaWYgKCAkVGlja2V0LT57U3RhdGVJRH0gKSB7CiAgICAgICAgICAgICRTdGF0ZUlEID0gJFRpY2tldC0+e1N0YXRlSUR9OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJFN0YXRlSUQgPSAkU3RhdGVPYmplY3QtPlN0YXRlTG9va3VwKAogICAgICAgICAgICAgICAgU3RhdGUgPT4gJFRpY2tldC0+e1N0YXRlfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgICVTdGF0ZURhdGEgPSAkU3RhdGVPYmplY3QtPlN0YXRlR2V0KAogICAgICAgICAgICBJRCA9PiAkU3RhdGVJRCwKICAgICAgICApOwoKICAgICAgICBteSAkQWNjZXNzID0gMTsKCiAgICAgICAgaWYgKCAkU3RhdGVEYXRhe1R5cGVOYW1lfSA9fiAvXmNsb3NlL2kgKSB7CiAgICAgICAgICAgICRBY2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRQZXJtaXNzaW9uKAogICAgICAgICAgICAgICAgVHlwZSAgICAgPT4gJ2Nsb3NlJywKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgIyBzZXQgcGVuZGluZyB0aW1lCiAgICAgICAgZWxzaWYgKCAkU3RhdGVEYXRhe1R5cGVOYW1lfSA9fiAvXnBlbmRpbmcvaSApIHsKICAgICAgICAgICAgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFBlcm1pc3Npb24oCiAgICAgICAgICAgICAgICBUeXBlICAgICA9PiAnY2xvc2UnLAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGlmICggISRBY2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBFcnJvckNvZGUgICAgPT4gJ1RpY2tldFVwZGF0ZU9yQ3JlYXRlLkFjY2Vzc0RlbmllZCcsCiAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2UgPT4gIlRpY2tldFVwZGF0ZU9yQ3JlYXRlOiBEb2VzIG5vdCBoYXZlIHBlcm1pc3Npb25zIHRvIHVwZGF0ZSBzdGF0ZSEiLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICAgIFN1Y2Nlc3MgPT4gMSwKICAgICAgICB9Cn0KCgo9aXRlbSBfVGlja2V0VXBkYXRlKCkKdXBkYXRlcyBhIHRpY2tldCBhbmQgY3JlYXRlcyBhbiBhcnRpY2xlIGFuZCBzZXRzIGR5bmFtaWMgZmllbGRzIGFuZCBhdHRhY2htZW50cyBpZiBzcGVjaWZpZWQuCiAgICBteSAkUmVzcG9uc2UgPSAkT3BlcmF0aW9uT2JqZWN0LT5fVGlja2V0VXBkYXRlKAogICAgICAgIFRpY2tldElEICAgICA9PiAxMjMKICAgICAgICBUaWNrZXQgICAgICAgPT4gJFRpY2tldCwgICAgICAgICAgICAgICAgICAjIGFsbCB0aWNrZXQgcGFyYW1ldGVycwogICAgICAgIEFydGljbGUgICAgICA9PiAkQXJ0aWNsZSwgICAgICAgICAgICAgICAgICMgYWxsIGF0dGFjaG1lbnQgcGFyYW1ldGVycwogICAgICAgIER5bmFtaWNGaWVsZCA9PiAkRHluYW1pY0ZpZWxkLCAgICAgICAgICAgICMgYWxsIGR5bmFtaWMgZmllbGQgcGFyYW1ldGVycwogICAgICAgIEF0dGFjaG1lbnQgICA9PiAkQXR0YWNobWVudCwgICAgICAgICAgICAgICMgYWxsIGF0dGFjaG1lbnQgcGFyYW1ldGVycwogICAgICAgIFVzZXJJRCAgICAgICA9PiAxMjMsCiAgICAgICAgVXNlclR5cGUgICAgID0+ICdBZ2VudCcgICAgICAgICAgICAgICAgICAgIyB8fCAnQ3VzdG9tZXIKICAgICk7CiAgICByZXR1cm5zOgogICAgJFJlc3BvbnNlID0gewogICAgICAgIFN1Y2Nlc3MgPT4gMSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiBldmVyeXRoaW5nIGlzIE9LCiAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgIFRpY2tldElEICAgICA9PiAxMjMsCiAgICAgICAgICAgIFRpY2tldE51bWJlciA9PiAnVE4zNDIyMzMyJywKICAgICAgICAgICAgQXJ0aWNsZUlEICAgID0+IDEyMywgICAgICAgICAgICAgICAgICAgICMgaWYgbmV3IGFydGljbGUgd2FzIGNyZWF0ZWQKICAgICAgICB9CiAgICB9CiAgICAkUmVzcG9uc2UgPSB7CiAgICAgICAgU3VjY2VzcyAgICAgID0+IDAsICAgICAgICAgICAgICAgICAgICAgICAgICMgaWYgdW5leHBlY3RlZCBlcnJvcgogICAgICAgIEVycm9yTWVzc2FnZSA9PiAiJFBhcmFte0Vycm9yQ29kZX06ICRQYXJhbXtFcnJvck1lc3NhZ2V9IiwKICAgIH0KPWN1dAoKc3ViIF9UaWNrZXRVcGRhdGUgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAkVGlja2V0SUQgICAgICAgICA9ICRQYXJhbXtUaWNrZXRJRH07CiAgICBteSAkVGlja2V0ICAgICAgICAgICA9ICRQYXJhbXtUaWNrZXR9OwogICAgbXkgJEFydGljbGUgICAgICAgICAgPSAkUGFyYW17QXJ0aWNsZX07CiAgICBteSAkRHluYW1pY0ZpZWxkTGlzdCA9ICRQYXJhbXtEeW5hbWljRmllbGRMaXN0fTsKICAgIG15ICRBdHRhY2htZW50TGlzdCAgID0gJFBhcmFte0F0dGFjaG1lbnRMaXN0fTsKCiAgICBteSAkQWNjZXNzID0gJFNlbGYtPl9DaGVja1VwZGF0ZVBlcm1pc3Npb25zKCVQYXJhbSk7CgogICAgIyBpZiBubyBwZXJtaXNzaW9ucyByZXR1cm4gZXJyb3IKICAgIGlmICggISRBY2Nlc3MtPntTdWNjZXNzfSApIHsKICAgICAgICByZXR1cm4gJFNlbGYtPlJldHVybkVycm9yKCAleyRBY2Nlc3N9ICk7CiAgICB9CgogICAgbXkgJUN1c3RvbWVyVXNlckRhdGE7CgogICAgIyBnZXQgY3VzdG9tZXIgaW5mb3JtYXRpb24KICAgIGlmICggJFRpY2tldC0+e0N1c3RvbWVyVXNlcn0gKSB7CiAgICAgICAgJUN1c3RvbWVyVXNlckRhdGEgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6Q3VzdG9tZXJVc2VyJyktPkN1c3RvbWVyVXNlckRhdGFHZXQoCiAgICAgICAgICAgIFVzZXIgPT4gJFRpY2tldC0+e0N1c3RvbWVyVXNlcn0sCiAgICAgICAgKTsKICAgIH0KCiAgICAjIGdldCB0aWNrZXQgb2JqZWN0CiAgICBteSAkVGlja2V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlRpY2tldCcpOwoKICAgICMgZ2V0IGN1cnJlbnQgdGlja2V0IGRhdGEKICAgIG15ICVUaWNrZXREYXRhID0gJFRpY2tldE9iamVjdC0+VGlja2V0R2V0KAogICAgICAgIFRpY2tldElEICAgICAgPT4gJFRpY2tldElELAogICAgICAgIER5bmFtaWNGaWVsZHMgPT4gMCwKICAgICAgICBVc2VySUQgICAgICAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgKTsKCiAgICAjIHVwZGF0ZSB0aWNrZXQgcGFyYW1ldGVycwogICAgIyB1cGRhdGUgVGlja2V0LT5UaXRsZQogICAgaWYgKAogICAgICAgIGRlZmluZWQgJFRpY2tldC0+e1RpdGxlfQogICAgICAgICYmICRUaWNrZXQtPntUaXRsZX0gbmUgJycKICAgICAgICAmJiAkVGlja2V0LT57VGl0bGV9IG5lICRUaWNrZXREYXRhe1RpdGxlfQogICAgICAgICkKICAgIHsKICAgICAgICBteSAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFRpdGxlVXBkYXRlKAogICAgICAgICAgICBUaXRsZSAgICA9PiAkVGlja2V0LT57VGl0bGV9LAogICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICk7CiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IHRpdGxlIGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAjIHVwZGF0ZSBUaWNrZXQtPlF1ZXVlCiAgICBpZiAoICRUaWNrZXQtPntRdWV1ZX0gfHwgJFRpY2tldC0+e1F1ZXVlSUR9ICkgewogICAgICAgIG15ICRTdWNjZXNzOwogICAgICAgIGlmICggZGVmaW5lZCAkVGlja2V0LT57UXVldWV9ICYmICRUaWNrZXQtPntRdWV1ZX0gbmUgJFRpY2tldERhdGF7UXVldWV9ICkgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFF1ZXVlU2V0KAogICAgICAgICAgICAgICAgUXVldWUgICAgPT4gJFRpY2tldC0+e1F1ZXVlfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNpZiAoIGRlZmluZWQgJFRpY2tldC0+e1F1ZXVlSUR9ICYmICRUaWNrZXQtPntRdWV1ZUlEfSBuZSAkVGlja2V0RGF0YXtRdWV1ZUlEfSApIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRRdWV1ZVNldCgKICAgICAgICAgICAgICAgIFF1ZXVlSUQgID0+ICRUaWNrZXQtPntRdWV1ZUlEfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKCiAgICAgICAgICAgICMgZGF0YSBpcyB0aGUgc2FtZSBhcyBpbiB0aWNrZXQgbm90aGluZyB0byBkbwogICAgICAgICAgICAkU3VjY2VzcyA9IDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoICEkU3VjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PgogICAgICAgICAgICAgICAgICAgICdUaWNrZXQgcXVldWUgY291bGQgbm90IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHN5c3RlbSBhZG1pbmlzdHJhdG9yIScsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgICMgdXBkYXRlIFRpY2tldC0+TG9jawogICAgaWYgKCAkVGlja2V0LT57TG9ja30gfHwgJFRpY2tldC0+e0xvY2tJRH0gKSB7CiAgICAgICAgbXkgJFN1Y2Nlc3M7CiAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXQtPntMb2NrfSAmJiAkVGlja2V0LT57TG9ja30gbmUgJFRpY2tldERhdGF7TG9ja30gKSB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0TG9ja1NldCgKICAgICAgICAgICAgICAgIExvY2sgICAgID0+ICRUaWNrZXQtPntMb2NrfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNpZiAoIGRlZmluZWQgJFRpY2tldC0+e0xvY2tJRH0gJiYgJFRpY2tldC0+e0xvY2tJRH0gbmUgJFRpY2tldERhdGF7TG9ja0lEfSApIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRMb2NrU2V0KAogICAgICAgICAgICAgICAgTG9ja0lEICAgPT4gJFRpY2tldC0+e0xvY2tJRH0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAjIGRhdGEgaXMgdGhlIHNhbWUgYXMgaW4gdGlja2V0IG5vdGhpbmcgdG8gZG8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IGxvY2sgY291bGQgbm90IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHN5c3RlbSBhZG1pbmlzdHJhdG9yIScsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgICMgdXBkYXRlIFRpY2tldC0+VHlwZQogICAgaWYgKCAkVGlja2V0LT57VHlwZX0gfHwgJFRpY2tldC0+e1R5cGVJRH0gKSB7CiAgICAgICAgbXkgJFN1Y2Nlc3M7CiAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXQtPntUeXBlfSAmJiAkVGlja2V0LT57VHlwZX0gbmUgJFRpY2tldERhdGF7VHlwZX0gKSB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0VHlwZVNldCgKICAgICAgICAgICAgICAgIFR5cGUgICAgID0+ICRUaWNrZXQtPntUeXBlfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNpZiAoIGRlZmluZWQgJFRpY2tldC0+e1R5cGVJRH0gJiYgJFRpY2tldC0+e1R5cGVJRH0gbmUgJFRpY2tldERhdGF7VHlwZUlEfSApCiAgICAgICAgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFR5cGVTZXQoCiAgICAgICAgICAgICAgICBUeXBlSUQgICA9PiAkVGlja2V0LT57VHlwZUlEfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKCiAgICAgICAgICAgICMgZGF0YSBpcyB0aGUgc2FtZSBhcyBpbiB0aWNrZXQgbm90aGluZyB0byBkbwogICAgICAgICAgICAkU3VjY2VzcyA9IDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoICEkU3VjY2VzcyApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9ybWVzc2FnZSA9PgogICAgICAgICAgICAgICAgICAgICdUaWNrZXQgdHlwZSBjb3VsZCBub3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3IhJywKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgIyB1cGRhdGUgVGlja2V0PlN0YXRlCiAgICAjIGRlcGVuZGluZyBvbiB0aGUgc3RhdGUsIG1pZ2h0IHJlcXVpcmUgdG8gdW5sb2NrIHRpY2tldCBvciBlbmFibGVzIHBlbmRpbmcgdGltZSBzZXQKICAgIGlmICggJFRpY2tldC0+e1N0YXRlfSB8fCAkVGlja2V0LT57U3RhdGVJRH0gKSB7CgogICAgICAgICMgZ2V0IFN0YXRlIERhdGEKICAgICAgICBteSAlU3RhdGVEYXRhOwogICAgICAgIG15ICRTdGF0ZUlEOwoKICAgICAgICAjIGdldCBzdGF0ZSBvYmplY3QKICAgICAgICBteSAkU3RhdGVPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6U3RhdGUnKTsKCiAgICAgICAgaWYgKCAkVGlja2V0LT57U3RhdGVJRH0gKSB7CiAgICAgICAgICAgICRTdGF0ZUlEID0gJFRpY2tldC0+e1N0YXRlSUR9OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJFN0YXRlSUQgPSAkU3RhdGVPYmplY3QtPlN0YXRlTG9va3VwKAogICAgICAgICAgICAgICAgU3RhdGUgPT4gJFRpY2tldC0+e1N0YXRlfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgICVTdGF0ZURhdGEgPSAkU3RhdGVPYmplY3QtPlN0YXRlR2V0KAogICAgICAgICAgICBJRCA9PiAkU3RhdGVJRCwKICAgICAgICApOwoKICAgICAgICAjIGZvcmNlIHVubG9jayBpZiBzdGF0ZSB0eXBlIGlzIGNsb3NlCiAgICAgICAgaWYgKCAkU3RhdGVEYXRhe1R5cGVOYW1lfSA9fiAvXmNsb3NlL2kgKSB7CgogICAgICAgICAgICAjIHNldCBsb2NrCiAgICAgICAgICAgICRUaWNrZXRPYmplY3QtPlRpY2tldExvY2tTZXQoCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBMb2NrICAgICA9PiAndW5sb2NrJywKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgIyBzZXQgcGVuZGluZyB0aW1lCiAgICAgICAgZWxzaWYgKCAkU3RhdGVEYXRhe1R5cGVOYW1lfSA9fiAvXnBlbmRpbmcvaSApIHsKCiAgICAgICAgICAgICMgc2V0IHBlbmRpbmcgdGltZQogICAgICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldC0+e1BlbmRpbmdUaW1lfSApIHsKICAgICAgICAgICAgICAgIG15ICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0UGVuZGluZ1RpbWVTZXQoCiAgICAgICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgICAgICV7ICRUaWNrZXQtPntQZW5kaW5nVGltZX0gfSwKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdUaWNrZXQgcGVuZGlnIHRpbWUgY291bGQgbm90IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHN5c3RlbScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4gJyBhZG1pbmlzdHJhdG9yIScsCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAkU2VsZi0+UmV0dXJuRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgRXJyb3JDb2RlICAgID0+ICdUaWNrZXRVcGRhdGVPckNyZWF0ZS5NaXNzaW5nUGFyYW1ldGVyJywKICAgICAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2UgPT4gJ0NhblwndCBzZXQgYSB0aWNrZXQgb24gYSBwZW5kaW5nIHN0YXRlIHdpdGhvdXQgcGVuZGlnIHRpbWUhJwogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbXkgJFN1Y2Nlc3M7CiAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXQtPntTdGF0ZX0gJiYgJFRpY2tldC0+e1N0YXRlfSBuZSAkVGlja2V0RGF0YXtTdGF0ZX0gKSB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0U3RhdGVTZXQoCiAgICAgICAgICAgICAgICBTdGF0ZSAgICA9PiAkVGlja2V0LT57U3RhdGV9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggZGVmaW5lZCAkVGlja2V0LT57U3RhdGVJRH0gJiYgJFRpY2tldC0+e1N0YXRlSUR9IG5lICRUaWNrZXREYXRhe1N0YXRlSUR9ICkKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0U3RhdGVTZXQoCiAgICAgICAgICAgICAgICBTdGF0ZUlEICA9PiAkVGlja2V0LT57U3RhdGVJRH0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAjIGRhdGEgaXMgdGhlIHNhbWUgYXMgaW4gdGlja2V0IG5vdGhpbmcgdG8gZG8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IHN0YXRlIGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAjIHVwZGF0ZSBUaWNrZXQtPlNlcnZpY2UKICAgICMgdGhpcyBtaWdodCByZXNldCBTTEEgaWYgY3VycmVudCBTTEEgaXMgbm90IGF2YWlsYWJsZSBmb3IgdGhlIG5ldyBzZXJ2aWNlCiAgICBpZiAoICRUaWNrZXQtPntTZXJ2aWNlfSB8fCAkVGlja2V0LT57U2VydmljZUlEfSApIHsKCiAgICAgICAgIyBjaGVjayBpZiB0aWNrZXQgaGFzIGEgU0xBIGFzc2lnbmVkCiAgICAgICAgaWYgKCAkVGlja2V0RGF0YXtTTEFJRH0gKSB7CgogICAgICAgICAgICAjIGNoZWNrIGlmIG9sZCBTTEEgaXMgc3RpbGwgdmFsaWQKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgISRTZWxmLT5WYWxpZGF0ZVNMQSgKICAgICAgICAgICAgICAgICAgICBTTEFJRCAgICAgPT4gJFRpY2tldERhdGF7U0xBSUR9LAogICAgICAgICAgICAgICAgICAgIFNlcnZpY2UgICA9PiAkVGlja2V0LT57U2VydmljZX0gfHwgJycsCiAgICAgICAgICAgICAgICAgICAgU2VydmljZUlEID0+ICRUaWNrZXQtPntTZXJ2aWNlSUR9IHx8ICcnLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgIyByZW1vdmUgY3VycmVudCBTTEEgaWYgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBuZXcgc2VydmljZQogICAgICAgICAgICAgICAgbXkgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRTTEFTZXQoCiAgICAgICAgICAgICAgICAgICAgU0xBSUQgICAgPT4gJycsCiAgICAgICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbXkgJFN1Y2Nlc3M7CgogICAgICAgICMgcHJldmVudCBjb21wYXJpc29uIGVycm9ycyBvbiB1bmRlZmluZWQgdmFsdWVzCiAgICAgICAgaWYgKCAhZGVmaW5lZCAkVGlja2V0RGF0YXtTZXJ2aWNlfSApIHsKICAgICAgICAgICAgJFRpY2tldERhdGF7U2VydmljZX0gPSAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKCAhZGVmaW5lZCAkVGlja2V0RGF0YXtTZXJ2aWNlSUR9ICkgewogICAgICAgICAgICAkVGlja2V0RGF0YXtTZXJ2aWNlSUR9ID0gJyc7CiAgICAgICAgfQoKICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldC0+e1NlcnZpY2V9ICYmICRUaWNrZXQtPntTZXJ2aWNlfSBuZSAkVGlja2V0RGF0YXtTZXJ2aWNlfSApIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRTZXJ2aWNlU2V0KAogICAgICAgICAgICAgICAgU2VydmljZSAgPT4gJFRpY2tldC0+e1NlcnZpY2V9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggZGVmaW5lZCAkVGlja2V0LT57U2VydmljZUlEfSAmJiAkVGlja2V0LT57U2VydmljZUlEfSBuZSAkVGlja2V0RGF0YXtTZXJ2aWNlSUR9ICkKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0U2VydmljZVNldCgKICAgICAgICAgICAgICAgIFNlcnZpY2VJRCA9PiAkVGlja2V0LT57U2VydmljZUlEfSwKICAgICAgICAgICAgICAgIFRpY2tldElEICA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewoKICAgICAgICAgICAgIyBkYXRhIGlzIHRoZSBzYW1lIGFzIGluIHRpY2tldCBub3RoaW5nIHRvIGRvCiAgICAgICAgICAgICRTdWNjZXNzID0gMTsKICAgICAgICB9CgogICAgICAgIGlmICggISRTdWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JtZXNzYWdlID0+CiAgICAgICAgICAgICAgICAgICAgJ1RpY2tldCBzZXJ2aWNlIGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAjIHVwZGF0ZSBUaWNrZXQtPlNMQQogICAgaWYgKCAkVGlja2V0LT57U0xBfSB8fCAkVGlja2V0LT57U0xBSUR9ICkgewogICAgICAgIG15ICRTdWNjZXNzOwoKICAgICAgICAjIHByZXZlbnQgY29tcGFyaXNvbiBlcnJvcnMgb24gdW5kZWZpbmVkIHZhbHVlcwogICAgICAgIGlmICggIWRlZmluZWQgJFRpY2tldERhdGF7U0xBfSApIHsKICAgICAgICAgICAgJFRpY2tldERhdGF7U0xBfSA9ICcnOwogICAgICAgIH0KICAgICAgICBpZiAoICFkZWZpbmVkICRUaWNrZXREYXRhe1NMQUlEfSApIHsKICAgICAgICAgICAgJFRpY2tldERhdGF7U0xBSUR9ID0gJyc7CiAgICAgICAgfQoKICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldC0+e1NMQX0gJiYgJFRpY2tldC0+e1NMQX0gbmUgJFRpY2tldERhdGF7U0xBfSApIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRTTEFTZXQoCiAgICAgICAgICAgICAgICBTTEEgICAgICA9PiAkVGlja2V0LT57U0xBfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNpZiAoIGRlZmluZWQgJFRpY2tldC0+e1NMQUlEfSAmJiAkVGlja2V0LT57U0xBSUR9IG5lICRUaWNrZXREYXRhe1NMQUlEfSApCiAgICAgICAgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFNMQVNldCgKICAgICAgICAgICAgICAgIFNMQUlEICAgID0+ICRUaWNrZXQtPntTTEFJRH0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAjIGRhdGEgaXMgdGhlIHNhbWUgYXMgaW4gdGlja2V0IG5vdGhpbmcgdG8gZG8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCAhJFN1Y2Nlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvcm1lc3NhZ2UgPT4KICAgICAgICAgICAgICAgICAgICAnVGlja2V0IFNMQSBjb3VsZCBub3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3IhJywKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgIyB1cGRhdGUgVGlja2V0LT5DdXN0b21lclVzZXIgJiYgVGlja2V0LT5DdXN0b21lcklECiAgICBpZiAoICRUaWNrZXQtPntDdXN0b21lclVzZXJ9IHx8ICRUaWNrZXQtPntDdXN0b21lcklEfSApIHsKCiAgICAgICAgIyBzZXQgdmFsdWVzIHRvIGVtcHR5IGlmIHRoZXkgYXJlIG5vdCBkZWZpbmVkCiAgICAgICAgJFRpY2tldERhdGF7Q3VzdG9tZXJVc2VySUR9ID0gJFRpY2tldERhdGF7Q3VzdG9tZXJVc2VySUR9IHx8ICcnOwogICAgICAgICRUaWNrZXREYXRhe0N1c3RvbWVySUR9ICAgICA9ICRUaWNrZXREYXRhe0N1c3RvbWVySUR9ICAgICB8fCAnJzsKICAgICAgICAkVGlja2V0LT57Q3VzdG9tZXJVc2VyfSAgICAgPSAkVGlja2V0LT57Q3VzdG9tZXJVc2VyfSAgICAgfHwgJyc7CiAgICAgICAgJFRpY2tldC0+e0N1c3RvbWVySUR9ICAgICAgID0gJFRpY2tldC0+e0N1c3RvbWVySUR9ICAgICAgIHx8ICcnOwoKICAgICAgICBteSAkU3VjY2VzczsKICAgICAgICBpZiAoCiAgICAgICAgICAgICRUaWNrZXQtPntDdXN0b21lclVzZXJ9IG5lICRUaWNrZXREYXRhe0N1c3RvbWVyVXNlcklEfQogICAgICAgICAgICB8fCAkVGlja2V0LT57Q3VzdG9tZXJJRH0gbmUgJFRpY2tldERhdGF7Q3VzdG9tZXJJRH0KICAgICAgICAgICAgKQogICAgICAgIHsKICAgICAgICAgICAgbXkgJEN1c3RvbWVySUQgPSAkQ3VzdG9tZXJVc2VyRGF0YXtVc2VyQ3VzdG9tZXJJRH0gfHwgJyc7CgogICAgICAgICAgICAjIHVzZSB1c2VyIGRlZmluZWQgQ3VzdG9tZXJJRCBpZiBkZWZpbmVkCiAgICAgICAgICAgIGlmICggZGVmaW5lZCAkVGlja2V0LT57Q3VzdG9tZXJJRH0gJiYgJFRpY2tldC0+e0N1c3RvbWVySUR9IG5lICcnICkgewogICAgICAgICAgICAgICAgJEN1c3RvbWVySUQgPSAkVGlja2V0LT57Q3VzdG9tZXJJRH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0Q3VzdG9tZXJTZXQoCiAgICAgICAgICAgICAgICBObyAgICAgICA9PiAkQ3VzdG9tZXJJRCwKICAgICAgICAgICAgICAgIFVzZXIgICAgID0+ICRUaWNrZXQtPntDdXN0b21lclVzZXJ9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewoKICAgICAgICAgICAgIyBkYXRhIGlzIHRoZSBzYW1lIGFzIGluIHRpY2tldCBub3RoaW5nIHRvIGRvCiAgICAgICAgICAgICRTdWNjZXNzID0gMTsKICAgICAgICB9CgogICAgICAgIGlmICggISRTdWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JtZXNzYWdlID0+CiAgICAgICAgICAgICAgICAgICAgJ1RpY2tldCBjdXN0b21lciB1c2VyIGNvdWxkIG5vdCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvciEnLAogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAjIHVwZGF0ZSBUaWNrZXQtPlByaW9yaXR5CiAgICBpZiAoICRUaWNrZXQtPntQcmlvcml0eX0gfHwgJFRpY2tldC0+e1ByaW9yaXR5SUR9ICkgewogICAgICAgIG15ICRTdWNjZXNzOwogICAgICAgIGlmICggZGVmaW5lZCAkVGlja2V0LT57UHJpb3JpdHl9ICYmICRUaWNrZXQtPntQcmlvcml0eX0gbmUgJFRpY2tldERhdGF7UHJpb3JpdHl9ICkgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFByaW9yaXR5U2V0KAogICAgICAgICAgICAgICAgUHJpb3JpdHkgPT4gJFRpY2tldC0+e1ByaW9yaXR5fSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNpZiAoIGRlZmluZWQgJFRpY2tldC0+e1ByaW9yaXR5SUR9ICYmICRUaWNrZXQtPntQcmlvcml0eUlEfSBuZSAkVGlja2V0RGF0YXtQcmlvcml0eUlEfSApCiAgICAgICAgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFByaW9yaXR5U2V0KAogICAgICAgICAgICAgICAgUHJpb3JpdHlJRCA9PiAkVGlja2V0LT57UHJpb3JpdHlJRH0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCAgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewoKICAgICAgICAgICAgIyBkYXRhIGlzIHRoZSBzYW1lIGFzIGluIHRpY2tldCBub3RoaW5nIHRvIGRvCiAgICAgICAgICAgICRTdWNjZXNzID0gMTsKICAgICAgICB9CgogICAgICAgIGlmICggISRTdWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JtZXNzYWdlID0+CiAgICAgICAgICAgICAgICAgICAgJ1RpY2tldCBwcmlvcml0eSBjb3VsZCBub3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3IhJywKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgbXkgJFVubG9ja09uQXdheSA9IDE7CgogICAgIyB1cGRhdGUgVGlja2V0LT5Pd25lcgogICAgaWYgKCAkVGlja2V0LT57T3duZXJ9IHx8ICRUaWNrZXQtPntPd25lcklEfSApIHsKICAgICAgICBteSAkU3VjY2VzczsKICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldC0+e093bmVyfSAmJiAkVGlja2V0LT57T3duZXJ9IG5lICRUaWNrZXREYXRhe093bmVyfSApIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRPd25lclNldCgKICAgICAgICAgICAgICAgIE5ld1VzZXIgID0+ICRUaWNrZXQtPntPd25lcn0sCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICAgICAgJFVubG9ja09uQXdheSA9IDA7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggZGVmaW5lZCAkVGlja2V0LT57T3duZXJJRH0gJiYgJFRpY2tldC0+e093bmVySUR9IG5lICRUaWNrZXREYXRhe093bmVySUR9ICkKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJFRpY2tldE9iamVjdC0+VGlja2V0T3duZXJTZXQoCiAgICAgICAgICAgICAgICBOZXdVc2VySUQgPT4gJFRpY2tldC0+e093bmVySUR9LAogICAgICAgICAgICAgICAgVGlja2V0SUQgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICAgICAgJFVubG9ja09uQXdheSA9IDA7CiAgICAgICAgfQogICAgICAgIGVsc2UgewoKICAgICAgICAgICAgIyBkYXRhIGlzIHRoZSBzYW1lIGFzIGluIHRpY2tldCBub3RoaW5nIHRvIGRvCiAgICAgICAgICAgICRTdWNjZXNzID0gMTsKICAgICAgICB9CgogICAgICAgIGlmICggISRTdWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JtZXNzYWdlID0+CiAgICAgICAgICAgICAgICAgICAgJ1RpY2tldCBvd25lciBjb3VsZCBub3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3IhJywKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgIyB1cGRhdGUgVGlja2V0LT5SZXNwb25zaWJsZQogICAgaWYgKCAkVGlja2V0LT57UmVzcG9uc2libGV9IHx8ICRUaWNrZXQtPntSZXNwb25zaWJsZUlEfSApIHsKICAgICAgICBteSAkU3VjY2VzczsKICAgICAgICBpZiAoCiAgICAgICAgICAgIGRlZmluZWQgJFRpY2tldC0+e1Jlc3BvbnNpYmxlfQogICAgICAgICAgICAmJiAkVGlja2V0LT57UmVzcG9uc2libGV9IG5lICRUaWNrZXREYXRhe1Jlc3BvbnNpYmxlfQogICAgICAgICAgICApCiAgICAgICAgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFJlc3BvbnNpYmxlU2V0KAogICAgICAgICAgICAgICAgTmV3VXNlciAgPT4gJFRpY2tldC0+e1Jlc3BvbnNpYmxlfSwKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFVzZXJJRCAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNpZiAoCiAgICAgICAgICAgIGRlZmluZWQgJFRpY2tldC0+e1Jlc3BvbnNpYmxlSUR9CiAgICAgICAgICAgICYmICRUaWNrZXQtPntSZXNwb25zaWJsZUlEfSBuZSAkVGlja2V0RGF0YXtSZXNwb25zaWJsZUlEfQogICAgICAgICAgICApCiAgICAgICAgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFJlc3BvbnNpYmxlU2V0KAogICAgICAgICAgICAgICAgTmV3VXNlcklEID0+ICRUaWNrZXQtPntSZXNwb25zaWJsZUlEfSwKICAgICAgICAgICAgICAgIFRpY2tldElEICA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICBVc2VySUQgICAgPT4gJFBhcmFte1VzZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewoKICAgICAgICAgICAgIyBkYXRhIGlzIHRoZSBzYW1lIGFzIGluIHRpY2tldCBub3RoaW5nIHRvIGRvCiAgICAgICAgICAgICRTdWNjZXNzID0gMTsKICAgICAgICB9CgogICAgICAgIGlmICggISRTdWNjZXNzICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyA9PiAwLAogICAgICAgICAgICAgICAgRXJyb3JtZXNzYWdlID0+CiAgICAgICAgICAgICAgICAgICAgJ1RpY2tldCByZXNwb25zaWJsZSBjb3VsZCBub3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3IhJywKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgbXkgJEFydGljbGVJRDsKICAgIGlmICggSXNIYXNoUmVmV2l0aERhdGEoJEFydGljbGUpICkgewoKICAgICAgICAjIHNldCBBcnRpY2xlIEZyb20KICAgICAgICBteSAkRnJvbTsKICAgICAgICBpZiAoICRBcnRpY2xlLT57RnJvbX0gKSB7CiAgICAgICAgICAgICRGcm9tID0gJEFydGljbGUtPntGcm9tfTsKICAgICAgICB9CiAgICAgICAgZWxzaWYgKCAkUGFyYW17VXNlclR5cGV9IGVxICdDdXN0b21lcicgKSB7CgogICAgICAgICAgICAjIHVzZSBkYXRhIGZyb20gY3VzdG9tZXIgdXNlciAoaWYgY3VzdG9tZXIgdXNlciBpcyBpbiBkYXRhYmFzZSkKICAgICAgICAgICAgaWYgKCBJc0hhc2hSZWZXaXRoRGF0YSggXCVDdXN0b21lclVzZXJEYXRhICkgKSB7CiAgICAgICAgICAgICAgICAkRnJvbSA9ICciJwogICAgICAgICAgICAgICAgICAgIC4gJEN1c3RvbWVyVXNlckRhdGF7VXNlckZpcnN0bmFtZX0gLiAnICcKICAgICAgICAgICAgICAgICAgICAuICRDdXN0b21lclVzZXJEYXRhe1VzZXJMYXN0bmFtZX0gLiAnIicKICAgICAgICAgICAgICAgICAgICAuICcgPCcgLiAkQ3VzdG9tZXJVc2VyRGF0YXtVc2VyRW1haWx9IC4gJz4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICAjIG90aGVyd2lzZSB1c2UgY3VzdG9tZXIgdXNlciBhcyBzZW50IGZyb20gdGhlIHJlcXVlc3QgKGl0IHNob3VsZCBiZSBhbiBlbWFpbCkKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkRnJvbSA9ICRUaWNrZXQtPntDdXN0b21lclVzZXJ9OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBteSAlVXNlckRhdGEgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VXNlcicpLT5HZXRVc2VyRGF0YSgKICAgICAgICAgICAgICAgIFVzZXJJRCA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgKTsKICAgICAgICAgICAgJEZyb20gPSAkVXNlckRhdGF7VXNlckZpcnN0bmFtZX0gLiAnICcgLiAkVXNlckRhdGF7VXNlckxhc3RuYW1lfTsKICAgICAgICB9CgogICAgICAgICMgc2V0IEFydGljbGUgVG8KICAgICAgICBteSAkVG8gPSAnJzsKCiAgICAgICAgIyBjcmVhdGUgYXJ0aWNsZQogICAgICAgICRBcnRpY2xlSUQgPSAkVGlja2V0T2JqZWN0LT5BcnRpY2xlQ3JlYXRlKAogICAgICAgICAgICBOb0FnZW50Tm90aWZ5ICA9PiAkQXJ0aWNsZS0+e05vQWdlbnROb3RpZnl9ICB8fCAwLAogICAgICAgICAgICBUaWNrZXRJRCAgICAgICA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIEFydGljbGVUeXBlSUQgID0+ICRBcnRpY2xlLT57QXJ0aWNsZVR5cGVJRH0gIHx8ICcnLAogICAgICAgICAgICBBcnRpY2xlVHlwZSAgICA9PiAkQXJ0aWNsZS0+e0FydGljbGVUeXBlfSAgICB8fCAnJywKICAgICAgICAgICAgU2VuZGVyVHlwZUlEICAgPT4gJEFydGljbGUtPntTZW5kZXJUeXBlSUR9ICAgfHwgJycsCiAgICAgICAgICAgIFNlbmRlclR5cGUgICAgID0+ICRBcnRpY2xlLT57U2VuZGVyVHlwZX0gICAgIHx8ICcnLAogICAgICAgICAgICBGcm9tICAgICAgICAgICA9PiAkRnJvbSwKICAgICAgICAgICAgVG8gICAgICAgICAgICAgPT4gJFRvLAogICAgICAgICAgICBTdWJqZWN0ICAgICAgICA9PiAkQXJ0aWNsZS0+e1N1YmplY3R9LAogICAgICAgICAgICBCb2R5ICAgICAgICAgICA9PiAkQXJ0aWNsZS0+e0JvZHl9LAogICAgICAgICAgICBNaW1lVHlwZSAgICAgICA9PiAkQXJ0aWNsZS0+e01pbWVUeXBlfSAgICAgICB8fCAnJywKICAgICAgICAgICAgQ2hhcnNldCAgICAgICAgPT4gJEFydGljbGUtPntDaGFyc2V0fSAgICAgICAgfHwgJycsCiAgICAgICAgICAgIENvbnRlbnRUeXBlICAgID0+ICRBcnRpY2xlLT57Q29udGVudFR5cGV9ICAgIHx8ICcnLAogICAgICAgICAgICBVc2VySUQgICAgICAgICA9PiAkUGFyYW17VXNlcklEfSwKICAgICAgICAgICAgSGlzdG9yeVR5cGUgICAgPT4gJEFydGljbGUtPntIaXN0b3J5VHlwZX0sCiAgICAgICAgICAgIEhpc3RvcnlDb21tZW50ID0+ICRBcnRpY2xlLT57SGlzdG9yeUNvbW1lbnR9IHx8ICclJScsCiAgICAgICAgICAgIEF1dG9SZXNwb25zZVR5cGUgPT4gJEFydGljbGUtPntBdXRvUmVzcG9uc2VUeXBlfSwKICAgICAgICAgICAgVW5sb2NrT25Bd2F5ICAgICA9PiAkVW5sb2NrT25Bd2F5LAogICAgICAgICAgICBPcmlnSGVhZGVyICAgICAgID0+IHsKICAgICAgICAgICAgICAgIEZyb20gICAgPT4gJEZyb20sCiAgICAgICAgICAgICAgICBUbyAgICAgID0+ICRUbywKICAgICAgICAgICAgICAgIFN1YmplY3QgPT4gJEFydGljbGUtPntTdWJqZWN0fSwKICAgICAgICAgICAgICAgIEJvZHkgICAgPT4gJEFydGljbGUtPntCb2R5fSwKCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKCiAgICAgICAgaWYgKCAhJEFydGljbGVJRCApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PgogICAgICAgICAgICAgICAgICAgICdBcnRpY2xlIGNvdWxkIG5vdCBiZSBjcmVhdGVkLCBwbGVhc2UgY29udGFjdCB0aGUgc3lzdGVtIGFkbWluaXN0cmF0b3InCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIHRpbWUgYWNjb3VudGluZwogICAgICAgIGlmICggJEFydGljbGUtPntUaW1lVW5pdH0gKSB7CiAgICAgICAgICAgICRUaWNrZXRPYmplY3QtPlRpY2tldEFjY291bnRUaW1lKAogICAgICAgICAgICAgICAgVGlja2V0SUQgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIEFydGljbGVJRCA9PiAkQXJ0aWNsZUlELAogICAgICAgICAgICAgICAgVGltZVVuaXQgID0+ICRBcnRpY2xlLT57VGltZVVuaXR9LAogICAgICAgICAgICAgICAgVXNlcklEICAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICAjIHNldCBkeW5hbWljIGZpZWxkcwogICAgZm9yIG15ICREeW5hbWljRmllbGQgKCBAeyREeW5hbWljRmllbGRMaXN0fSApIHsKICAgICAgICBteSAkUmVzdWx0ID0gJFNlbGYtPlNldER5bmFtaWNGaWVsZFZhbHVlKAogICAgICAgICAgICAleyREeW5hbWljRmllbGR9LAogICAgICAgICAgICBUaWNrZXRJRCAgPT4gJFRpY2tldElELAogICAgICAgICAgICBBcnRpY2xlSUQgPT4gJEFydGljbGVJRCB8fCAnJywKICAgICAgICAgICAgVXNlcklEICAgID0+ICRQYXJhbXtVc2VySUR9LAogICAgICAgICk7CgogICAgICAgIGlmICggISRSZXN1bHQtPntTdWNjZXNzfSApIHsKICAgICAgICAgICAgbXkgJEVycm9yTWVzc2FnZSA9CiAgICAgICAgICAgICAgICAkUmVzdWx0LT57RXJyb3JNZXNzYWdlfSB8fCAiRHluYW1pYyBGaWVsZCAkRHluYW1pY0ZpZWxkLT57TmFtZX0gY291bGQgbm90IGJlIHNldCwiCiAgICAgICAgICAgICAgICAuICIgcGxlYXNlIGNvbnRhY3QgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yIjsKCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBTdWNjZXNzICAgICAgPT4gMCwKICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9PiAkRXJyb3JNZXNzYWdlLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KCiAgICAjIHNldCBhdHRhY2htZW50cwoKICAgIGZvciBteSAkQXR0YWNobWVudCAoIEB7JEF0dGFjaG1lbnRMaXN0fSApIHsKICAgICAgICBteSAkUmVzdWx0ID0gJFNlbGYtPkNyZWF0ZUF0dGFjaG1lbnQoCiAgICAgICAgICAgIEF0dGFjaG1lbnQgPT4gJEF0dGFjaG1lbnQsCiAgICAgICAgICAgIEFydGljbGVJRCAgPT4gJEFydGljbGVJRCB8fCAnJywKICAgICAgICAgICAgVXNlcklEICAgICA9PiAkUGFyYW17VXNlcklEfQogICAgICAgICk7CgogICAgICAgIGlmICggISRSZXN1bHQtPntTdWNjZXNzfSApIHsKICAgICAgICAgICAgbXkgJEVycm9yTWVzc2FnZSA9CiAgICAgICAgICAgICAgICAkUmVzdWx0LT57RXJyb3JNZXNzYWdlfSB8fCAiQXR0YWNobWVudCBjb3VsZCBub3QgYmUgY3JlYXRlZCwgcGxlYXNlIGNvbnRhY3QgdGhlICIKICAgICAgICAgICAgICAgIC4gIiBzeXN0ZW0gYWRtaW5pc3RyYXRvciI7CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgU3VjY2VzcyAgICAgID0+IDAsCiAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2UgPT4gJEVycm9yTWVzc2FnZSwKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9CgogICAgaWYgKCRBcnRpY2xlSUQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBTdWNjZXNzID0+IDEsCiAgICAgICAgICAgIERhdGEgICAgPT4gewogICAgICAgICAgICAgICAgVGlja2V0SUQgICAgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgICAgIFRpY2tldE51bWJlciA9PiAkVGlja2V0RGF0YXtUaWNrZXROdW1iZXJ9LAogICAgICAgICAgICAgICAgQXJ0aWNsZUlEICAgID0+ICRBcnRpY2xlSUQsCiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgICAgU3VjY2VzcyA9PiAxLAogICAgICAgIERhdGEgICAgPT4gewogICAgICAgICAgICBUaWNrZXRJRCAgICAgPT4gJFRpY2tldElELAogICAgICAgICAgICBUaWNrZXROdW1iZXIgPT4gJFRpY2tldERhdGF7VGlja2V0TnVtYmVyfSwKICAgICAgICB9LAogICAgfTsKfQoKMTsKCj1iYWNrCg==</File>
        <File Location="Kernel/Output/HTML/FilterElementPost/RocketChat.pm" Permission="644" Encode="Base64">cGFja2FnZSBLZXJuZWw6Ok91dHB1dDo6SFRNTDo6RmlsdGVyRWxlbWVudFBvc3Q6OlJvY2tldENoYXQ7Cgp1c2Ugc3RyaWN0Owp1c2Ugd2FybmluZ3M7Cgp1c2UgRGF0YTo6RHVtcGVyOwoKCm91ciBAT2JqZWN0RGVwZW5kZW5jaWVzID0gKAogICAgJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnLAopOwoKPWhlYWQxIEFERE9OCgpSb2NrZXRDaGF0CgoKPWhlYWQxIE5BTUUKCktlcm5lbDo6T3V0cHV0OjpIVE1MOjpGaWx0ZXJFbGVtZW50UG9zdDo6Um9ja2V0Q2hhdAoKCj1oZWFkMSBTWU5PUFNJUwoKT3V0cHV0IGVsZW1lbnQgZmlsdGVyIHRoYXQgaW5jbHVkZXMgcm9ja2V0LmNoYXQgc2NyaXB0Cm9uIE9UUlMncyBDdXN0b21lciBpbnRlcmZhY2UKCj1oZWFkMSBQVUJMSUMgSU5URVJGQUNFCgo9b3ZlciA0Cgo9Y3V0Cgo9aXRlbSBuZXcoKQoKQ3JlYXRlcyB0aGUgb2JqZWN0LiBBbHNvIHRha2VzIHVzZXIgaW5mb3JtYXRpb24gYW5kIHNldHMgaW50byBTZWxmIGVsZW1lbnQKCj1jdXQKc3ViIG5ldyB7CiAgICBteSAoICRUeXBlLCAlUGFyYW0gKSA9IEBfOwoKICAgICMgYWxsb2NhdGUgbmV3IGhhc2ggZm9yIG9iamVjdAogICAgbXkgJFNlbGYgPSB7fTsKICAgIGJsZXNzKCAkU2VsZiwgJFR5cGUgKTsKICAgIAogICAgJFNlbGYtPntVc2VyTG9naW59ID0gJFBhcmFte1VzZXJMb2dpbn07CiAgICAkU2VsZi0+e1VzZXJGaXJzdG5hbWV9ID0gJFBhcmFte1VzZXJGaXJzdG5hbWV9IHx8ICdHdWVzdCc7CiAgICAkU2VsZi0+e1VzZXJMYXN0bmFtZX0gPSAkUGFyYW17VXNlckxhc3RuYW1lfSB8fCAnJzsKICAgICRTZWxmLT57VXNlckVtYWlsfSA9ICRQYXJhbXtVc2VyRW1haWx9OwogICAgCiAgICByZXR1cm4gJFNlbGY7Cn0KCj1pdGVtIFJ1bigpCgpFeGVjdXRlIG91dHB1dCBmaWx0ZXIgZWxlbWVudCBmb3IgaW5jbHVkaW4gUm9ja2V0LkNoYXQgbGl2ZWNoYXQgc2NyaXB0IG9uIApPVFJTJ3MgQ3VzdG9tZXIgSW50ZXJmYWNlCgo9Y3V0CnN1YiBSdW4gewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAkTGF5b3V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpPdXRwdXQ6OkhUTUw6OkxheW91dCcpOwoKICAgIG15ICVEYXRhID0gKAogICAgICAgIFVzZXJMb2dpbiAgICAgICAgICAgID0+ICRTZWxmLT57VXNlckxvZ2lufSwKICAgICAgICBVc2VyRmlyc3RuYW1lICAgICAgICA9PiAkU2VsZi0+e1VzZXJGaXJzdG5hbWV9LAogICAgICAgIFVzZXJMYXN0bmFtZSAgICAgICAgID0+ICRTZWxmLT57VXNlckxhc3RuYW1lfSwKICAgICAgICBVc2VyRW1haWwgICAgICAgICAgICA9PiAkU2VsZi0+e1VzZXJFbWFpbH0sCiAgICAgICAgUm9ja2V0Q2hhdEphdmFzY3JpcHQgPT4gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpDb25maWcnKS0+R2V0KCdSb2NrZXRDaGF0OjpDb2RlJykKICAgICk7CgogICAgbXkgJENvbnRlbnQgPSAkTGF5b3V0T2JqZWN0LT5PdXRwdXQoCiAgICAgICAgVGVtcGxhdGVGaWxlID0+ICdSb2NrZXRDaGF0JywKICAgICAgICBEYXRhICAgICAgICAgPT4gewogICAgICAgICAgICAlRGF0YQogICAgICAgIH0sCiAgICApOwogICAgIyMgQWRkIFJvY2tldCBDaGF0IHNjcmlwdAogICAgJHsgJFBhcmFte0RhdGF9IH0gLj0gJENvbnRlbnQ7CgogICAgcmV0dXJuIDE7Cn0KCjE7Cg==</File>
        <File Location="Kernel/Output/HTML/Templates/Standard/RocketChat.tt" Permission="644" Encode="Base64">PCEtLSBTdGFydCBvZiBSb2NrZXQuQ2hhdCBMaXZlY2hhdCBTY3JpcHQgLS0+CgpbJSBEYXRhLlJvY2tldENoYXRKYXZhc2NyaXB0ICVdCgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CnZhciBSb2NrZXRDaGF0UHJlRm9ybUNsZWFuID0gMDsKClJvY2tldENoYXQoZnVuY3Rpb24oKSB7CiAgICB0aGlzLm9uQ2hhdE1heGltaXplZChmdW5jdGlvbigpIHsKICAgICAgICAvLyBkbyB3aGF0ZXZlciB5b3Ugd2FudAogICAgICAgIGlmICghUm9ja2V0Q2hhdFByZUZvcm1DbGVhbil7CiAgICAgICAgICAgIC8vIEdldCBSb2NrZXRjaGF0IHByZSBmb3JtIGVsZW1lbnQKICAgICAgICAgICAgdmFyIGd1ZXN0TmFtZSA9ICQoJyNyb2NrZXRjaGF0LWlmcmFtZScpLmNvbnRlbnRzKCkuZmluZCgnI2d1ZXN0TmFtZScpOwogICAgICAgICAgICB2YXIgZ3Vlc3RFbWFpbCA9ICQoJyNyb2NrZXRjaGF0LWlmcmFtZScpLmNvbnRlbnRzKCkuZmluZCgnI2d1ZXN0RW1haWwnKTsKICAgICAgICAgICAgdmFyIGRlcGFydG1lbnQgPSAkKCcjcm9ja2V0Y2hhdC1pZnJhbWUnKS5jb250ZW50cygpLmZpbmQoJ3NlbGVjdFtuYW1lPWRlcGFydG1lbnRdJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTZXQgQ3VzdG9tZXIgTmFtZSBhbmQgRW1haWwKICAgICAgICAgICAgZ3Vlc3ROYW1lLnZhbCgnWyUgRGF0YS5Vc2VyRmlyc3RuYW1lICVdJyk7CiAgICAgICAgICAgIGd1ZXN0RW1haWwudmFsKCdbJSBEYXRhLlVzZXJFbWFpbCAlXScpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ1NTCiAgICAgICAgICAgIGd1ZXN0TmFtZS5jc3MoJ2NvbG9yJywnIzc3NycpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsJyNlZWUnKS5wcm9wKCdyZWFkb25seScsJ3RydWUnKTsKICAgICAgICAgICAgZ3Vlc3RFbWFpbC5jc3MoJ2NvbG9yJywnIzc3NycpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsJyNlZWUnKS5wcm9wKCdyZWFkb25seScsJ3RydWUnKTsKICAgICAgICAgICAgJCgnI3JvY2tldGNoYXQtaWZyYW1lJykuY29udGVudHMoKS5maW5kKCdzZWxlY3RbbmFtZT1kZXBhcnRtZW50XSBvcHRpb246Y29udGFpbnMoIlNlbGVjdCBhIGRlcGFydG1lbnQiKScpLmdldCgwKS5yZW1vdmUoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIE1hcmsgYXMgY2xlYW5lZCBzbyB3ZSBkb24ndCBwZXJmb3JtIGl0IGFnYWluCiAgICAgICAgICAgIFJvY2tldENoYXRQcmVGb3JtQ2xlYW49MTsKICAgICAgICB9CiAgICB9KTsKICAgIHRoaXMuc2V0Q3VzdG9tRmllbGQoJ3VzZXJuYW1lJywgJ1slIERhdGEuVXNlckxvZ2luICVdJyk7CiAgICAvL0RpZmVyZW7Dp2EgICAgCiAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICB2YXIgbiA9IGQuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgIHRoaXMuc2V0Q3VzdG9tRmllbGQoJ3RpbWV6b25lJywgbik7Cn0pOwoKPC9zY3JpcHQ+Cg==</File>
        <File Location="Kernel/Output/HTML/Templates/Standard/RocketChat/ChatTemplate.tt" Permission="644" Encode="Base64">PHN0eWxlPgoqIHsKICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sIEFyaWFsLCBWZXJkYW5hLCBTYW5zIFNlcmlmLCBTYW5zU2VyaWYsIFNhbnMtU2VyaWY7CiAgICBjb2xvcjogIzMzMzsKICAgIGZvbnQtc2l6ZTogMTBwdDsKfQouUm9ja2V0Q2hhdERhdGUgewogICAgZm9udC1zaXplOiAxMHB0OwogICAgdGV4dC1hbGlnbjpjZW50ZXI7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHRvcDogLTE2cHg7CiAgICB3aWR0aDogMTIwcHg7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIG1hcmdpbi1yaWdodDogYXV0bzsKfQouUm9ja2V0Q2hhdExlZnQgewogICAgZmxvYXQ6IGxlZnQ7CiAgICBwYWRkaW5nOiA1cHg7CiAgICB3aWR0aDogNDVweDsKfQouUm9ja2V0Q2hhdEF1dGhvcnsKICAgIHBhZGRpbmctdG9wOiA2cHg7CiAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGNvbG9yOiAjMzMzOwp9Ci5Sb2NrZXRDaGF0VGltZXsKICAgIGNvbG9yOiAjODg4OwogICAgZm9udC1zdHlsZTogaXRhbGljOwogICAgZm9udC1zaXplOiA5cHQ7Cn0KLlJvY2tldENoYXRSaWdodHsKICAgIG1pbi1oZWlnaHQ6NTBweDsKICAgIG1hcmdpbi1sZWZ0OjU2cHg7CiAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgZGlzcGxheTpibG9jazsKfQouUm9ja2V0Q2hhdE1lc3NhZ2V7CiAgICBkaXNwbGF5OiBibG9jazsKfQo8L3N0eWxlPgo8ZGl2IGNsYXNzPSJSb2NrZXRDaGF0Q2hhdCI+CiMgWyUgUmVuZGVyQmxvY2tTdGFydCgiUm93IikgJV0KI1slIFJlbmRlckJsb2NrU3RhcnQoIkRhdGUiKSAlXQojICAgIDxoci8+CiMgICAgPGRpdiBjbGFzcz0iUm9ja2V0Q2hhdERhdGUiPlslIERhdGEuQ29udGVudCB8IExvY2FsaXplKCJEYXRlIikgJV08L2Rpdj4KI1slIFJlbmRlckJsb2NrRW5kKCJEYXRlIikgJV0KClslIFJlbmRlckJsb2NrU3RhcnQoIkF1dGhvciIpICVdCiAgICA8ZGl2IGNsYXNzPSJSb2NrZXRDaGF0TGVmdCI+CiAgICAgICAgICAgIFslIERhdGEuTGVmdCAlXQogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJSb2NrZXRDaGF0UmlnaHQiPgogICAgICAgIDxzcGFuIGNsYXNzPSJSb2NrZXRDaGF0QXV0aG9yIj4KICAgICAgICAgICAgPGI+WyUgRGF0YS5BdXRob3IgfCBodG1sICVdPC9iPiAKICAgICAgICAgICAgPHNwYW4gY2xhc3M9IlJvY2tldENoYXRUaW1lIj5bJSBEYXRhLlRpbWUgfCBMb2NhbGl6ZSgiVGltZVNob3J0IikgJV08L3NwYW4+CiAgICAgICAgPC9zcGFuPgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJNZXNzYWdlIikgJV0KICAgICAgICA8c3BhbiBjbGFzcz0iUm9ja2V0Q2hhdE1lc3NhZ2UiPgogICAgICAgICAgICBbJSBEYXRhLkNvbnRlbnQgJV0KICAgICAgICA8L3NwYW4+ClslIFJlbmRlckJsb2NrRW5kKCJNZXNzYWdlIikgJV0KICAgIDwvZGl2PgpbJSBSZW5kZXJCbG9ja0VuZCgiQXV0aG9yIikgJV0KIyBbJSBSZW5kZXJCbG9ja0VuZCgiUm93IikgJV0KPC9kaXY+Cg==</File>
        <File Location="var/packagesetup/RocketChat.pm" Permission="644" Encode="Base64">IyAtLQojIFRoaXMgc29mdHdhcmUgY29tZXMgd2l0aCBBQlNPTFVURUxZIE5PIFdBUlJBTlRZLiBGb3IgZGV0YWlscywgc2VlCiMgdGhlIGVuY2xvc2VkIGZpbGUgQ09QWUlORyBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbiAoQUdQTCkuIElmIHlvdQojIGRpZCBub3QgcmVjZWl2ZSB0aGlzIGZpbGUsIHNlZSBodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvYWdwbC50eHQuCiMgLS0KCnBhY2thZ2UgdmFyOjpwYWNrYWdlc2V0dXA6OlJvY2tldENoYXQ7Cgo9aGVhZDEgQURET04KClJvY2tldENoYXQKCgo9aGVhZDEgTkFNRQoKdmFyOjpwYWNrYWdlc2V0dXA6OlJvY2tldENoYXQgLSBBZGRPbiBBdXRvIGluc3RhbGxlciBzY3JpcHQKCgo9aGVhZDEgU1lOT1BTSVMKCkNyZWF0ZSBhIFJvY2tldENoYXQgZGVmYXVsdCBXZWIgU2VydmljZSBvbiBPVFJTCgo9aGVhZDEgUFVCTElDIElOVEVSRkFDRQoKPW92ZXIgNAoKPWN1dAoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKdXNlIEtlcm5lbDo6T3V0cHV0OjpUZW1wbGF0ZTo6UHJvdmlkZXI7CgpvdXIgQE9iamVjdERlcGVuZGVuY2llcyA9ICgKICAgICdLZXJuZWw6OkNvbmZpZycsCiAgICAnS2VybmVsOjpTeXN0ZW06OkRCJywKICAgICdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkJywKICAgICdLZXJuZWw6OlN5c3RlbTo6TG9nJywKICAgICdLZXJuZWw6OlN5c3RlbTo6U3RhdGUnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpTdGF0cycsCiAgICAnS2VybmVsOjpTeXN0ZW06OlN5c0NvbmZpZycsCiAgICAnS2VybmVsOjpTeXN0ZW06OlR5cGUnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpWYWxpZCcsCik7Cgo9aXRlbSBuZXcoKQoKQ3JlYXRlcyB0aGUgT2JqZWN0Cgo9Y3V0CnN1YiBuZXcgewogICAgbXkgKCAkVHlwZSwgJVBhcmFtICkgPSBAXzsKCiAgICAjIGFsbG9jYXRlIG5ldyBoYXNoIGZvciBvYmplY3QKICAgIG15ICRTZWxmID0ge307CiAgICBibGVzcyggJFNlbGYsICRUeXBlICk7CgogICAgcmV0dXJuICRTZWxmOwp9Cgo9aXRlbSBuZXcoKQoKQ2FsbCBhbGwgc3Vicm91dGluZXMgbmVlZGVkIHRvIHRoZSBwYWNrYWdlIGluc3RhbGxhdGlvbgoKPWN1dApzdWIgQ29kZUluc3RhbGwgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICAkU2VsZi0+X0NyZWF0ZUR5bmFtaWNGaWVsZHMoKTsKCSMkU2VsZi0+X1VwZGF0ZUNvbmZpZygpOwogICAgJFNlbGYtPiBfQ3JlYXRlV2ViU2VydmljZXMoKTsKICAgIHJldHVybiAxOwp9Cgo9aXRlbSBuZXcoKQoKQ2FsbCBhbGwgc3Vicm91dGluZXMgbmVlZGVkIHRvIHRoZSBwYWNrYWdlIFVwZ3JhZGUKCj1jdXQKc3ViIENvZGVVcGdyYWRlIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgIyRTZWxmLT5fQ3JlYXRlRHluYW1pY0ZpZWxkcygpOwogICAgJFNlbGYtPl9DcmVhdGVXZWJTZXJ2aWNlcygpOwogICAgIyRTZWxmLT5fVXBkYXRlQ29uZmlnKCk7CgkKICAgIHJldHVybiAxOwp9CgpzdWIgX1VwZGF0ZUNvbmZpZyB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIG15ICRTeXNDb25maWdPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6U3lzQ29uZmlnJyk7CiMgICAgbXkgQENvbmZpZ3MgPSAoCiMgICAgICAgIHsKIyAgICAgICAgICAgIENvbmZpZ0l0ZW0gPT4gJ0N1c3RvbWVyRnJvbnRlbmQ6OkNvbW1vblBhcmFtIyMjQWN0aW9uJywKIyAgICAgICAgICAgIFZhbHVlIAkgICA9PiAnQ3VzdG9tZXJTZXJ2aWNlQ2F0YWxvZycKIyAgICAgICAgfSwKIyAgICApOwoKIyAgICBDT05GSUdJVEVNOgojICAgIGZvciBteSAkQ29uZmlnIChAQ29uZmlncykgewojICAgICAgICAjIHNldCBuZXcgc2V0dGluZywKIyAgICAgICAgbXkgJFN1Y2Nlc3MgPSAkU3lzQ29uZmlnT2JqZWN0LT5Db25maWdJdGVtVXBkYXRlKAojICAgICAgICAgICAgVmFsaWQgPT4gMSwKIyAgICAgICAgICAgIEtleSAgID0+ICRDb25maWctPntDb25maWdJdGVtfSwKIyAgICAgICAgICAgIFZhbHVlID0+ICRDb25maWctPntWYWx1ZX0sCiMgICAgICAgICk7CgojICAgIH0KCiAgICByZXR1cm4gMTsKfQoKc3ViIF9DcmVhdGVEeW5hbWljRmllbGRzIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgbXkgJFZhbGlkSUQgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VmFsaWQnKS0+VmFsaWRMb29rdXAoCiAgICAgICAgVmFsaWQgPT4gJ3ZhbGlkJywKICAgICk7CgogICAgIyBnZXQgYWxsIGN1cnJlbnQgZHluYW1pYyBmaWVsZHMKICAgIG15ICREeW5hbWljRmllbGRMaXN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcpLT5EeW5hbWljRmllbGRMaXN0R2V0KAogICAgICAgIFZhbGlkID0+IDAsCiAgICApOwoKICAgICMgZ2V0IHRoZSBsaXN0IG9mIG9yZGVyIG51bWJlcnMgKGlzIGFscmVhZHkgc29ydGVkKS4KICAgIG15IEBEeW5hbWljZmllbGRPcmRlckxpc3Q7CiAgICBmb3IgbXkgJER5bmFtaWNmaWVsZCAoIEB7JER5bmFtaWNGaWVsZExpc3R9ICkgewogICAgICAgIHB1c2ggQER5bmFtaWNmaWVsZE9yZGVyTGlzdCwgJER5bmFtaWNmaWVsZC0+e0ZpZWxkT3JkZXJ9OwogICAgfQoKICAgICMgZ2V0IHRoZSBsYXN0IGVsZW1lbnQgZnJvbSB0aGUgb3JkZXIgbGlzdCBhbmQgYWRkIDEKICAgIG15ICROZXh0T3JkZXJOdW1iZXIgPSAxOwogICAgaWYgKEBEeW5hbWljZmllbGRPcmRlckxpc3QpIHsKICAgICAgICAkTmV4dE9yZGVyTnVtYmVyID0gJER5bmFtaWNmaWVsZE9yZGVyTGlzdFstMV0gKyAxOwogICAgfQoKICAgICMgZ2V0IHRoZSBkZWZpbml0aW9uIGZvciBhbGwgZHluYW1pYyBmaWVsZHMgZm9yIElUU00KICAgIG15IEBEeW5hbWljRmllbGRzID0gJFNlbGYtPl9HZXRJVFNNRHluYW1pY0ZpZWxkc0RlZmluaXRpb24oKTsKCiAgICAjIGNyZWF0ZSBhIGR5bmFtaWMgZmllbGRzIGxvb2t1cCB0YWJsZQogICAgbXkgJUR5bmFtaWNGaWVsZExvb2t1cDsKICAgIERZTkFNSUNGSUVMRDoKICAgIGZvciBteSAkRHluYW1pY0ZpZWxkICggQHskRHluYW1pY0ZpZWxkTGlzdH0gKSB7CiAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgcmVmICREeW5hbWljRmllbGQgbmUgJ0hBU0gnOwogICAgICAgICREeW5hbWljRmllbGRMb29rdXB7ICREeW5hbWljRmllbGQtPntOYW1lfSB9ID0gJER5bmFtaWNGaWVsZDsKICAgIH0KCiAgICAjIGNyZWF0ZSBvciB1cGRhdGUgZHluYW1pYyBmaWVsZHMKICAgIERZTkFNSUNGSUVMRDoKICAgIGZvciBteSAkRHluYW1pY0ZpZWxkIChARHluYW1pY0ZpZWxkcykgewoKICAgICAgICBteSAkQ3JlYXRlRHluYW1pY0ZpZWxkOwoKICAgICAgICBpZiAoIHJlZiAkRHluYW1pY0ZpZWxkTG9va3VweyAkRHluYW1pY0ZpZWxkLT57TmFtZX0gfSBlcSAnSEFTSCcgKSB7CiAgICAgICAgICAgICMgRGVsZXRlcyBERgogICAgICAgICAgICBteSAkRHluYW1pY0ZpZWxkSUQgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkJyktPkR5bmFtaWNGaWVsZEdldCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAkRHluYW1pY0ZpZWxkLT57TmFtZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmICgkRHluYW1pY0ZpZWxkSUQtPntJRH0pewogICAgICAgICAgICAgICAgICBteSAkU3VjY2VzcyA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQnKS0+RHluYW1pY0ZpZWxkRGVsZXRlKAogICAgICAgICAgICAgICAgICAgSUQgICAgICA9PiAkRHluYW1pY0ZpZWxkSUQtPntJRH0sCiAgICAgICAgICAgICAgICAgICBVc2VySUQgID0+IDEsCiAgICAgICAgICAgICAgICAgICBSZW9yZGVyID0+IDEsICAgICAgICAgICAgICAgIyBvciAwLCB0byB0cmlnZ2VyIHJlb3JkZXIgZnVuY3Rpb24sIGRlZmF1bHQgMQogICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIGNoZWNrIGlmIG5ldyBmaWVsZCBoYXMgdG8gYmUgY3JlYXRlZAojICAgICAgICBpZiAoJENyZWF0ZUR5bmFtaWNGaWVsZCkgewoKCiAgICAgICAgICAgICMgY3JlYXRlIGEgbmV3IGZpZWxkCiAgICAgICAgICAgIG15ICRGaWVsZElEID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcpLT5EeW5hbWljRmllbGRBZGQoCiAgICAgICAgICAgICAgICBJbnRlcm5hbEZpZWxkID0+IDEsCiAgICAgICAgICAgICAgICBOYW1lICAgICAgICAgID0+ICREeW5hbWljRmllbGQtPntOYW1lfSwKICAgICAgICAgICAgICAgIExhYmVsICAgICAgICAgPT4gJER5bmFtaWNGaWVsZC0+e0xhYmVsfSwKICAgICAgICAgICAgICAgIEZpZWxkT3JkZXIgICAgPT4gJE5leHRPcmRlck51bWJlciwKICAgICAgICAgICAgICAgIEZpZWxkVHlwZSAgICAgPT4gJER5bmFtaWNGaWVsZC0+e0ZpZWxkVHlwZX0sCiAgICAgICAgICAgICAgICBPYmplY3RUeXBlICAgID0+ICREeW5hbWljRmllbGQtPntPYmplY3RUeXBlfSwKICAgICAgICAgICAgICAgIENvbmZpZyAgICAgICAgPT4gJER5bmFtaWNGaWVsZC0+e0NvbmZpZ30sCiAgICAgICAgICAgICAgICBWYWxpZElEICAgICAgID0+ICRWYWxpZElELAogICAgICAgICAgICAgICAgVXNlcklEICAgICAgICA9PiAxLAogICAgICAgICAgICApOwogICAgICAgICAgICBuZXh0IERZTkFNSUNGSUVMRCBpZiAhJEZpZWxkSUQ7CgogICAgICAgICAgICAjIGluY3JlYXNlIHRoZSBvcmRlciBudW1iZXIKICAgICAgICAgICAgJE5leHRPcmRlck51bWJlcisrOwojICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIDE7Cn0KCnN1YiBfR2V0SVRTTUR5bmFtaWNGaWVsZHNEZWZpbml0aW9uIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgIyBkZWZpbmUgYWxsIGR5bmFtaWMgZmllbGRzIGZvciBJVFNNCiAgICBteSBARHluYW1pY0ZpZWxkcyA9ICgKICAgICAgICB7CiAgICAgICAgICAgIE5hbWUgICAgICAgPT4gJ1JvY2tldENoYXRMaXZlQ2hhdElEJywKICAgICAgICAgICAgTGFiZWwgICAgICA9PiAnUm9ja2V0Q2hhdExpdmVDaGF0SUQnLAogICAgICAgICAgICBGaWVsZFR5cGUgID0+ICdUZXh0JywKICAgICAgICAgICAgT2JqZWN0VHlwZSA9PiAnVGlja2V0JywKICAgICAgICAgICAgQ29uZmlnICAgICA9PiB7CiAgICAgICAgICAgICAgICBEZWZhdWx0VmFsdWUgICA9PiAnJywKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgKTsKCiAgICByZXR1cm4gQER5bmFtaWNGaWVsZHM7Cn0KCnN1YiBfQ3JlYXRlV2ViU2VydmljZXMgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICAjVmVyaWZ5IGlmIGl0IGFscmVhZHkgZXhpc3RzCiAgICBteSAkTGlzdCAgICAgICAgICAgICA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpHZW5lcmljSW50ZXJmYWNlOjpXZWJzZXJ2aWNlJyktPldlYnNlcnZpY2VMaXN0KCk7CiAgICBteSAlV2ViU2VydmljZUxvb2t1cCA9IHJldmVyc2UgJXskTGlzdH07CiAgICBteSAkTmFtZSA9ICdSb2NrZXRDaGF0JzsKICAgIGlmICggJFdlYlNlcnZpY2VMb29rdXB7JE5hbWV9ICkgewogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgICMgaWYgZG9lc24ndCBleGlzdHMKICAgIG15ICRZQU1MID0gPDwiX0VORF8iOwotLS0KRGVidWdnZXI6CiAgRGVidWdUaHJlc2hvbGQ6IGRlYnVnCiAgVGVzdE1vZGU6ICcwJwpEZXNjcmlwdGlvbjogJycKRnJhbWV3b3JrVmVyc2lvbjogNi4wLngKUHJvdmlkZXI6CiAgT3BlcmF0aW9uOgogICAgQ2hhdDoKICAgICAgRGVzY3JpcHRpb246ICcnCiAgICAgIE1hcHBpbmdJbmJvdW5kOgogICAgICAgIENvbmZpZzoKICAgICAgICAgIFRlbXBsYXRlOiAiPD94bWwgdmVyc2lvbj1cXCIxLjBcXCIgZW5jb2Rpbmc9XFwiVVRGLThcXCI/Plxcclxcbjx4c2w6c3R5bGVzaGVldAogICAgICAgICAgICB2ZXJzaW9uPVxcIjEuMFxcIiB4bWxuczp4c2w9XFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS9YU0wvVHJhbnNmb3JtXFwiPlxcclxcbgogICAgICAgICAgICBcXCA8IS0tXFxyXFxuICAgICAgIERlcGFydG1lbnQgZmllbGQgbWFwcGluZyB0byBxdWV1ZSBmb3IgbmV3IHRpY2tldCBjcmVhdGlvblxcclxcbgogICAgICAgICAgICBcXCAtLT5cXHJcXG4gIDx4c2w6dmFyaWFibGUgbmFtZT1cXCJkZXB0b1xcIj5cXHJcXG4gICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFwiLy92aXNpdG9yL2RlcGFydG1lbnRcXCIKICAgICAgICAgICAgLz5cXHJcXG4gIDwveHNsOnZhcmlhYmxlPlxcclxcbiAgPHhzbDp2YXJpYWJsZSBuYW1lPVxcImRlcHRvdHJhbnNcXCI+XFxyXFxuICAgIDx4c2w6Y2hvb3NlPlxcclxcbgogICAgICAgICAgICBcXCAgICAgPHhzbDp3aGVuIHRlc3Q9XFwiXCRkZXB0bz0nJ1xcIj5SYXc8L3hzbDp3aGVuPlxcclxcbiAgICAgIDx4c2w6d2hlbiB0ZXN0PVxcIlwkZGVwdG89JzRGU2pSNUhkR3p6eWNrS3RFJ1xcIj5SYXc8L3hzbDp3aGVuPlxcclxcbgogICAgICAgICAgICBcXCAgICAgPHhzbDp3aGVuIHRlc3Q9XFwiXCRkZXB0bz0nRTdTN2E1eXNLYXhLZUVaN1knXFwiPlJhdzwveHNsOndoZW4+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICA8eHNsOndoZW4gdGVzdD1cXCJcJGRlcHRvPSdFN1M3YTV5c0theEtlRVo3WSdcXCI+UmF3PC94c2w6d2hlbj5cXHJcXG4KICAgICAgICAgICAgXFwgICAgIDx4c2w6b3RoZXJ3aXNlPlJhdzwveHNsOm90aGVyd2lzZT5cXHJcXG4gICAgPC94c2w6Y2hvb3NlPlxcclxcbiAgPC94c2w6dmFyaWFibGU+XFxyXFxuPCEtLVxcclxcbgogICAgICAgICAgICBcXCBDb3B5IGFsbCB0aGUgZWxlbWVudHNcXHJcXG4tLT5cXHJcXG4gIDx4c2w6dGVtcGxhdGUgbWF0Y2g9XFwibm9kZSgpIHwgQCpcXCI+XFxyXFxuCiAgICAgICAgICAgIFxcICAgPHhzbDpjb3B5PlxcclxcbiAgICAgIDx4c2w6YXBwbHktdGVtcGxhdGVzIHNlbGVjdD1cXCJub2RlKCkgfCBAKlxcIiAvPlxcclxcbgogICAgICAgICAgICBcXCAgIDwveHNsOmNvcHk+XFxyXFxuICA8L3hzbDp0ZW1wbGF0ZT5cXHJcXG48IS0tXFxyXFxuICBBZGQgXFwiUXVldWVcXCIsXFwiUHJpb3JpdHlcXCIsXFwiU3RhdGVcXCIuLi4KICAgICAgICAgICAgbm9kZXMgZm9yIG5ldyB0aWNrZXQgY3JlYXRpb25cXHJcXG4gIFlvdSBjYW4vaGF2ZSB0byBtYWtlIHlvdXIgYWRqdXN0bWVudAogICAgICAgICAgICBoZXJlXFxyXFxuLS0+XFxyXFxuICAgIDx4c2w6dGVtcGxhdGUgbWF0Y2g9XFwiUm9vdEVsZW1lbnRcXCI+XFxyXFxuICAgICAgICA8eHNsOmNvcHk+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICAgICAgICA8TmV3VGlja2V0Tm90aWZpY2F0aW9uPlxcclxcbiAgICAgICAgICAgICAgICA8Um9ja2V0Q2hhdEFQSVVybD5odHRwOi8vMTcyLjE3LjAuMTozMDAwL2FwaS92MS9saXZlY2hhdC9tZXNzYWdlPC9Sb2NrZXRDaGF0QVBJVXJsPlxcclxcbgogICAgICAgICAgICBcXCAgICAgICAgICAgICAgIDxNZXNzYWdlPlRoZSBmb2xsb3dpbmcgdGlja2V0IHdhcyBjcmVhdGVkIGZvciB0aGlzIGNoYXQ6XFxcXG5cJXM8L01lc3NhZ2U+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICAgICAgICA8L05ld1RpY2tldE5vdGlmaWNhdGlvbj5cXHJcXG4gICAgICAgICAgICA8TmV3Q2hhdD5cXHJcXG4gICAgICAgICAgICAgICA8UXVldWU+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFwiXCRkZXB0b3RyYW5zXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgPC9RdWV1ZT5cXHJcXG4KICAgICAgICAgICAgXFwgICAgICAgICAgICAgIDxTdGF0ZT5uZXc8L1N0YXRlPlxcclxcbiAgICAgICAgICAgICAgIDxMb2NrPnVubG9jazwvTG9jaz5cXHJcXG4KICAgICAgICAgICAgXFwgICAgICAgICAgICAgIDxQcmlvcml0eT4zIG5vcm1hbDwvUHJpb3JpdHk+XFxyXFxuICAgICAgICAgICAgICAgPE93bmVySUQ+MTwvT3duZXJJRD5cXHJcXG4KICAgICAgICAgICAgXFwgICAgICAgICAgICAgIDxVc2VySUQ+MTwvVXNlcklEPlxcclxcbiAgICAgICAgICAgIDwvTmV3Q2hhdD5cXHJcXG4gICAgICAgICAgICA8Q2hhdENsb3NlZD5cXHJcXG4KICAgICAgICAgICAgXFwgICAgICAgICAgICAgIDxTdGF0ZT5jbG9zZWQgc3VjY2Vzc2Z1bDwvU3RhdGU+XFxyXFxuICAgICAgICAgICAgICAgPExvY2s+dW5sb2NrPC9Mb2NrPlxcclxcbgogICAgICAgICAgICBcXCAgICAgICAgICAgPC9DaGF0Q2xvc2VkPlxcclxcbiAgICAgICAgICAgPHhzbDphcHBseS10ZW1wbGF0ZXMgc2VsZWN0PVxcIkAqfG5vZGUoKVxcIi8+XFxyXFxuCiAgICAgICAgICAgIFxcICAgICAgIDwveHNsOmNvcHk+XFxyXFxuICAgIDwveHNsOnRlbXBsYXRlPlxcclxcbiAgICA8eHNsOnRlbXBsYXRlIG1hdGNoPVxcImNvbnRlbnRcXCIKICAgICAgICAgICAgLz5cXHJcXG48L3hzbDpzdHlsZXNoZWV0PiIKICAgICAgICBUeXBlOiBYU0xUCiAgICAgIE1hcHBpbmdPdXRib3VuZDoge30KICAgICAgVHlwZTogUm9ja2V0Q2hhdDo6SW5jb21pbmdDaGF0CiAgVHJhbnNwb3J0OgogICAgQ29uZmlnOgogICAgICBLZWVwQWxpdmU6ICcnCiAgICAgIE1heExlbmd0aDogJzk5OTk5OTk5OScKICAgICAgUm91dGVPcGVyYXRpb25NYXBwaW5nOgogICAgICAgIENoYXQ6CiAgICAgICAgICBSZXF1ZXN0TWV0aG9kOgogICAgICAgICAgLSBHRVQKICAgICAgICAgIC0gUE9TVAogICAgICAgICAgUm91dGU6IC8KICAgIFR5cGU6IEhUVFA6OlJFU1QKUmVtb3RlU3lzdGVtOiAnJwpSZXF1ZXN0ZXI6CiAgVHJhbnNwb3J0OgogICAgVHlwZTogJycKCl9FTkRfCgogICAgbXkgJENvbmZpZyA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpZQU1MJyktPkxvYWQoIERhdGEgPT4gJFlBTUwgKTsKCiAgICAjIGFkZCBuZXcgd2ViIHNlcnZpY2UKICAgIG15ICRJRCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpHZW5lcmljSW50ZXJmYWNlOjpXZWJzZXJ2aWNlJyktPldlYnNlcnZpY2VBZGQoCiAgICAgICAgTmFtZSAgICA9PiAkTmFtZSwKICAgICAgICBDb25maWcgID0+ICRDb25maWcsCiAgICAgICAgVmFsaWRJRCA9PiAxLAogICAgICAgIFVzZXJJRCAgPT4gMSwKICAgICk7CgogICAgcmV0dXJuIDE7ICAgCn0KPWJhY2sKMQo=</File>
        <File Location="Kernel/System/Ticket/Event/NotificationEvent/Transport/RocketChat.pm" Permission="644" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAwMS0yMDE4IENvbXBsZW1lbnRvLCBodHRwOi8vY29tcGxlbWVudG8ubmV0LmJyLwojIC0tCiMgVGhpcyBzb2Z0d2FyZSBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFkuIEZvciBkZXRhaWxzLCBzZWUKIyB0aGUgZW5jbG9zZWQgZmlsZSBDT1BZSU5HIGZvciBsaWNlbnNlIGluZm9ybWF0aW9uIChBR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9hZ3BsLnR4dC4KIyAtLQoKcGFja2FnZSBLZXJuZWw6OlN5c3RlbTo6VGlja2V0OjpFdmVudDo6Tm90aWZpY2F0aW9uRXZlbnQ6OlRyYW5zcG9ydDo6Um9ja2V0Q2hhdDsKIyMgbm9maWx0ZXIoVGlkeUFsbDo6UGx1Z2luOjpPVFJTOjpQZXJsOjpMYXlvdXRPYmplY3QpCiMjIG5vZmlsdGVyKFRpZHlBbGw6OlBsdWdpbjo6T1RSUzo6UGVybDo6UGFyYW1PYmplY3QpCgp1c2Ugc3RyaWN0Owp1c2Ugd2FybmluZ3M7CnVzZSBKU09OOjpQUDsKCnVzZSBMV1A7CnVzZSBIVFRQOjpSZXF1ZXN0Owp1c2UgWE1MOjpTaW1wbGU7CnVzZSBFbmNvZGUgcXcoZGVjb2RlIGVuY29kZSk7CnVzZSBNSU1FOjpCYXNlNjQ7CnVzZSBEYXRhOjpEdW1wZXI7CnVzZSB1dGY4OwoKdXNlIEtlcm5lbDo6U3lzdGVtOjpWYXJpYWJsZUNoZWNrIHF3KDphbGwpOwp1c2UgS2VybmVsOjpMYW5ndWFnZSBxdyhUcmFuc2xhdGFibGUpOwoKdXNlIGJhc2UgcXcoS2VybmVsOjpTeXN0ZW06OlRpY2tldDo6RXZlbnQ6Ok5vdGlmaWNhdGlvbkV2ZW50OjpUcmFuc3BvcnQ6OkVtYWlsKTsKCm91ciBAT2JqZWN0RGVwZW5kZW5jaWVzID0gKAogICAgJ0tlcm5lbDo6Q29uZmlnJywKICAgICdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0JywKICAgICdLZXJuZWw6OlN5c3RlbTo6Q3VzdG9tZXJVc2VyJywKICAgICdLZXJuZWw6OlN5c3RlbTo6RW1haWwnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpMb2cnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpNYWluJywKICAgICdLZXJuZWw6OlN5c3RlbTo6UXVldWUnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpTeXN0ZW1BZGRyZXNzJywKICAgICdLZXJuZWw6OlN5c3RlbTo6VGlja2V0JywKICAgICdLZXJuZWw6OlN5c3RlbTo6VXNlcicsCiAgICAnS2VybmVsOjpTeXN0ZW06OldlYjo6UmVxdWVzdCcsCiAgICAnS2VybmVsOjpTeXN0ZW06OkNyeXB0OjpQR1AnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpDcnlwdDo6U01JTUUnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQ6OkJhY2tlbmQnLAopOwoKPWhlYWQxIE5BTUUKCktlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkV2ZW50OjpOb3RpZmljYXRpb25FdmVudDo6VHJhbnNwb3J0OjpTbXNOb3RpZnkgLSBzbXMgdHJhbnNwb3J0IGxheWVyCgo9aGVhZDEgU1lOT1BTSVMKCk5vdGlmaWNhdGlvbiBldmVudCB0cmFuc3BvcnQgbGF5ZXIuCgo9aGVhZDEgUFVCTElDIElOVEVSRkFDRQoKPW92ZXIgNAoKPWN1dAoKPWl0ZW0gbmV3KCkKCmNyZWF0ZSBhIG5vdGlmaWNhdGlvbiB0cmFuc3BvcnQgb2JqZWN0LiBEbyBub3QgdXNlIGl0IGRpcmVjdGx5LCBpbnN0ZWFkIHVzZToKCiAgICB1c2UgS2VybmVsOjpTeXN0ZW06Ok9iamVjdE1hbmFnZXI7CiAgICBsb2NhbCAkS2VybmVsOjpPTSA9IEtlcm5lbDo6U3lzdGVtOjpPYmplY3RNYW5hZ2VyLT5uZXcoJycpOwogICAgbXkgJFRyYW5zcG9ydE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkV2ZW50OjpOb3RpZmljYXRpb25FdmVudDo6VHJhbnNwb3J0OjpTbXNOb3RpZnknKTsKCj1jdXQKCiNzdWIgbmV3IHsKICAgICNteSAoICRUeXBlLCAlUGFyYW0gKSA9IEBfOwoKICAgICMjIGFsbG9jYXRlIG5ldyBoYXNoIGZvciBvYmplY3QKICAgICNteSAkU2VsZiA9IHt9OwogICAgI2JsZXNzKCAkU2VsZiwgJFR5cGUgKTsKCiAgICAjcmV0dXJuICRTZWxmOwojfQoKc3ViIFNlbmROb3RpZmljYXRpb24gewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICAjIGNoZWNrIG5lZWRlZCBzdHVmZgogICAgZm9yIG15ICROZWVkZWQgKHF3KFRpY2tldElEIFVzZXJJRCBOb3RpZmljYXRpb24gUmVjaXBpZW50KSkgewogICAgICAgIGlmICggISRQYXJhbXskTmVlZGVkfSApIHsKICAgICAgICAgICAgJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkxvZycpLT5Mb2coCiAgICAgICAgICAgICAgICBQcmlvcml0eSA9PiAnZXJyb3InLAogICAgICAgICAgICAgICAgTWVzc2FnZSAgPT4gJ05lZWQgJE5lZWRlZCEnLAogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfQoKICAgICMgY2xlYW51cCBldmVudCBkYXRhCiAgICAkU2VsZi0+e0V2ZW50RGF0YX0gPSB1bmRlZjsKCiAgICAjIGdldCBuZWVkZWQgb2JqZWN0cwogICAgbXkgJENvbmZpZ09iamVjdCAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OkNvbmZpZycpOwogICAgbXkgJFN5c3RlbUFkZHJlc3NPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6U3lzdGVtQWRkcmVzcycpOwogICAgbXkgJExheW91dE9iamVjdCAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0Jyk7CgoKICAgIG15ICVOb3RpZmljYXRpb24gPSAleyAkUGFyYW17Tm90aWZpY2F0aW9ufSB9OwoKICAgIHJldHVybiBpZiAhJFBhcmFte05vdGlmaWNhdGlvbn0tPntEYXRhfS0+e1JlY2lwaWVudFdlYmhvb2tVUkx9OwoKICAgICMgZ2V0IHRpY2tldCBvYmplY3QKICAgIG15ICRUaWNrZXRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VGlja2V0Jyk7CgogICAgIyBzZW5kIG5vdGlmaWNhdGlvbgogICAgbXkgJFNlbnQgPSAkU2VsZi0+X1NjaGVkdWxlTWVzc2FnZSgKICAgICAgICAgICAgICAgICAgICBTdWJqZWN0ICAgICAgICAgICAgID0+ICROb3RpZmljYXRpb257U3ViamVjdH0sCiAgICAgICAgICAgICAgICAgICAgQm9keSAgICAgICAgICAgICAgICA9PiAkTm90aWZpY2F0aW9ue0JvZHl9LAogICAgICAgICAgICAgICAgICAgIFJlY2lwaWVudFdlYmhvb2tVUkwgPT4gJFBhcmFte05vdGlmaWNhdGlvbn0tPntEYXRhfS0+e1JlY2lwaWVudFdlYmhvb2tVUkx9CiAgICAgICAgICAgICAgICAgICAgKTsKCiAgICBpZiAoICEkU2VudCApIHsKICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6TG9nJyktPkxvZygKICAgICAgICAgICAgUHJpb3JpdHkgPT4gJ2Vycm9yJywKICAgICAgICAgICAgTWVzc2FnZSAgPT4gIickTm90aWZpY2F0aW9ue05hbWV9JyBub3RpZmljYXRpb24gY291bGQgbm90IGJlIHNlbnQgdG8gUm9ja2V0LkNoYXQiLAogICAgICAgICk7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgICMgbG9nIGV2ZW50CiAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6TG9nJyktPkxvZygKICAgICAgICBQcmlvcml0eSA9PiAnaW5mbycsCiAgICAgICAgTWVzc2FnZSAgPT4gIlNlbnQgYWdlbnQgJyROb3RpZmljYXRpb257TmFtZX0nIG5vdGlmaWNhdGlvbiB0byBSb2NrZXQuQ2hhdC4iLAogICAgKTsKCiAgICByZXR1cm4gMTsKfQoKc3ViIEdldFRyYW5zcG9ydFJlY2lwaWVudHMgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBmb3IgbXkgJE5lZWRlZCAocXcoTm90aWZpY2F0aW9uKSkgewogICAgICAgIGlmICggISRQYXJhbXskTmVlZGVkfSApIHsKICAgICAgICAgICAgJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkxvZycpLT5Mb2coCiAgICAgICAgICAgICAgICBQcmlvcml0eSA9PiAnZXJyb3InLAogICAgICAgICAgICAgICAgTWVzc2FnZSAgPT4gIk5lZWQgJE5lZWRlZCIsCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQoKICAgIG15IEBSZWNpcGllbnRzOwoKICAgIG15ICVSZWNpcGllbnQ7CiAgICAkUmVjaXBpZW50e1R5cGV9ICAgICAgICA9ICdBZ2VudCc7CiAgICAkUmVjaXBpZW50e1dlYmhvb2tVUkx9ICA9ICRQYXJhbXtOb3RpZmljYXRpb259LT57RGF0YX0tPntSZWNpcGllbnRXZWJob29rVVJMfTsKCiAgICBwdXNoIEBSZWNpcGllbnRzLCBcJVJlY2lwaWVudDsKICAgIHJldHVybiBAUmVjaXBpZW50czsKfQoKc3ViIFRyYW5zcG9ydFNldHRpbmdzRGlzcGxheUdldCB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIEtFWToKICAgIGZvciBteSAkS2V5IChxdyhSZWNpcGllbnRXZWJob29rVVJMKSkgewogICAgICAgIG5leHQgS0VZIGlmICEkUGFyYW17RGF0YX0tPnskS2V5fTsKICAgICAgICBuZXh0IEtFWSBpZiAhZGVmaW5lZCAkUGFyYW17RGF0YX0tPnskS2V5fS0+WzBdOwogICAgICAgICRQYXJhbXskS2V5fSA9ICRQYXJhbXtEYXRhfS0+eyRLZXl9LT5bMF07CiAgICB9CgogICAgIyBnZXQgbGF5b3V0IG9iamVjdAogICAgbXkgJExheW91dE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKTsKICAgIAogICAgIyBnZW5lcmF0ZSBIVE1MCiAgICBteSAkT3V0cHV0ID0gJExheW91dE9iamVjdC0+T3V0cHV0KAogICAgICAgIFRlbXBsYXRlRmlsZSA9PiAnQWRtaW5Ob3RpZmljYXRpb25FdmVudFRyYW5zcG9ydFJvY2tldENoYXQnLAogICAgICAgIERhdGEgICAgICAgICA9PiBcJVBhcmFtLAogICAgKTsKCiAgICByZXR1cm4gJE91dHB1dDsKfQoKc3ViIFRyYW5zcG9ydFBhcmFtU2V0dGluZ3NHZXQgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBmb3IgbXkgJE5lZWRlZCAocXcoR2V0UGFyYW0pKSB7CiAgICAgICAgaWYgKCAhJFBhcmFteyROZWVkZWR9ICkgewogICAgICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6TG9nJyktPkxvZygKICAgICAgICAgICAgICAgIFByaW9yaXR5ID0+ICdlcnJvcicsCiAgICAgICAgICAgICAgICBNZXNzYWdlICA9PiAiTmVlZCAkTmVlZGVkIiwKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgogICAgIyBnZXQgcGFyYW0gb2JqZWN0CiAgICBteSAkUGFyYW1PYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6V2ViOjpSZXF1ZXN0Jyk7CgogICAgUEFSQU1FVEVSOgogICAgZm9yIG15ICRQYXJhbWV0ZXIgKAogICAgICAgIHF3KFJlY2lwaWVudFdlYmhvb2tVUkwpCiAgICAgICAgKQogICAgewogICAgICAgIG15IEBEYXRhID0gJFBhcmFtT2JqZWN0LT5HZXRBcnJheSggUGFyYW0gPT4gJFBhcmFtZXRlciApOwogICAgICAgIG5leHQgUEFSQU1FVEVSIGlmICFARGF0YTsKICAgICAgICAkUGFyYW17R2V0UGFyYW19LT57RGF0YX0tPnskUGFyYW1ldGVyfSA9IFxARGF0YTsKICAgIH0KCiAgICAjIE5vdGU6IEV4YW1wbGUgaG93IHRvIHNldCBlcnJvcnMgYW5kIHVzZSB0aGVtCiAgICAjIG9uIHRoZSBub3JtYWwgQWRtaW5Ob3RpZmljYXRpb25FdmVudCBzY3JlZW4KICAgICMgIyBzZXQgZXJyb3IKICAgICMgJFBhcmFte0dldFBhcmFtfS0+eyRQYXJhbWV0ZXIuJ1NlcnZlckVycm9yJ30gPSAnU2VydmVyRXJyb3InOwoKICAgIHJldHVybiAxOwp9CgpzdWIgX1NjaGVkdWxlTWVzc2FnZSB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKCSMgRm9yIEFzeW5jaHJvbm91cyBzZW5kaW5nCglteSAkVGFza05hbWUgPSBzdWJzdHIgIlJlY2lwaWVudCIucmFuZCgpLiRQYXJhbXtSZWNpcGllbnRXZWJob29rVVJMfSwgMCwgMjU1OwoJCgkjIGNyZWF0ZSBhIG5ldyB0YXNrCglteSAkVGFza0lEID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlNjaGVkdWxlcicpLT5UYXNrQWRkKAoJCVR5cGUgICAgICAgICAgICAgICAgICAgICA9PiAnQXN5bmNocm9ub3VzRXhlY3V0b3InLAoJCU5hbWUgICAgICAgICAgICAgICAgICAgICA9PiAkVGFza05hbWUsCgkJQXR0ZW1wdHMgICAgICAgICAgICAgICAgID0+ICAxLAoJCU1heGltdW1QYXJhbGxlbEluc3RhbmNlcyA9PiAgMCwKCQlEYXRhICAgICAgICAgICAgICAgICAgICAgPT4gewoJCQlPYmplY3QgICA9PiAnS2VybmVsOjpTeXN0ZW06OlRpY2tldDo6RXZlbnQ6Ok5vdGlmaWNhdGlvbkV2ZW50OjpUcmFuc3BvcnQ6OlJvY2tldENoYXQnLAoJCQlGdW5jdGlvbiA9PiAnU2VuZE1lc3NhZ2VSb2NrZXRDaGF0JywKCQkJUGFyYW1zICAgPT4gewoJCQkJCQlSZWNpcGllbnRXZWJob29rVVJMID0+ICRQYXJhbXtSZWNpcGllbnRXZWJob29rVVJMfSwKCQkJCQkJU3ViamVjdCAgICAgICAgICAgICA9PiAkUGFyYW17U3ViamVjdH0sCgkJCQkJCUJvZHkgICAgICAgICAgICAgICAgPT4gJFBhcmFte0JvZHl9LAoJCQkJCX0sCgkJfSwKCSk7Cn0KCnN1YiBTZW5kTWVzc2FnZVJvY2tldENoYXQgewoJbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCgkjIENvbnZlcnQgQm9keSB0byBwdXJlIHRleHQKCSRQYXJhbXtCb2R5fSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpIVE1MVXRpbHMnKS0+VG9Bc2NpaSggU3RyaW5nID0+ICRQYXJhbXtCb2R5fSApOwoJJFBhcmFte0JvZHl9ID0gZW5jb2RlKCJ1dGY4IiwgJFBhcmFte0JvZHl9KTsKCglteSAkdWEgICA9IExXUDo6VXNlckFnZW50LT5uZXc7CgoJbXkgJURhdGE7CgkkRGF0YXt0ZXh0fSA9ICRQYXJhbXtTdWJqZWN0fSAuIlxuXG4iLiRQYXJhbXtCb2R5fTsKCQoJbXkgJGpzb25EYXRhID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkpTT04nKS0+RW5jb2RlKAogICAgICAgIERhdGEgPT4gXCVEYXRhLAogICAgKTsKCgkkdWEtPmRlZmF1bHRfaGVhZGVyKCJDb250ZW50LVR5cGUiID0+ICJhcHBsaWNhdGlvbi9qc29uIik7CgkkdWEtPmRlZmF1bHRfaGVhZGVyKCJBY2NlcHQiID0+ICJhcHBsaWNhdGlvbi9qc29uIik7CgoJbXkgJHJlc3BvbnNlID0gJHVhLT5wb3N0KCRQYXJhbXtSZWNpcGllbnRXZWJob29rVVJMfS0+WzBdLCBDb250ZW50X1R5cGUgPT4gJ2FwcGxpY2F0aW9uL2pzb24nLCBDb250ZW50ID0+ICRqc29uRGF0YSk7CgoJbXkgJFJlc3BvbnNlRGF0YSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpKU09OJyktPkRlY29kZSgKICAgICAgICBEYXRhID0+ICRyZXNwb25zZS0+ZGVjb2RlZF9jb250ZW50LAogICAgKTsKCglpZighJFJlc3BvbnNlRGF0YS0+e3N1Y2Nlc3N9KXsKCQkkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6TG9nJyktPkxvZygKCQkJIFByaW9yaXR5ID0+ICdlcnJvcicsCgkJCSBNZXNzYWdlICA9PiAiRXJyb3Igb24gc2VuZGluZyBtZXNzYWdlIHRvIFJvY2tldC5DaGF0IiwKCQkpOwoJCXJldHVybiAwOwoJfSBlbHNlIHsKCQlyZXR1cm4gMTsKCX0KCn0KMTsKCj1iYWNrCgo9aGVhZDEgVEVSTVMgQU5EIENPTkRJVElPTlMKClRoaXMgc29mdHdhcmUgY29tZXMgd2l0aCBBQlNPTFVURUxZIE5PIFdBUlJBTlRZLiBGb3IgZGV0YWlscywgc2VlCnRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEFHUEwpLiBJZiB5b3UKZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIEw8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0Pi4KCj1jdXQK</File>
        <File Location="Kernel/Output/HTML/Templates/Standard/AdminNotificationEventTransportRocketChat.tt" Permission="644" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAwMS0yMDE4IENvbXBsZW1lbnRvLCBodHRwOi8vd3d3LmNvbXBsZW1lbnRvLm5ldC5icgojIC0tCiMgVGhpcyBzb2Z0d2FyZSBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFkuIEZvciBkZXRhaWxzLCBzZWUKIyB0aGUgZW5jbG9zZWQgZmlsZSBDT1BZSU5HIGZvciBsaWNlbnNlIGluZm9ybWF0aW9uIChBR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9hZ3BsLnR4dC4KIyAtLQoKPHAgY2xhc3M9IkZpZWxkRXhwbGFuYXRpb24iPlslIFRyYW5zbGF0ZSgiVGhpcyBtZXRob2Qgc2VuZHMgdGhlIG5vdGlmaWNhdGlvbiB0byB5b3VyIFJvY2tldC5DaGF0ISIpIHwgaHRtbCAlXTwvcD4KCjxsYWJlbCBmb3I9IlJlY2lwaWVudFdlYmhvb2tVUkwiPlslIFRyYW5zbGF0ZSgiUm9ja2V0LkNoYXQgV2ViaG9vayBVUkwiKSB8IGh0bWwgJV06IDwvbGFiZWw+CjxkaXYgY2xhc3M9IkZpZWxkIj4KICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJSZWNpcGllbnRXZWJob29rVVJMIiBpZD0iUmVjaXBpZW50V2ViaG9va1VSTCIgY2xhc3M9Ilc1MHBjIiB2YWx1ZT0iWyUgRGF0YS5SZWNpcGllbnRXZWJob29rVVJMIHwgaHRtbCAlXSIvPgo8L2Rpdj4KPGRpdiBjbGFzcz0iQ2xlYXIiPjwvZGl2Pgo=</File>
    </Filelist>
</otrs_package>